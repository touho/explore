{"version":3,"file":"openeditplay.homepage.js","sources":["../src/homepage/util.ts","../node_modules/redom/dist/redom.es.js","../src/homepage/contextMenu.ts","../src/homepage/profile.ts","../src/homepage/gameElement.ts","../src/homepage/main.ts"],"sourcesContent":["export function getAjax(url) {\n\treturn new Promise(function(resolve, reject) {\n\t\tlet xhttp = new XMLHttpRequest();\n\t\txhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4) {\n\t\t\t\tif (this.status === 200)\n\t\t\t\t\tresolve(JSON.parse(this.responseText));\n\t\t\t\telse\n\t\t\t\t\treject();\n\t\t\t}\n\t\t};\n\t\txhttp.open(\"GET\", url, true);\n\t\txhttp.send();\n\t});\n}\n\nexport function standaloneMobileLinkClickEventSupport(e)Â {\n\tif (window.navigator.standalone) {\n\t\te.preventDefault();\n\t\tlet url = e.target.getAttribute('href');\n\t\twindow.location.href = url;\n\t}\n}\n\n// 2016-01-01 -> 3 years ago\nexport function dateToAgoFormat(date) {\n\tdate = new Date(date);\n\t\n\tlet now = new Date();\n\tlet diffSeconds = (now - date) / 1000;\n\tif (diffSeconds < 10) {\n\t\treturn 'now';\n\t} else if (diffSeconds < 60) {\n\t\treturn 'less than minute ago';\n\t}\n\t\n\tlet diffMinutes = diffSeconds / 60;\n\t\n\tif (diffMinutes < 2) {\n\t\treturn 'minute ago';\n\t} else if (diffMinutes < 60) {\n\t\treturn `${diffMinutes | 0} minutes ago`;\n\t}\n\n\tlet diffHours = diffMinutes / 60;\n\n\tif (diffHours < 2) {\n\t\treturn 'hour ago';\n\t} else if (diffHours < 24) {\n\t\treturn `${diffHours | 0} hours ago`;\n\t}\n\n\tlet diffDays = diffHours / 60;\n\n\tif (diffDays < 2) {\n\t\treturn 'day ago';\n\t} else if (diffDays < 7) {\n\t\treturn `${diffDays | 0} days ago`;\n\t}\n\t\n\tlet diffWeeks = diffDays / 7;\n\t\n\tif (diffWeeks < 2) {\n\t\treturn 'week ago';\n\t} else if (diffWeeks < 4) {\n\t\treturn `${diffDays | 0} weeks ago`;\n\t}\n\n\tlet diffMonths = diffDays / 30;\n\n\tif (diffMonths < 2) {\n\t\treturn 'month ago';\n\t} else if (diffMonths < 12) {\n\t\treturn `${diffMonths | 0} months ago`;\n\t}\n\n\tlet diffYears = diffDays / 365;\n\n\tif (diffYears < 2) {\n\t\treturn 'year ago';\n\t} else {\n\t\treturn `${diffYears | 0} years ago`;\n\t}\n}\n","var HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAG_NAME = 0;\nvar ID = 1;\nvar CLASS_NAME = 2;\n\nvar parseQuery = function (query) {\n  var tag = null;\n  var id = null;\n  var className = null;\n  var mode = TAG_NAME;\n  var offset = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n    var isHash = char === HASH;\n    var isDot = char === DOT;\n    var isEnd = !char;\n\n    if (isHash || isDot || isEnd) {\n      if (mode === TAG_NAME) {\n        if (i === 0) {\n          tag = 'div';\n        } else {\n          tag = query.substring(offset, i);\n        }\n      } else if (mode === ID) {\n        id = query.substring(offset, i);\n      } else {\n        if (className) {\n          className += ' ' + query.substring(offset, i);\n        } else {\n          className = query.substring(offset, i);\n        }\n      }\n\n      if (isHash) {\n        mode = ID;\n      } else if (isDot) {\n        mode = CLASS_NAME;\n      }\n\n      offset = i + 1;\n    }\n  }\n\n  return { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n  var ref = parseQuery(query);\n  var tag = ref.tag;\n  var id = ref.id;\n  var className = ref.className;\n  var element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    if (ns) {\n      element.setAttribute('class', className);\n    } else {\n      element.className = className;\n    }\n  }\n\n  return element;\n};\n\nvar unmount = function (parent, child) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (childEl.parentNode) {\n    doUnmount(child, childEl, parentEl);\n\n    parentEl.removeChild(childEl);\n  }\n\n  return child;\n};\n\nvar doUnmount = function (child, childEl, parentEl) {\n  var hooks = childEl.__redom_lifecycle;\n\n  if (hooksAreEmpty(hooks)) {\n    childEl.__redom_mounted = false;\n    return;\n  }\n\n  var traverse = parentEl;\n\n  if (childEl.__redom_mounted) {\n    trigger(childEl, 'onunmount');\n  }\n\n  while (traverse) {\n    var parentHooks = traverse.__redom_lifecycle || {};\n\n    for (var hook in hooks) {\n      if (parentHooks[hook]) {\n        parentHooks[hook] -= hooks[hook];\n      }\n    }\n\n    if (hooksAreEmpty(parentHooks)) {\n      traverse.__redom_lifecycle = null;\n    }\n\n    traverse = traverse.parentNode;\n  }\n};\n\nvar hooksAreEmpty = function (hooks) {\n  if (hooks == null) {\n    return true;\n  }\n  for (var key in hooks) {\n    if (hooks[key]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nvar hookNames = ['onmount', 'onunmount'];\nvar shadowRootAvailable = typeof window !== 'undefined' && 'ShadowRoot' in window;\n\nvar mount = function (parent, child, before) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n\n  var wasMounted = childEl.__redom_mounted;\n  var oldParent = childEl.parentNode;\n\n  if (wasMounted && (oldParent !== parentEl)) {\n    doUnmount(child, childEl, oldParent);\n  }\n\n  if (before != null) {\n    parentEl.insertBefore(childEl, getEl(before));\n  } else {\n    parentEl.appendChild(childEl);\n  }\n\n  doMount(child, childEl, parentEl, oldParent);\n\n  return child;\n};\n\nvar doMount = function (child, childEl, parentEl, oldParent) {\n  var hooks = childEl.__redom_lifecycle || (childEl.__redom_lifecycle = {});\n  var remount = (parentEl === oldParent);\n  var hooksFound = false;\n\n  for (var i = 0; i < hookNames.length; i++) {\n    var hookName = hookNames[i];\n\n    if (!remount && (child !== childEl) && (hookName in child)) {\n      hooks[hookName] = (hooks[hookName] || 0) + 1;\n    }\n    if (hooks[hookName]) {\n      hooksFound = true;\n    }\n  }\n\n  if (!hooksFound) {\n    childEl.__redom_mounted = true;\n    return;\n  }\n\n  var traverse = parentEl;\n  var triggered = false;\n\n  if (remount || (!triggered && (traverse && traverse.__redom_mounted))) {\n    trigger(childEl, remount ? 'onremount' : 'onmount');\n    triggered = true;\n  }\n\n  if (remount) {\n    return;\n  }\n\n  while (traverse) {\n    var parent = traverse.parentNode;\n    var parentHooks = traverse.__redom_lifecycle || (traverse.__redom_lifecycle = {});\n\n    for (var hook in hooks) {\n      parentHooks[hook] = (parentHooks[hook] || 0) + hooks[hook];\n    }\n\n    if (!triggered && (traverse === document || (shadowRootAvailable && (traverse instanceof window.ShadowRoot)) || (parent && parent.__redom_mounted))) {\n      trigger(traverse, remount ? 'onremount' : 'onmount');\n      triggered = true;\n    }\n\n    traverse = parent;\n  }\n};\n\nvar trigger = function (el, eventName) {\n  if (eventName === 'onmount') {\n    el.__redom_mounted = true;\n  } else if (eventName === 'onunmount') {\n    el.__redom_mounted = false;\n  }\n\n  var hooks = el.__redom_lifecycle;\n\n  if (!hooks) {\n    return;\n  }\n\n  var view = el.__redom_view;\n  var hookCount = 0;\n\n  view && view[eventName] && view[eventName]();\n\n  for (var hook in hooks) {\n    if (hook) {\n      hookCount++;\n    }\n  }\n\n  if (hookCount) {\n    var traverse = el.firstChild;\n\n    while (traverse) {\n      var next = traverse.nextSibling;\n\n      trigger(traverse, eventName);\n\n      traverse = next;\n    }\n  }\n};\n\nvar setStyle = function (view, arg1, arg2) {\n  var el = getEl(view);\n\n  if (arg2 !== undefined) {\n    el.style[arg1] = arg2;\n  } else if (isString(arg1)) {\n    el.setAttribute('style', arg1);\n  } else {\n    for (var key in arg1) {\n      setStyle(el, key, arg1[key]);\n    }\n  }\n};\n\n/* global SVGElement */\n\nvar xlinkns = 'http://www.w3.org/1999/xlink';\n\nvar setAttr = function (view, arg1, arg2) {\n  var el = getEl(view);\n  var isSVG = el instanceof SVGElement;\n\n  if (arg2 !== undefined) {\n    if (arg1 === 'style') {\n      setStyle(el, arg2);\n    } else if (isSVG && isFunction(arg2)) {\n      el[arg1] = arg2;\n    } else if (arg1 === 'dataset') {\n      setData(el, arg2);\n    } else if (!isSVG && (arg1 in el || isFunction(arg2))) {\n      el[arg1] = arg2;\n    } else {\n      if (isSVG && (arg1 === 'xlink')) {\n        setXlink(el, arg2);\n        return;\n      }\n      el.setAttribute(arg1, arg2);\n    }\n  } else {\n    for (var key in arg1) {\n      setAttr(el, key, arg1[key]);\n    }\n  }\n};\n\nfunction setXlink (el, obj) {\n  for (var key in obj) {\n    el.setAttributeNS(xlinkns, key, obj[key]);\n  }\n}\n\nfunction setData (el, obj) {\n  for (var key in obj) {\n    el.dataset[key] = obj[key];\n  }\n}\n\nvar text = function (str) { return document.createTextNode((str != null) ? str : ''); };\n\nvar parseArguments = function (element, args) {\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n\n    if (arg !== 0 && !arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (isString(arg) || isNumber(arg)) {\n      element.appendChild(text(arg));\n    } else if (isNode(getEl(arg))) {\n      mount(element, arg);\n    } else if (arg.length) {\n      parseArguments(element, arg);\n    } else if (typeof arg === 'object') {\n      setAttr(element, arg);\n    }\n  }\n};\n\nvar ensureEl = function (parent) { return isString(parent) ? html(parent) : getEl(parent); };\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nvar html = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeHTML(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n};\n\nhtml.extend = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var clone = memoizeHTML(query);\n\n  return html.bind.apply(html, [ this, clone ].concat( args ));\n};\n\nvar el = html;\nvar h = html;\n\nvar setChildren = function (parent) {\n  var children = [], len = arguments.length - 1;\n  while ( len-- > 0 ) children[ len ] = arguments[ len + 1 ];\n\n  var parentEl = getEl(parent);\n  var current = traverse(parent, children, parentEl.firstChild);\n\n  while (current) {\n    var next = current.nextSibling;\n\n    unmount(parent, current);\n\n    current = next;\n  }\n};\n\nfunction traverse (parent, children, _current) {\n  var current = _current;\n\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = getEl(child);\n\n    if (childEl === current) {\n      current = current.nextSibling;\n      continue;\n    }\n\n    if (isNode(childEl)) {\n      mount(parent, child, current);\n      continue;\n    }\n\n    if (child.length != null) {\n      current = traverse(parent, child, current);\n    }\n  }\n\n  return current;\n}\n\nvar propKey = function (key) { return function (item) { return item[key]; }; };\n\nvar listPool = function (View, key, initData) {\n  return new ListPool(View, key, initData);\n};\n\nvar ListPool = function ListPool (View, key, initData) {\n  this.View = View;\n  this.initData = initData;\n  this.oldLookup = {};\n  this.lookup = {};\n  this.oldViews = [];\n  this.views = [];\n\n  if (key != null) {\n    this.lookup = {};\n    this.key = isFunction(key) ? key : propKey(key);\n  }\n};\nListPool.prototype.update = function update (data, context) {\n  var ref = this;\n    var View = ref.View;\n    var key = ref.key;\n    var initData = ref.initData;\n  var keySet = key != null;\n\n  var oldLookup = this.lookup;\n  var newLookup = {};\n\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (keySet) {\n      var id = key(item);\n      view = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__redom_id = id;\n    } else {\n      view = oldViews[i] || new View(initData, item, i, data);\n    }\n    view.update && view.update(item, i, data, context);\n\n    var el = getEl(view.el);\n    el.__redom_view = view;\n    newViews[i] = view;\n  }\n\n  this.oldViews = oldViews;\n  this.views = newViews;\n\n  this.oldLookup = oldLookup;\n  this.lookup = newLookup;\n};\n\nvar list = function (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n};\n\nvar List = function List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.initData = initData;\n  this.views = [];\n  this.pool = new ListPool(View, key, initData);\n  this.el = ensureEl(parent);\n  this.keySet = key != null;\n};\nList.prototype.update = function update (data, context) {\n    var this$1 = this;\n    if ( data === void 0 ) data = [];\n\n  var ref = this;\n    var keySet = ref.keySet;\n  var oldViews = this.views;\n  var oldLookup = keySet && this.lookup;\n\n  this.pool.update(data, context);\n  var ref$1 = this.pool;\n    var views = ref$1.views;\n    var lookup = ref$1.lookup;\n\n  if (keySet) {\n    for (var i = 0; i < oldViews.length; i++) {\n      var id = oldViews[i].__redom_id;\n      if (!(id in lookup)) {\n        unmount(this$1, oldLookup[id]);\n      }\n    }\n  }\n\n  setChildren(this, views);\n\n  if (keySet) {\n    this.lookup = lookup;\n  }\n  this.views = views;\n};\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\n/* global Node */\n\nvar place = function (View, initData) {\n  return new Place(View, initData);\n};\n\nvar Place = function Place (View, initData) {\n  this.el = text('');\n  this.visible = false;\n  this.view = null;\n  this._placeholder = this.el;\n  if (View instanceof Node) {\n    this._el = View;\n  } else {\n    this._View = View;\n  }\n  this._initData = initData;\n};\nPlace.prototype.update = function update (visible, data) {\n  var placeholder = this._placeholder;\n  var parentNode = this.el.parentNode;\n\n  if (visible) {\n    if (!this.visible) {\n      if (this._el) {\n        mount(parentNode, this._el, placeholder);\n        unmount(parentNode, placeholder);\n        this.el = this._el;\n        this.visible = visible;\n        return;\n      }\n      var View = this._View;\n      var view = new View(this._initData);\n\n      this.el = getEl(view);\n      this.view = view;\n\n      mount(parentNode, view, placeholder);\n      unmount(parentNode, placeholder);\n    }\n    this.view && this.view.update && this.view.update(data);\n  } else {\n    if (this.visible) {\n      if (this._el) {\n        mount(parentNode, placeholder, this._el);\n        unmount(parentNode, this._el);\n        this.el = placeholder;\n        this.visible = visible;\n        return;\n      }\n      mount(parentNode, placeholder, this.view);\n      unmount(parentNode, this.view);\n\n      this.el = placeholder;\n      this.view = null;\n    }\n  }\n  this.visible = visible;\n};\n\nvar router = function (parent, Views, initData) {\n  return new Router(parent, Views, initData);\n};\n\nvar Router = function Router (parent, Views, initData) {\n  this.el = ensureEl(parent);\n  this.Views = Views;\n  this.initData = initData;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.route = route;\n    this.view = View && new View(this.initData, data);\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data, route);\n};\n\nvar ns = 'http://www.w3.org/2000/svg';\n\nvar svgCache = {};\n\nvar memoizeSVG = function (query) { return svgCache[query] || (svgCache[query] = createElement(query, ns)); };\n\nvar svg = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeSVG(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n};\n\nsvg.extend = function (query) {\n  var clone = memoizeSVG(query);\n\n  return svg.bind(this, clone);\n};\n\nsvg.ns = ns;\n\nvar s = svg;\n\nexport { el, h, html, list, List, listPool, ListPool, mount, unmount, place, Place, router, Router, setAttr, setStyle, setChildren, s, svg, text };\n","\nimport {el, mount, list, List, RedomComponent} from 'redom';\n\n// item: {label, callback}\nexport class ContextMenu {\n\tel: HTMLElement;\n\tlist: List;\n\n\tconstructor(triggerElement, items) {\n\t\tlet triggerBounds = triggerElement.getBoundingClientRect();\n\n\n\t\tthis.el = el('div.contextMenu', {\n\t\t\tstyle: {\n\t\t\t\ttop: (triggerBounds.bottom + window.pageYOffset) + 'px',\n\t\t\t\tleft: triggerBounds.left + 'px'\n\t\t\t}\n\t\t});\n\t\tthis.list = list(this.el, ContextMenuItem);\n\t\tthis.list.update(items);\n\n\t\tsetTimeout(() => {\n\t\t\tthis.eventListener = window.addEventListener('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t});\n\t\t}, 0);\n\n\t\tmount(document.body, this.el);\n\t}\n\n\tremove() {\n\t\tif (this.eventListener)\n\t\t\twindow.removeEventListener('click', this.eventListener);\n\n\t\tif (this.el.parentNode)\n\t\t\tthis.el.parentNode.removeChild(this.el);\n\t}\n}\n\nclass ContextMenuItem implements RedomComponent {\n\tel: HTMLElement;\n\tcallback: () => void;\n\n\tconstructor() {\n\t\tthis.el = el('div.contextMenuItem',\n\t\t\t{\n\t\t\t\tonclick: () => this.callback && this.callback()\n\t\t\t}\n\t\t);\n\n\t\tthis.callback = null;\n\t}\n\n\tupdate(data) {\n\t\tthis.el.textContent = data.label;\n\t\tthis.callback = data.callback;\n\t}\n}\n","import {getAjax} from \"./util\";\nimport {el, mount, list} from 'redom';\n\nlet profile = {};\n\nlet profileButton = null;\nlet profileMenu = null;\nlet buttonContainer = null;\n\nlet windowLoadPromise = new Promise((resolve, reject) => window.addEventListener('load', resolve));\n\nlet promiseResolve = null;\nexport let profilePromise = new Promise((resolve, reject) => {\n\tpromiseResolve = resolve;\n});\n\nexport function setButtonContainer(container) {\n\tif (buttonContainer)\n\t\treturn console.error('profile.setButtonContainer can only be called once');\n\tbuttonContainer = container;\n\n\t// return; // Remove this line to enable profile\n\n\twindowLoadPromise.then(() => {\n\t\tprofileButton = new ProfileButton();\n\t\tprofileMenu = new ProfileMenu();\n\n\t\tmount(document.body, profileMenu);\n\t\tmount(buttonContainer, profileButton);\n\n\t\tgetAjax(`/api/profile?userId=${localStorage.openEditPlayUserId}&userToken=${localStorage.openEditPlayUserToken}`).then(user => {\n\t\t\tdelete user.userToken;\n\t\t\tif (user.games)\n\t\t\t\tuser.gameIdList = user.games.map(game => game.id);\n\t\t\twindow.user = user;\n\t\t\tif (promiseResolve)\n\t\t\t\tpromiseResolve(user) && console.log('resolved');\n\t\t\tprofileMenu.gamesCreated.textContent = user.games;\n\t\t});\n\t});\n}\n\nclass ProfileButton {\n\tel: HTMLElement;\n\n\tconstructor() {\n\t\tthis.el = el('img.profileButton', {\n\t\t\tsrc: '/img/profile.png',\n\t\t\tonclick: () => profileMenu.el.classList.toggle('visible')\n\t\t});\n\t}\n\n\tupdate(data) {\n\t}\n}\n\nclass ProfileMenu {\n\tel: HTMLElement;\n\tgamesCreated: HTMLElement;\n\n\tconstructor() {\n\t\tthis.el = el('div.profileMenu',\n\t\t\tel('div.profileMenuContent',\n\t\t\t\tel('div.gamesCreatedBlock',\n\t\t\t\t\t'Welcome to Open Edit Play! Play or Edit a game and profile will be created for you.',\n\t\t\t\t\tel('div'),\n\t\t\t\t\t'Games created: ',\n\t\t\t\t\tthis.gamesCreated = el('span.gamesCreated')\n\t\t\t\t)\n\t\t\t),\n\t\t\t{\n\t\t\t\tonclick: () => profileMenu.el.classList.toggle('visible')\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate(data) {\n\t}\n}\n\n\n/*\nWhat?\n\nremember games that i have created\naccess games that i have created\n\n\n\n\n\n\n\n\n\n */\n","import {dateToAgoFormat, standaloneMobileLinkClickEventSupport} from \"./util\";\nimport {ContextMenu} from \"./contextMenu\";\nimport {el, mount, list, List, RedomComponent} from 'redom';\nimport {profilePromise} from \"./profile\";\n\nconst sizeExplanation = 'Game size in data units. Every object in scene, type, component, level and property is a data unit.';\n\nexport class GameList implements RedomComponent {\n\tel: HTMLElement;\n\tlist: List;\n\tconstructor() {\n\t\tthis.el = el('div.gameListContainer',\n\t\t\tel('table.gameList',\n\t\t\t\tel('thead.gameListHeader',\n\t\t\t\t\tel('th.gameListHeaderName', 'Name'),\n\t\t\t\t\tel('th.gameListHeaderPlay'),\n\t\t\t\t\tel('th.gameListHeaderSize', 'Size', {title: sizeExplanation}),\n\t\t\t\t\tel('th.gameListHeaderLevels', 'Levels'),\n\t\t\t\t\tel('th.gameListHeaderCreated', 'Created'),\n\t\t\t\t\tel('th.gameListHeaderModified', 'Modified')\n\t\t\t\t),\n\t\t\t\tthis.list = list('tbody.gameListContent', Game)\n\t\t\t)\n\t\t);\n\t}\n\n\tupdate(gameListData) {\n\t\tthis.list.update(gameListData);\n\t}\n}\n\nclass Game implements RedomComponent {\n\tel: HTMLElement;\n\tname: HTMLElement;\n\tplay: HTMLElement;\n\tprimaryButton: HTMLElement;\n\tsecondaryButton: HTMLElement;\n\tsize: HTMLElement;\n\tlevels: HTMLElement;\n\tcreated: HTMLElement;\n\tmodified: HTMLElement;\n\n\tgameId: string;\n\tisMyGame: boolean;\n\n\tconstructor() {\n\t\tthis.el = el('tr.gameElement',\n\t\t\tthis.name = el('td.gameElementName'),\n\t\t\tthis.play = el('td.gameElementPlay',\n\t\t\t\tthis.primaryButton = el('a.linkButton', 'Play', {\n\t\t\t\t\tonclick: standaloneMobileLinkClickEventSupport\n\t\t\t\t}),\n\t\t\t\tthis.secondaryButton = el('a.linkButton.hideInSmallScreens.gameElementSecondaryButton', '...', {\n\t\t\t\t\thref: '#',\n\t\t\t\t\tonclick: e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (this.isMyGame)Â {\n\t\t\t\t\t\t\twindow.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tnew ContextMenu(this.secondaryButton, [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'Edit',\n\t\t\t\t\t\t\t\t\tcallback: () => window.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnew ContextMenu(this.secondaryButton, [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'Open editor sandbox',\n\t\t\t\t\t\t\t\t\tcallback: () => window.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t\tthis.size = el('td.gameElementSize', {title: sizeExplanation}),\n\t\t\tthis.levels = el('td.gameElementLevels'),\n\t\t\tthis.created = el('td.gameElementCreated'),\n\t\t\tthis.modified = el('td.gameElementModified')\n\t\t);\n\t}\n\n\tupdate(gameData) {\n\t\tthis.isMyGame = null;\n\t\tthis.gameId = gameData.id;\n\n\t\tthis.name.textContent = gameData.name;\n\t\tthis.size.textContent = gameData.serializableCount;\n\t\tthis.levels.textContent = gameData.levelCount;\n\n\t\tthis.created.textContent = dateToAgoFormat(gameData.createdAt);\n\t\tthis.created.setAttribute('title', new Date(gameData.createdAt).toLocaleString());\n\n\t\tthis.modified.textContent = dateToAgoFormat(gameData.updatedAt);\n\t\tthis.modified.setAttribute('title', new Date(gameData.updatedAt).toLocaleString());\n\n\t\tthis.primaryButton.setAttribute('href', '/play/?gameId=' + gameData.id);\n\n\t\tprofilePromise.then(user => {\n\t\t\tthis.isMyGame = !!(user.gameIdList && user.gameIdList.includes(gameData.id));\n\t\t\tthis.el.classList.toggle('isMyGame', this.isMyGame);\n\n\t\t\t// this.primaryButton.classList.toggle('playButton', !this.isMyGame);\n\t\t\t// this.primaryButton.classList.toggle('editButton', this.isMyGame);\n\n\t\t\tif (this.isMyGame) {\n\t\t\t\tthis.secondaryButton.textContent = 'Edit';\n\t\t\t} else {\n\t\t\t\tthis.secondaryButton.textContent = '...';\n\t\t\t}\n\t\t});\n\t}\n}\n\n","import {getAjax} from \"./util\";\nimport {el, mount, list, text} from 'redom';\nimport {GameList} from \"./gameElement\";\nimport {profilePromise, setButtonContainer} from \"./profile\";\n\nwindow.IS_SMALL_SCREEN = window.screen.width < 800;\nwindow.IS_MOBILE_STANDALONE = window.navigator.standalone;\n\nwindow.addEventListener('load', () => {\n\tif (IS_SMALL_SCREEN)\n\t\tdocument.body.classList.add('isSmallDevice');\n\n\tsetButtonContainer(document.getElementById('profileButtonContainer'));\n\n\tlet gamesElement = document.getElementById('games');\n\tgetAjax('/api/gameListSample').then(gameListData => {\n\t\tlet gameList = new GameList();\n\t\tgameList.update(gameListData);\n\t\tmount(gamesElement, gameList);\n\t}).catch((e) => {\n\t\tmount(gamesElement, text('Could not load'));\n\t});\n\n\tprofilePromise.then(profile => {\n\t\tif (!profile.id || profile.games.length === 0)\n\t\t\treturn;\n\t\tlet myGamesElement = document.getElementById('myGames');\n\t\tmyGamesElement.style.display = 'block';\n\t\tlet myGameList = new GameList();\n\t\tmyGameList.update(profile.games);\n\t\tmount(myGamesElement, myGameList);\n\t});\n\n\tlet topBarBackground = document.getElementById('topBarBackground');\n\n\tif (IS_MOBILE_STANDALONE) {\n\t\t// In standalone mode, just show the top bar always. In iOS, scolling events can't be trusted.\n\t\ttopBarBackground.style.opacity = 1;\n\t} else {\n\t\t// In large devices, do mooth scrolling experience\n\n\t\twindow.onscroll = function () {\n\t\t\t\"use strict\";\n\t\t\tlet scroll = document.documentElement.scrollTop || document.body.scrollTop;\n\n\t\t\tlet point1 = 100;\n\t\t\tlet point2 = 350;\n\t\t\tlet fullOpacity = 1;\n\n\t\t\tif (scroll < point1) {\n\t\t\t\ttopBarBackground.style.opacity = 0;\n\t\t\t} else if (scroll < point2) {\n\t\t\t\ttopBarBackground.style.opacity = (scroll - point1) / (point2 - point1) * fullOpacity;\n\t\t\t} else {\n\t\t\t\ttopBarBackground.style.opacity = fullOpacity;\n\t\t\t}\n\t\t};\n\t\twindow.onscroll();\n\t}\n});\n"],"names":["arguments"],"mappings":";;;;;;kBAAwB,GAAG;KAC1B,OAAO,IAAI,OAAO,CAAC,UAAS,OAAO,EAAE,MAAM;SAC1C,IAAI,KAAK,GAAG,IAAI,cAAc,EAAE,CAAC;SACjC,KAAK,CAAC,kBAAkB,GAAG;aAC1B,IAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE;iBACzB,IAAI,IAAI,CAAC,MAAM,KAAK,GAAG;qBACtB,EAAA,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAA;;qBAEvC,EAAA,MAAM,EAAE,CAAC,EAAA;cACV;UACD,CAAC;SACF,KAAK,CAAC,IAAI,CAAC,KAAK,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;SAC7B,KAAK,CAAC,IAAI,EAAE,CAAC;MACb,CAAC,CAAC;EACH;AAED,gDAAsD,CAAC;KACtD,IAAI,MAAM,CAAC,SAAS,CAAC,UAAU,EAAE;SAChC,CAAC,CAAC,cAAc,EAAE,CAAC;SACnB,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;SACxC,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC;MAC3B;EACD;;AAGD,0BAAgC,IAAI;KACnC,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;KAEtB,IAAI,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;KACrB,IAAI,WAAW,GAAG,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,CAAC;KACtC,IAAI,WAAW,GAAG,EAAE,EAAE;SACrB,OAAO,KAAK,CAAC;MACb;UAAM,IAAI,WAAW,GAAG,EAAE,EAAE;SAC5B,OAAO,sBAAsB,CAAC;MAC9B;KAED,IAAI,WAAW,GAAG,WAAW,GAAG,EAAE,CAAC;KAEnC,IAAI,WAAW,GAAG,CAAC,EAAE;SACpB,OAAO,YAAY,CAAC;MACpB;UAAM,IAAI,WAAW,GAAG,EAAE,EAAE;SAC5B,OAAO,CAAG,WAAW,GAAG,CAAC,kBAAc,CAAC;MACxC;KAED,IAAI,SAAS,GAAG,WAAW,GAAG,EAAE,CAAC;KAEjC,IAAI,SAAS,GAAG,CAAC,EAAE;SAClB,OAAO,UAAU,CAAC;MAClB;UAAM,IAAI,SAAS,GAAG,EAAE,EAAE;SAC1B,OAAO,CAAG,SAAS,GAAG,CAAC,gBAAY,CAAC;MACpC;KAED,IAAI,QAAQ,GAAG,SAAS,GAAG,EAAE,CAAC;KAE9B,IAAI,QAAQ,GAAG,CAAC,EAAE;SACjB,OAAO,SAAS,CAAC;MACjB;UAAM,IAAI,QAAQ,GAAG,CAAC,EAAE;SACxB,OAAO,CAAG,QAAQ,GAAG,CAAC,eAAW,CAAC;MAClC;KAED,IAAI,SAAS,GAAG,QAAQ,GAAG,CAAC,CAAC;KAE7B,IAAI,SAAS,GAAG,CAAC,EAAE;SAClB,OAAO,UAAU,CAAC;MAClB;UAAM,IAAI,SAAS,GAAG,CAAC,EAAE;SACzB,OAAO,CAAG,QAAQ,GAAG,CAAC,gBAAY,CAAC;MACnC;KAED,IAAI,UAAU,GAAG,QAAQ,GAAG,EAAE,CAAC;KAE/B,IAAI,UAAU,GAAG,CAAC,EAAE;SACnB,OAAO,WAAW,CAAC;MACnB;UAAM,IAAI,UAAU,GAAG,EAAE,EAAE;SAC3B,OAAO,CAAG,UAAU,GAAG,CAAC,iBAAa,CAAC;MACtC;KAED,IAAI,SAAS,GAAG,QAAQ,GAAG,GAAG,CAAC;KAE/B,IAAI,SAAS,GAAG,CAAC,EAAE;SAClB,OAAO,UAAU,CAAC;MAClB;UAAM;SACN,OAAO,CAAG,SAAS,GAAG,CAAC,gBAAY,CAAC;MACpC;EACD;;CCnFD,IAAI,IAAI,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;CAC7B,IAAI,GAAG,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;;CAE5B,IAAI,QAAQ,GAAG,CAAC,CAAC;CACjB,IAAI,EAAE,GAAG,CAAC,CAAC;CACX,IAAI,UAAU,GAAG,CAAC,CAAC;;CAEnB,IAAI,UAAU,GAAG,UAAU,KAAK,EAAE;GAChC,IAAI,GAAG,GAAG,IAAI,CAAC;GACf,IAAI,EAAE,GAAG,IAAI,CAAC;GACd,IAAI,SAAS,GAAG,IAAI,CAAC;GACrB,IAAI,IAAI,GAAG,QAAQ,CAAC;GACpB,IAAI,MAAM,GAAG,CAAC,CAAC;;GAEf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACtC,IAAI,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;KAC/B,IAAI,MAAM,GAAG,IAAI,KAAK,IAAI,CAAC;KAC3B,IAAI,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC;KACzB,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC;;KAElB,IAAI,MAAM,IAAI,KAAK,IAAI,KAAK,EAAE;OAC5B,IAAI,IAAI,KAAK,QAAQ,EAAE;SACrB,IAAI,CAAC,KAAK,CAAC,EAAE;WACX,GAAG,GAAG,KAAK,CAAC;UACb,MAAM;WACL,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;UAClC;QACF,MAAM,IAAI,IAAI,KAAK,EAAE,EAAE;SACtB,EAAE,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;QACjC,MAAM;SACL,IAAI,SAAS,EAAE;WACb,SAAS,IAAI,GAAG,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;UAC/C,MAAM;WACL,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;UACxC;QACF;;OAED,IAAI,MAAM,EAAE;SACV,IAAI,GAAG,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,EAAE;SAChB,IAAI,GAAG,UAAU,CAAC;QACnB;;OAED,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;MAChB;IACF;;GAED,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC;EACnD,CAAC;;CAEF,IAAI,aAAa,GAAG,UAAU,KAAK,EAAE,EAAE,EAAE;GACvC,IAAI,GAAG,GAAG,UAAU,CAAC,KAAK,CAAC,CAAC;GAC5B,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;GAClB,IAAI,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC;GAChB,IAAI,SAAS,GAAG,GAAG,CAAC,SAAS,CAAC;GAC9B,IAAI,OAAO,GAAG,EAAE,GAAG,QAAQ,CAAC,eAAe,CAAC,EAAE,EAAE,GAAG,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;;GAEnF,IAAI,EAAE,EAAE;KACN,OAAO,CAAC,EAAE,GAAG,EAAE,CAAC;IACjB;;GAED,IAAI,SAAS,EAAE;KACb,IAAI,EAAE,EAAE;OACN,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;MAC1C,MAAM;OACL,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;MAC/B;IACF;;GAED,OAAO,OAAO,CAAC;EAChB,CAAC;;CAEF,IAAI,OAAO,GAAG,UAAU,MAAM,EAAE,KAAK,EAAE;GACrC,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;GAC7B,IAAI,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;;GAE3B,IAAI,KAAK,KAAK,OAAO,IAAI,OAAO,CAAC,YAAY,EAAE;;KAE7C,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC;IAC9B;;GAED,IAAI,OAAO,CAAC,UAAU,EAAE;KACtB,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;;KAEpC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC/B;;GAED,OAAO,KAAK,CAAC;EACd,CAAC;;CAEF,IAAI,SAAS,GAAG,UAAU,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE;GAClD,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,CAAC;;GAEtC,IAAI,aAAa,CAAC,KAAK,CAAC,EAAE;KACxB,OAAO,CAAC,eAAe,GAAG,KAAK,CAAC;KAChC,OAAO;IACR;;GAED,IAAI,QAAQ,GAAG,QAAQ,CAAC;;GAExB,IAAI,OAAO,CAAC,eAAe,EAAE;KAC3B,OAAO,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;IAC/B;;GAED,OAAO,QAAQ,EAAE;KACf,IAAI,WAAW,GAAG,QAAQ,CAAC,iBAAiB,IAAI,EAAE,CAAC;;KAEnD,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;OACtB,IAAI,WAAW,CAAC,IAAI,CAAC,EAAE;SACrB,WAAW,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;QAClC;MACF;;KAED,IAAI,aAAa,CAAC,WAAW,CAAC,EAAE;OAC9B,QAAQ,CAAC,iBAAiB,GAAG,IAAI,CAAC;MACnC;;KAED,QAAQ,GAAG,QAAQ,CAAC,UAAU,CAAC;IAChC;EACF,CAAC;;CAEF,IAAI,aAAa,GAAG,UAAU,KAAK,EAAE;GACnC,IAAI,KAAK,IAAI,IAAI,EAAE;KACjB,OAAO,IAAI,CAAC;IACb;GACD,KAAK,IAAI,GAAG,IAAI,KAAK,EAAE;KACrB,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE;OACd,OAAO,KAAK,CAAC;MACd;IACF;GACD,OAAO,IAAI,CAAC;EACb,CAAC;;CAEF,IAAI,SAAS,GAAG,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;CACzC,IAAI,mBAAmB,GAAG,OAAO,MAAM,KAAK,WAAW,IAAI,YAAY,IAAI,MAAM,CAAC;;CAElF,IAAI,KAAK,GAAG,UAAU,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE;GAC3C,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;GAC7B,IAAI,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;;GAE3B,IAAI,KAAK,KAAK,OAAO,IAAI,OAAO,CAAC,YAAY,EAAE;;KAE7C,KAAK,GAAG,OAAO,CAAC,YAAY,CAAC;IAC9B;;GAED,IAAI,KAAK,KAAK,OAAO,EAAE;KACrB,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC;IAC9B;;GAED,IAAI,UAAU,GAAG,OAAO,CAAC,eAAe,CAAC;GACzC,IAAI,SAAS,GAAG,OAAO,CAAC,UAAU,CAAC;;GAEnC,IAAI,UAAU,KAAK,SAAS,KAAK,QAAQ,CAAC,EAAE;KAC1C,SAAS,CAAC,KAAK,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;IACtC;;GAED,IAAI,MAAM,IAAI,IAAI,EAAE;KAClB,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAC/C,MAAM;KACL,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;IAC/B;;GAED,OAAO,CAAC,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAC;;GAE7C,OAAO,KAAK,CAAC;EACd,CAAC;;CAEF,IAAI,OAAO,GAAG,UAAU,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE;GAC3D,IAAI,KAAK,GAAG,OAAO,CAAC,iBAAiB,KAAK,OAAO,CAAC,iBAAiB,GAAG,EAAE,CAAC,CAAC;GAC1E,IAAI,OAAO,IAAI,QAAQ,KAAK,SAAS,CAAC,CAAC;GACvC,IAAI,UAAU,GAAG,KAAK,CAAC;;GAEvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACzC,IAAI,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;;KAE5B,IAAI,CAAC,OAAO,KAAK,KAAK,KAAK,OAAO,CAAC,KAAK,QAAQ,IAAI,KAAK,CAAC,EAAE;OAC1D,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;MAC9C;KACD,IAAI,KAAK,CAAC,QAAQ,CAAC,EAAE;OACnB,UAAU,GAAG,IAAI,CAAC;MACnB;IACF;;GAED,IAAI,CAAC,UAAU,EAAE;KACf,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;KAC/B,OAAO;IACR;;GAED,IAAI,QAAQ,GAAG,QAAQ,CAAC;GACxB,IAAI,SAAS,GAAG,KAAK,CAAC;;GAEtB,IAAI,OAAO,KAAK,CAAC,SAAS,KAAK,QAAQ,IAAI,QAAQ,CAAC,eAAe,CAAC,CAAC,EAAE;KACrE,OAAO,CAAC,OAAO,EAAE,OAAO,GAAG,WAAW,GAAG,SAAS,CAAC,CAAC;KACpD,SAAS,GAAG,IAAI,CAAC;IAClB;;GAED,IAAI,OAAO,EAAE;KACX,OAAO;IACR;;GAED,OAAO,QAAQ,EAAE;KACf,IAAI,MAAM,GAAG,QAAQ,CAAC,UAAU,CAAC;KACjC,IAAI,WAAW,GAAG,QAAQ,CAAC,iBAAiB,KAAK,QAAQ,CAAC,iBAAiB,GAAG,EAAE,CAAC,CAAC;;KAElF,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;OACtB,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC;MAC5D;;KAED,IAAI,CAAC,SAAS,KAAK,QAAQ,KAAK,QAAQ,KAAK,mBAAmB,KAAK,QAAQ,YAAY,MAAM,CAAC,UAAU,CAAC,CAAC,KAAK,MAAM,IAAI,MAAM,CAAC,eAAe,CAAC,CAAC,EAAE;OACnJ,OAAO,CAAC,QAAQ,EAAE,OAAO,GAAG,WAAW,GAAG,SAAS,CAAC,CAAC;OACrD,SAAS,GAAG,IAAI,CAAC;MAClB;;KAED,QAAQ,GAAG,MAAM,CAAC;IACnB;EACF,CAAC;;CAEF,IAAI,OAAO,GAAG,UAAU,EAAE,EAAE,SAAS,EAAE;GACrC,IAAI,SAAS,KAAK,SAAS,EAAE;KAC3B,EAAE,CAAC,eAAe,GAAG,IAAI,CAAC;IAC3B,MAAM,IAAI,SAAS,KAAK,WAAW,EAAE;KACpC,EAAE,CAAC,eAAe,GAAG,KAAK,CAAC;IAC5B;;GAED,IAAI,KAAK,GAAG,EAAE,CAAC,iBAAiB,CAAC;;GAEjC,IAAI,CAAC,KAAK,EAAE;KACV,OAAO;IACR;;GAED,IAAI,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC;GAC3B,IAAI,SAAS,GAAG,CAAC,CAAC;;GAElB,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC;;GAQ7C,IAAI,SAAS,EAAE;KACb,IAAI,QAAQ,GAAG,EAAE,CAAC,UAAU,CAAC;;KAE7B,OAAO,QAAQ,EAAE;OACf,IAAI,IAAI,GAAG,QAAQ,CAAC,WAAW,CAAC;;OAEhC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;;OAE7B,QAAQ,GAAG,IAAI,CAAC;MACjB;IACF;EACF,CAAC;;CAEF,IAAI,QAAQ,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;GACzC,IAAI,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;;GAErB,IAAI,IAAI,KAAK,SAAS,EAAE;KACtB,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;IACvB,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE;KACzB,EAAE,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAChC,MAAM;KACL,KAAK,IAAI,GAAG,IAAI,IAAI,EAAE;OACpB,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;MAC9B;IACF;EACF,CAAC;;;;CAIF,IAAI,OAAO,GAAG,8BAA8B,CAAC;;CAE7C,IAAI,OAAO,GAAG,UAAU,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE;GACxC,IAAI,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;GACrB,IAAI,KAAK,GAAG,EAAE,YAAY,UAAU,CAAC;;GAErC,IAAI,IAAI,KAAK,SAAS,EAAE;KACtB,IAAI,IAAI,KAAK,OAAO,EAAE;OACpB,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;MACpB,MAAM,IAAI,KAAK,IAAI,UAAU,CAAC,IAAI,CAAC,EAAE;OACpC,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;MACjB,MAAM,IAAI,IAAI,KAAK,SAAS,EAAE;OAC7B,OAAO,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;MACnB,MAAM,IAAI,CAAC,KAAK,KAAK,IAAI,IAAI,EAAE,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC,EAAE;OACrD,EAAE,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;MACjB,MAAM;OACL,IAAI,KAAK,KAAK,IAAI,KAAK,OAAO,CAAC,EAAE;SAC/B,QAAQ,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;SACnB,OAAO;QACR;OACD,EAAE,CAAC,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;MAC7B;IACF,MAAM;KACL,KAAK,IAAI,GAAG,IAAI,IAAI,EAAE;OACpB,OAAO,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;MAC7B;IACF;EACF,CAAC;;CAEF,SAAS,QAAQ,EAAE,EAAE,EAAE,GAAG,EAAE;GAC1B,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;KACnB,EAAE,CAAC,cAAc,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3C;EACF;;CAED,SAAS,OAAO,EAAE,EAAE,EAAE,GAAG,EAAE;GACzB,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;KACnB,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;IAC5B;EACF;;CAED,IAAI,IAAI,GAAG,UAAU,GAAG,EAAE,EAAE,OAAO,QAAQ,CAAC,cAAc,CAAC,CAAC,GAAG,IAAI,IAAI,IAAI,GAAG,GAAG,EAAE,CAAC,CAAC,EAAE,CAAC;;CAExF,IAAI,cAAc,GAAG,UAAU,OAAO,EAAE,IAAI,EAAE;GAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACpC,IAAI,GAAG,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;KAElB,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,EAAE;OACrB,SAAS;MACV;;;KAGD,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;OAC7B,GAAG,CAAC,OAAO,CAAC,CAAC;MACd,MAAM,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;OACzC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;MAChC,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE;OAC7B,KAAK,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;MACrB,MAAM,IAAI,GAAG,CAAC,MAAM,EAAE;OACrB,cAAc,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;MAC9B,MAAM,IAAI,OAAO,GAAG,KAAK,QAAQ,EAAE;OAClC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;MACvB;IACF;EACF,CAAC;;CAEF,IAAI,QAAQ,GAAG,UAAU,MAAM,EAAE,EAAE,OAAO,QAAQ,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC;CAC7F,IAAI,KAAK,GAAG,UAAU,MAAM,EAAE,EAAE,OAAO,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,MAAM,CAAC,MAAM,CAAC,EAAE,IAAI,MAAM,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;;CAEpH,IAAI,QAAQ,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC,EAAE,CAAC;CAC9D,IAAI,QAAQ,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC,EAAE,CAAC;CAC9D,IAAI,UAAU,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,OAAO,CAAC,KAAK,UAAU,CAAC,EAAE,CAAC;;CAElE,IAAI,MAAM,GAAG,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC;;CAEtD,IAAI,SAAS,GAAG,EAAE,CAAC;;CAEnB,IAAI,WAAW,GAAG,UAAU,KAAK,EAAE,EAAE,OAAO,SAAS,CAAC,KAAK,CAAC,KAAK,SAAS,CAAC,KAAK,CAAC,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;;CAE7G,IAAI,IAAI,GAAG,UAAU,KAAK,EAAE;;;GAC1B,IAAI,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;GAC1C,QAAQ,GAAG,EAAE,GAAG,CAAC,GAAG,EAAA,IAAI,EAAE,GAAG,EAAE,GAAGA,WAAS,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,EAAA;;GAEvD,IAAI,OAAO,CAAC;;GAEZ,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;KACnB,OAAO,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC/C,MAAM,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;KACxB,OAAO,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAClC,MAAM;KACL,MAAM,IAAI,KAAK,CAAC,gCAAgC,CAAC,CAAC;IACnD;;GAED,cAAc,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;;GAE9B,OAAO,OAAO,CAAC;EAChB,CAAC;;CAEF,IAAI,CAAC,MAAM,GAAG,UAAU,KAAK,EAAE;;;GAC7B,IAAI,IAAI,GAAG,EAAE,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;GAC1C,QAAQ,GAAG,EAAE,GAAG,CAAC,GAAG,EAAA,IAAI,EAAE,GAAG,EAAE,GAAGA,WAAS,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,EAAA;;GAEvD,IAAI,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;;GAE/B,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;EAC9D,CAAC;;CAEF,IAAI,EAAE,GAAG,IAAI,CAAC;AACd;CAEA,IAAI,WAAW,GAAG,UAAU,MAAM,EAAE;;;GAClC,IAAI,QAAQ,GAAG,EAAE,EAAE,GAAG,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;GAC9C,QAAQ,GAAG,EAAE,GAAG,CAAC,GAAG,EAAA,QAAQ,EAAE,GAAG,EAAE,GAAGA,WAAS,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,EAAA;;GAE3D,IAAI,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;GAC7B,IAAI,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,QAAQ,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC;;GAE9D,OAAO,OAAO,EAAE;KACd,IAAI,IAAI,GAAG,OAAO,CAAC,WAAW,CAAC;;KAE/B,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;;KAEzB,OAAO,GAAG,IAAI,CAAC;IAChB;EACF,CAAC;;CAEF,SAAS,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE;GAC7C,IAAI,OAAO,GAAG,QAAQ,CAAC;;GAEvB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACxC,IAAI,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;;KAExB,IAAI,CAAC,KAAK,EAAE;OACV,SAAS;MACV;;KAED,IAAI,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;;KAE3B,IAAI,OAAO,KAAK,OAAO,EAAE;OACvB,OAAO,GAAG,OAAO,CAAC,WAAW,CAAC;OAC9B,SAAS;MACV;;KAED,IAAI,MAAM,CAAC,OAAO,CAAC,EAAE;OACnB,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;OAC9B,SAAS;MACV;;KAED,IAAI,KAAK,CAAC,MAAM,IAAI,IAAI,EAAE;OACxB,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;MAC5C;IACF;;GAED,OAAO,OAAO,CAAC;EAChB;;CAED,IAAI,OAAO,GAAG,UAAU,GAAG,EAAE,EAAE,OAAO,UAAU,IAAI,EAAE,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;;CAM/E,IAAI,QAAQ,GAAG,SAAS,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE;GACrD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;GACzB,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;GACpB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;GACjB,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;GACnB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;;GAEhB,IAAI,GAAG,IAAI,IAAI,EAAE;KACf,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;KACjB,IAAI,CAAC,GAAG,GAAG,UAAU,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;IACjD;EACF,CAAC;CACF,QAAQ,CAAC,SAAS,CAAC,MAAM,GAAG,SAAS,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE;GAC1D,IAAI,GAAG,GAAG,IAAI,CAAC;KACb,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;KACpB,IAAI,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;KAClB,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;GAC9B,IAAI,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC;;GAEzB,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;GAC5B,IAAI,SAAS,GAAG,EAAE,CAAC;;GAEnB,IAAI,QAAQ,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;GACtC,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;;GAE1B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;KACpC,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;KACnB,IAAI,IAAI,IAAI,KAAK,CAAC,CAAC,CAAC;;KAEpB,IAAI,MAAM,EAAE;OACV,IAAI,EAAE,GAAG,GAAG,CAAC,IAAI,CAAC,CAAC;OACnB,IAAI,GAAG,SAAS,CAAC,EAAE,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;OAC1D,SAAS,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;OACrB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;MACtB,MAAM;OACL,IAAI,GAAG,QAAQ,CAAC,CAAC,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;MACzD;KACD,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;;KAEnD,IAAI,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;KACxB,EAAE,CAAC,YAAY,GAAG,IAAI,CAAC;KACvB,QAAQ,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IACpB;;GAED,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;GACzB,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;;GAEtB,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;GAC3B,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;EACzB,CAAC;;CAEF,IAAI,IAAI,GAAG,UAAU,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE;GAChD,OAAO,IAAI,IAAI,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;EAC9C,CAAC;;CAEF,IAAI,IAAI,GAAG,SAAS,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE;GACrD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;GACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;GACzB,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;GAChB,IAAI,CAAC,IAAI,GAAG,IAAI,QAAQ,CAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;GAC9C,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC;GAC3B,IAAI,CAAC,MAAM,GAAG,GAAG,IAAI,IAAI,CAAC;EAC3B,CAAC;CACF,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,SAAS,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE;KACpD,IAAI,MAAM,GAAG,IAAI,CAAC;KAClB,KAAK,IAAI,KAAK,KAAK,CAAC,GAAG,EAAA,IAAI,GAAG,EAAE,CAAC,EAAA;;GAEnC,IAAI,GAAG,GAAG,IAAI,CAAC;KACb,IAAI,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC;GAC1B,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC;GAC1B,IAAI,SAAS,GAAG,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC;;GAEtC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;GAChC,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;KACpB,IAAI,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;KACxB,IAAI,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;;GAE5B,IAAI,MAAM,EAAE;KACV,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;OACxC,IAAI,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;OAChC,IAAI,EAAE,EAAE,IAAI,MAAM,CAAC,EAAE;SACnB,OAAO,CAAC,MAAM,EAAE,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;QAChC;MACF;IACF;;GAED,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;GAEzB,IAAI,MAAM,EAAE;KACV,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACtB;GACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;EACpB,CAAC;;CAEF,IAAI,CAAC,MAAM,GAAG,UAAU,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE;GACnD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;EACrD,CAAC;;CAEF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;;;CChhB1B;KAIC,qBAAY,cAAc,EAAE,KAAK;SAAjC,iBAoBC;SAnBA,IAAI,aAAa,GAAG,cAAc,CAAC,qBAAqB,EAAE,CAAC;SAG3D,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,iBAAiB,EAAE;aAC/B,KAAK,EAAE;iBACN,GAAG,EAAE,CAAC,aAAa,CAAC,MAAM,GAAG,MAAM,CAAC,WAAW,IAAI,IAAI;iBACvD,IAAI,EAAE,aAAa,CAAC,IAAI,GAAG,IAAI;cAC/B;UACD,CAAC,CAAC;SACH,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,eAAe,CAAC,CAAC;SAC3C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;SAExB,UAAU,CAAC;aACV,KAAI,CAAC,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE;iBACrD,KAAI,CAAC,MAAM,EAAE,CAAC;cACd,CAAC,CAAC;UACH,EAAE,CAAC,CAAC,CAAC;SAEN,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;MAC9B;KAED,4BAAM,GAAN;SACC,IAAI,IAAI,CAAC,aAAa;aACrB,EAAA,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,EAAA;SAEzD,IAAI,IAAI,CAAC,EAAE,CAAC,UAAU;aACrB,EAAA,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAA;MACzC;KACF,kBAAC;EAAA,IAAA;CAED;KAIC;SAAA,iBAQC;SAPA,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,qBAAqB,EACjC;aACC,OAAO,EAAE,cAAM,OAAA,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,QAAQ,EAAE,GAAA;UAC/C,CACD,CAAC;SAEF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;MACrB;KAED,gCAAM,GAAN,UAAO,IAAI;SACV,IAAI,CAAC,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;SACjC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;MAC9B;KACF,sBAAC;EAAA,IAAA;;CCpDD,IAAI,aAAa,GAAG,IAAI,CAAC;CACzB,IAAI,WAAW,GAAG,IAAI,CAAC;CACvB,IAAI,eAAe,GAAG,IAAI,CAAC;CAE3B,IAAI,iBAAiB,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,IAAK,OAAA,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC,GAAA,CAAC,CAAC;CAEnG,IAAI,cAAc,GAAG,IAAI,CAAC;AAC1B,CAAO,IAAI,cAAc,GAAG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;KACvD,cAAc,GAAG,OAAO,CAAC;EACzB,CAAC,CAAC;AAEH,6BAAmC,SAAS;KAC3C,IAAI,eAAe;SAClB,EAAA,OAAO,OAAO,CAAC,KAAK,CAAC,oDAAoD,CAAC,CAAC,EAAA;KAC5E,eAAe,GAAG,SAAS,CAAC;;KAI5B,iBAAiB,CAAC,IAAI,CAAC;SACtB,aAAa,GAAG,IAAI,aAAa,EAAE,CAAC;SACpC,WAAW,GAAG,IAAI,WAAW,EAAE,CAAC;SAEhC,KAAK,CAAC,QAAQ,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;SAClC,KAAK,CAAC,eAAe,EAAE,aAAa,CAAC,CAAC;SAEtC,OAAO,CAAC,yBAAuB,YAAY,CAAC,kBAAkB,mBAAc,YAAY,CAAC,qBAAuB,CAAC,CAAC,IAAI,CAAC,UAAA,IAAI;aAC1H,OAAO,IAAI,CAAC,SAAS,CAAC;aACtB,IAAI,IAAI,CAAC,KAAK;iBACb,EAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI,IAAI,OAAA,IAAI,CAAC,EAAE,GAAA,CAAC,CAAC,EAAA;aACnD,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;aACnB,IAAI,cAAc;iBACjB,EAAA,cAAc,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,EAAA;aACjD,WAAW,CAAC,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC;UAClD,CAAC,CAAC;MACH,CAAC,CAAC;EACH;CAED;KAGC;SACC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,mBAAmB,EAAE;aACjC,GAAG,EAAE,kBAAkB;aACvB,OAAO,EAAE,cAAM,OAAA,WAAW,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAA;UACzD,CAAC,CAAC;MACH;KAED,8BAAM,GAAN,UAAO,IAAI;MACV;KACF,oBAAC;EAAA,IAAA;CAED;KAIC;SACC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,iBAAiB,EAC7B,EAAE,CAAC,wBAAwB,EAC1B,EAAE,CAAC,uBAAuB,EACzB,qFAAqF,EACrF,EAAE,CAAC,KAAK,CAAC,EACT,iBAAiB,EACjB,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC,mBAAmB,CAAC,CAC3C,CACD,EACD;aACC,OAAO,EAAE,cAAM,OAAA,WAAW,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAA;UACzD,CACD,CAAC;MACF;KAED,4BAAM,GAAN,UAAO,IAAI;MACV;KACF,kBAAC;EAAA,IAAA;;;;;;;;;;;;;;;;;CCzED,IAAM,eAAe,GAAG,qGAAqG,CAAC;CAE9H;KAGC;SACC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,uBAAuB,EACnC,EAAE,CAAC,gBAAgB,EAClB,EAAE,CAAC,sBAAsB,EACxB,EAAE,CAAC,uBAAuB,EAAE,MAAM,CAAC,EACnC,EAAE,CAAC,uBAAuB,CAAC,EAC3B,EAAE,CAAC,uBAAuB,EAAE,MAAM,EAAE,EAAC,KAAK,EAAE,eAAe,EAAC,CAAC,EAC7D,EAAE,CAAC,yBAAyB,EAAE,QAAQ,CAAC,EACvC,EAAE,CAAC,0BAA0B,EAAE,SAAS,CAAC,EACzC,EAAE,CAAC,2BAA2B,EAAE,UAAU,CAAC,CAC3C,EACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAC/C,CACD,CAAC;MACF;KAED,yBAAM,GAAN,UAAO,YAAY;SAClB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;MAC/B;KACF,eAAC;EAAA,IAAA;CAED;KAcC;SAAA,iBAqCC;SApCA,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,gBAAgB,EAC5B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,oBAAoB,CAAC,EACpC,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,oBAAoB,EAClC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,cAAc,EAAE,MAAM,EAAE;aAC/C,OAAO,EAAE,qCAAqC;UAC9C,CAAC,EACF,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC,4DAA4D,EAAE,KAAK,EAAE;aAC9F,IAAI,EAAE,GAAG;aACT,OAAO,EAAE,UAAA,CAAC;iBACT,CAAC,CAAC,cAAc,EAAE,CAAC;iBACnB,IAAI,KAAI,CAAC,QAAQ,EAAE;qBAClB,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,gBAAgB,GAAG,KAAI,CAAC,MAAM,CAAA;;;;;;;;;kBASrD;sBAAM;qBACN,IAAI,WAAW,CAAC,KAAI,CAAC,eAAe,EAAE;yBACrC;6BACC,KAAK,EAAE,qBAAqB;6BAC5B,QAAQ,EAAE,cAAM,OAAA,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,gBAAgB,GAAG,KAAI,CAAC,MAAM,GAAA;0BACrE;sBACD,CAAC,CAAC;kBACH;cACD;UACD,CAAC,CACF,EACD,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC,oBAAoB,EAAE,EAAC,KAAK,EAAE,eAAe,EAAC,CAAC,EAC9D,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,sBAAsB,CAAC,EACxC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,uBAAuB,CAAC,EAC1C,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC,wBAAwB,CAAC,CAC5C,CAAC;MACF;KAED,qBAAM,GAAN,UAAO,QAAQ;SAAf,iBA6BC;SA5BA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;SACrB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,EAAE,CAAC;SAE1B,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,IAAI,CAAC;SACtC,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,iBAAiB,CAAC;SACnD,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAU,CAAC;SAE9C,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;SAC/D,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC;SAElF,IAAI,CAAC,QAAQ,CAAC,WAAW,GAAG,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;SAChE,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,cAAc,EAAE,CAAC,CAAC;SAEnF,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,EAAE,gBAAgB,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;SAExE,cAAc,CAAC,IAAI,CAAC,UAAA,IAAI;aACvB,KAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;aAC7E,KAAI,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,UAAU,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC;;;aAKpD,IAAI,KAAI,CAAC,QAAQ,EAAE;iBAClB,KAAI,CAAC,eAAe,CAAC,WAAW,GAAG,MAAM,CAAC;cAC1C;kBAAM;iBACN,KAAI,CAAC,eAAe,CAAC,WAAW,GAAG,KAAK,CAAC;cACzC;UACD,CAAC,CAAC;MACH;KACF,WAAC;EAAA,IAAA;;CC7GD,MAAM,CAAC,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC;CACnD,MAAM,CAAC,oBAAoB,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC;CAE1D,MAAM,CAAC,gBAAgB,CAAC,MAAM,EAAE;KAC/B,IAAI,eAAe;SAClB,EAAA,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,EAAA;KAE9C,kBAAkB,CAAC,QAAQ,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC;KAEtE,IAAI,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;KACpD,OAAO,CAAC,qBAAqB,CAAC,CAAC,IAAI,CAAC,UAAA,YAAY;SAC/C,IAAI,QAAQ,GAAG,IAAI,QAAQ,EAAE,CAAC;SAC9B,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;SAC9B,KAAK,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;MAC9B,CAAC,CAAC,KAAK,CAAC,UAAC,CAAC;SACV,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;MAC5C,CAAC,CAAC;KAEH,cAAc,CAAC,IAAI,CAAC,UAAA,OAAO;SAC1B,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC;aAC5C,EAAA,OAAO,EAAA;SACR,IAAI,cAAc,GAAG,QAAQ,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;SACxD,cAAc,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;SACvC,IAAI,UAAU,GAAG,IAAI,QAAQ,EAAE,CAAC;SAChC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACjC,KAAK,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;MAClC,CAAC,CAAC;KAEH,IAAI,gBAAgB,GAAG,QAAQ,CAAC,cAAc,CAAC,kBAAkB,CAAC,CAAC;KAEnE,IAAI,oBAAoB,EAAE;;SAEzB,gBAAgB,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;MACnC;UAAM;;SAGN,MAAM,CAAC,QAAQ,GAAG;aAEjB,IAAI,MAAM,GAAG,QAAQ,CAAC,eAAe,CAAC,SAAS,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;aAE3E,IAAI,MAAM,GAAG,GAAG,CAAC;aACjB,IAAI,MAAM,GAAG,GAAG,CAAC;aACjB,IAAI,WAAW,GAAG,CAAC,CAAC;aAEpB,IAAI,MAAM,GAAG,MAAM,EAAE;iBACpB,gBAAgB,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;cACnC;kBAAM,IAAI,MAAM,GAAG,MAAM,EAAE;iBAC3B,gBAAgB,CAAC,KAAK,CAAC,OAAO,GAAG,CAAC,MAAM,GAAG,MAAM,KAAK,MAAM,GAAG,MAAM,CAAC,GAAG,WAAW,CAAC;cACrF;kBAAM;iBACN,gBAAgB,CAAC,KAAK,CAAC,OAAO,GAAG,WAAW,CAAC;cAC7C;UACD,CAAC;SACF,MAAM,CAAC,QAAQ,EAAE,CAAC;MAClB;EACD,CAAC,CAAC;;;;"}