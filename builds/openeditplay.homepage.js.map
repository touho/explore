{"version":3,"file":null,"sources":["../src/homepage/util.ts","../node_modules/redom/dist/redom.es.js","../src/homepage/contextMenu.ts","../src/homepage/profile.ts","../src/homepage/gameElement.ts","../src/homepage/main.ts"],"sourcesContent":["export function getAjax(url) {\n\treturn new Promise(function(resolve, reject) {\n\t\tlet xhttp = new XMLHttpRequest();\n\t\txhttp.onreadystatechange = function() {\n\t\t\tif (this.readyState == 4) {\n\t\t\t\tif (this.status === 200)\n\t\t\t\t\tresolve(JSON.parse(this.responseText));\n\t\t\t\telse\n\t\t\t\t\treject();\n\t\t\t}\n\t\t};\n\t\txhttp.open(\"GET\", url, true);\n\t\txhttp.send();\n\t});\n}\n\nexport function standaloneMobileLinkClickEventSupport(e)Â {\n\tif (window.navigator.standalone) {\n\t\te.preventDefault();\n\t\tlet url = e.target.getAttribute('href');\n\t\twindow.location.href = url;\n\t}\n}\n\n// 2016-01-01 -> 3 years ago\nexport function dateToAgoFormat(date) {\n\tdate = new Date(date);\n\t\n\tlet now = new Date();\n\tlet diffSeconds = (now - date) / 1000;\n\tif (diffSeconds < 10) {\n\t\treturn 'now';\n\t} else if (diffSeconds < 60) {\n\t\treturn 'less than minute ago';\n\t}\n\t\n\tlet diffMinutes = diffSeconds / 60;\n\t\n\tif (diffMinutes < 2) {\n\t\treturn 'minute ago';\n\t} else if (diffMinutes < 60) {\n\t\treturn `${diffMinutes | 0} minutes ago`;\n\t}\n\n\tlet diffHours = diffMinutes / 60;\n\n\tif (diffHours < 2) {\n\t\treturn 'hour ago';\n\t} else if (diffHours < 24) {\n\t\treturn `${diffHours | 0} hours ago`;\n\t}\n\n\tlet diffDays = diffHours / 60;\n\n\tif (diffDays < 2) {\n\t\treturn 'day ago';\n\t} else if (diffDays < 7) {\n\t\treturn `${diffDays | 0} days ago`;\n\t}\n\t\n\tlet diffWeeks = diffDays / 7;\n\t\n\tif (diffWeeks < 2) {\n\t\treturn 'week ago';\n\t} else if (diffWeeks < 4) {\n\t\treturn `${diffDays | 0} weeks ago`;\n\t}\n\n\tlet diffMonths = diffDays / 30;\n\n\tif (diffMonths < 2) {\n\t\treturn 'month ago';\n\t} else if (diffMonths < 12) {\n\t\treturn `${diffMonths | 0} months ago`;\n\t}\n\n\tlet diffYears = diffDays / 365;\n\n\tif (diffYears < 2) {\n\t\treturn 'year ago';\n\t} else {\n\t\treturn `${diffYears | 0} years ago`;\n\t}\n}\n","var HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nvar TAG_NAME = 0;\nvar ID = 1;\nvar CLASS_NAME = 2;\n\nvar parseQuery = function (query) {\n  var tag = null;\n  var id = null;\n  var className = null;\n  var mode = TAG_NAME;\n  var offset = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n    var isHash = char === HASH;\n    var isDot = char === DOT;\n    var isEnd = !char;\n\n    if (isHash || isDot || isEnd) {\n      if (mode === TAG_NAME) {\n        if (i === 0) {\n          tag = 'div';\n        } else {\n          tag = query.substring(offset, i);\n        }\n      } else if (mode === ID) {\n        id = query.substring(offset, i);\n      } else {\n        if (className) {\n          className += ' ' + query.substring(offset, i);\n        } else {\n          className = query.substring(offset, i);\n        }\n      }\n\n      if (isHash) {\n        mode = ID;\n      } else if (isDot) {\n        mode = CLASS_NAME;\n      }\n\n      offset = i + 1;\n    }\n  }\n\n  return { tag: tag, id: id, className: className };\n};\n\nvar createElement = function (query, ns) {\n  var ref = parseQuery(query);\n  var tag = ref.tag;\n  var id = ref.id;\n  var className = ref.className;\n  var element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    if (ns) {\n      element.setAttribute('class', className);\n    } else {\n      element.className = className;\n    }\n  }\n\n  return element;\n};\n\nvar unmount = function (parent, child) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (childEl.parentNode) {\n    doUnmount(child, childEl, parentEl);\n\n    parentEl.removeChild(childEl);\n  }\n\n  return child;\n};\n\nvar doUnmount = function (child, childEl, parentEl) {\n  var hooks = childEl.__redom_lifecycle;\n\n  if (hooksAreEmpty(hooks)) {\n    childEl.__redom_mounted = false;\n    return;\n  }\n\n  var traverse = parentEl;\n\n  if (childEl.__redom_mounted) {\n    trigger(childEl, 'onunmount');\n  }\n\n  while (traverse) {\n    var parentHooks = traverse.__redom_lifecycle || {};\n\n    for (var hook in hooks) {\n      if (parentHooks[hook]) {\n        parentHooks[hook] -= hooks[hook];\n      }\n    }\n\n    if (hooksAreEmpty(parentHooks)) {\n      traverse.__redom_lifecycle = null;\n    }\n\n    traverse = traverse.parentNode;\n  }\n};\n\nvar hooksAreEmpty = function (hooks) {\n  if (hooks == null) {\n    return true;\n  }\n  for (var key in hooks) {\n    if (hooks[key]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nvar hookNames = ['onmount', 'onunmount'];\nvar shadowRootAvailable = typeof window !== 'undefined' && 'ShadowRoot' in window;\n\nvar mount = function (parent, child, before) {\n  var parentEl = getEl(parent);\n  var childEl = getEl(child);\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n\n  var wasMounted = childEl.__redom_mounted;\n  var oldParent = childEl.parentNode;\n\n  if (wasMounted && (oldParent !== parentEl)) {\n    doUnmount(child, childEl, oldParent);\n  }\n\n  if (before != null) {\n    parentEl.insertBefore(childEl, getEl(before));\n  } else {\n    parentEl.appendChild(childEl);\n  }\n\n  doMount(child, childEl, parentEl, oldParent);\n\n  return child;\n};\n\nvar doMount = function (child, childEl, parentEl, oldParent) {\n  var hooks = childEl.__redom_lifecycle || (childEl.__redom_lifecycle = {});\n  var remount = (parentEl === oldParent);\n  var hooksFound = false;\n\n  for (var i = 0; i < hookNames.length; i++) {\n    var hookName = hookNames[i];\n\n    if (!remount && (child !== childEl) && (hookName in child)) {\n      hooks[hookName] = (hooks[hookName] || 0) + 1;\n    }\n    if (hooks[hookName]) {\n      hooksFound = true;\n    }\n  }\n\n  if (!hooksFound) {\n    childEl.__redom_mounted = true;\n    return;\n  }\n\n  var traverse = parentEl;\n  var triggered = false;\n\n  if (remount || (!triggered && (traverse && traverse.__redom_mounted))) {\n    trigger(childEl, remount ? 'onremount' : 'onmount');\n    triggered = true;\n  }\n\n  if (remount) {\n    return;\n  }\n\n  while (traverse) {\n    var parent = traverse.parentNode;\n    var parentHooks = traverse.__redom_lifecycle || (traverse.__redom_lifecycle = {});\n\n    for (var hook in hooks) {\n      parentHooks[hook] = (parentHooks[hook] || 0) + hooks[hook];\n    }\n\n    if (!triggered && (traverse === document || (shadowRootAvailable && (traverse instanceof window.ShadowRoot)) || (parent && parent.__redom_mounted))) {\n      trigger(traverse, remount ? 'onremount' : 'onmount');\n      triggered = true;\n    }\n\n    traverse = parent;\n  }\n};\n\nvar trigger = function (el, eventName) {\n  if (eventName === 'onmount') {\n    el.__redom_mounted = true;\n  } else if (eventName === 'onunmount') {\n    el.__redom_mounted = false;\n  }\n\n  var hooks = el.__redom_lifecycle;\n\n  if (!hooks) {\n    return;\n  }\n\n  var view = el.__redom_view;\n  var hookCount = 0;\n\n  view && view[eventName] && view[eventName]();\n\n  for (var hook in hooks) {\n    if (hook) {\n      hookCount++;\n    }\n  }\n\n  if (hookCount) {\n    var traverse = el.firstChild;\n\n    while (traverse) {\n      var next = traverse.nextSibling;\n\n      trigger(traverse, eventName);\n\n      traverse = next;\n    }\n  }\n};\n\nvar setStyle = function (view, arg1, arg2) {\n  var el = getEl(view);\n\n  if (arg2 !== undefined) {\n    el.style[arg1] = arg2;\n  } else if (isString(arg1)) {\n    el.setAttribute('style', arg1);\n  } else {\n    for (var key in arg1) {\n      setStyle(el, key, arg1[key]);\n    }\n  }\n};\n\n/* global SVGElement */\n\nvar xlinkns = 'http://www.w3.org/1999/xlink';\n\nvar setAttr = function (view, arg1, arg2) {\n  var el = getEl(view);\n  var isSVG = el instanceof SVGElement;\n\n  if (arg2 !== undefined) {\n    if (arg1 === 'style') {\n      setStyle(el, arg2);\n    } else if (isSVG && isFunction(arg2)) {\n      el[arg1] = arg2;\n    } else if (arg1 === 'dataset') {\n      setData(el, arg2);\n    } else if (!isSVG && (arg1 in el || isFunction(arg2))) {\n      el[arg1] = arg2;\n    } else {\n      if (isSVG && (arg1 === 'xlink')) {\n        setXlink(el, arg2);\n        return;\n      }\n      el.setAttribute(arg1, arg2);\n    }\n  } else {\n    for (var key in arg1) {\n      setAttr(el, key, arg1[key]);\n    }\n  }\n};\n\nfunction setXlink (el, obj) {\n  for (var key in obj) {\n    el.setAttributeNS(xlinkns, key, obj[key]);\n  }\n}\n\nfunction setData (el, obj) {\n  for (var key in obj) {\n    el.dataset[key] = obj[key];\n  }\n}\n\nvar text = function (str) { return document.createTextNode((str != null) ? str : ''); };\n\nvar parseArguments = function (element, args) {\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n\n    if (arg !== 0 && !arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (isString(arg) || isNumber(arg)) {\n      element.appendChild(text(arg));\n    } else if (isNode(getEl(arg))) {\n      mount(element, arg);\n    } else if (arg.length) {\n      parseArguments(element, arg);\n    } else if (typeof arg === 'object') {\n      setAttr(element, arg);\n    }\n  }\n};\n\nvar ensureEl = function (parent) { return isString(parent) ? html(parent) : getEl(parent); };\nvar getEl = function (parent) { return (parent.nodeType && parent) || (!parent.el && parent) || getEl(parent.el); };\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || (htmlCache[query] = createElement(query)); };\n\nvar html = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeHTML(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n};\n\nhtml.extend = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var clone = memoizeHTML(query);\n\n  return html.bind.apply(html, [ this, clone ].concat( args ));\n};\n\nvar el = html;\nvar h = html;\n\nvar setChildren = function (parent) {\n  var children = [], len = arguments.length - 1;\n  while ( len-- > 0 ) children[ len ] = arguments[ len + 1 ];\n\n  var parentEl = getEl(parent);\n  var current = traverse(parent, children, parentEl.firstChild);\n\n  while (current) {\n    var next = current.nextSibling;\n\n    unmount(parent, current);\n\n    current = next;\n  }\n};\n\nfunction traverse (parent, children, _current) {\n  var current = _current;\n\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = getEl(child);\n\n    if (childEl === current) {\n      current = current.nextSibling;\n      continue;\n    }\n\n    if (isNode(childEl)) {\n      mount(parent, child, current);\n      continue;\n    }\n\n    if (child.length != null) {\n      current = traverse(parent, child, current);\n    }\n  }\n\n  return current;\n}\n\nvar propKey = function (key) { return function (item) { return item[key]; }; };\n\nvar listPool = function (View, key, initData) {\n  return new ListPool(View, key, initData);\n};\n\nvar ListPool = function ListPool (View, key, initData) {\n  this.View = View;\n  this.initData = initData;\n  this.oldLookup = {};\n  this.lookup = {};\n  this.oldViews = [];\n  this.views = [];\n\n  if (key != null) {\n    this.lookup = {};\n    this.key = isFunction(key) ? key : propKey(key);\n  }\n};\nListPool.prototype.update = function update (data, context) {\n  var ref = this;\n    var View = ref.View;\n    var key = ref.key;\n    var initData = ref.initData;\n  var keySet = key != null;\n\n  var oldLookup = this.lookup;\n  var newLookup = {};\n\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (keySet) {\n      var id = key(item);\n      view = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__redom_id = id;\n    } else {\n      view = oldViews[i] || new View(initData, item, i, data);\n    }\n    view.update && view.update(item, i, data, context);\n\n    var el = getEl(view.el);\n    el.__redom_view = view;\n    newViews[i] = view;\n  }\n\n  this.oldViews = oldViews;\n  this.views = newViews;\n\n  this.oldLookup = oldLookup;\n  this.lookup = newLookup;\n};\n\nvar list = function (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n};\n\nvar List = function List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.initData = initData;\n  this.views = [];\n  this.pool = new ListPool(View, key, initData);\n  this.el = ensureEl(parent);\n  this.keySet = key != null;\n};\nList.prototype.update = function update (data, context) {\n    var this$1 = this;\n    if ( data === void 0 ) data = [];\n\n  var ref = this;\n    var keySet = ref.keySet;\n  var oldViews = this.views;\n  var oldLookup = keySet && this.lookup;\n\n  this.pool.update(data, context);\n  var ref$1 = this.pool;\n    var views = ref$1.views;\n    var lookup = ref$1.lookup;\n\n  if (keySet) {\n    for (var i = 0; i < oldViews.length; i++) {\n      var id = oldViews[i].__redom_id;\n      if (!(id in lookup)) {\n        unmount(this$1, oldLookup[id]);\n      }\n    }\n  }\n\n  setChildren(this, views);\n\n  if (keySet) {\n    this.lookup = lookup;\n  }\n  this.views = views;\n};\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\n/* global Node */\n\nvar place = function (View, initData) {\n  return new Place(View, initData);\n};\n\nvar Place = function Place (View, initData) {\n  this.el = text('');\n  this.visible = false;\n  this.view = null;\n  this._placeholder = this.el;\n  if (View instanceof Node) {\n    this._el = View;\n  } else {\n    this._View = View;\n  }\n  this._initData = initData;\n};\nPlace.prototype.update = function update (visible, data) {\n  var placeholder = this._placeholder;\n  var parentNode = this.el.parentNode;\n\n  if (visible) {\n    if (!this.visible) {\n      if (this._el) {\n        mount(parentNode, this._el, placeholder);\n        unmount(parentNode, placeholder);\n        this.el = this._el;\n        this.visible = visible;\n        return;\n      }\n      var View = this._View;\n      var view = new View(this._initData);\n\n      this.el = getEl(view);\n      this.view = view;\n\n      mount(parentNode, view, placeholder);\n      unmount(parentNode, placeholder);\n    }\n    this.view && this.view.update && this.view.update(data);\n  } else {\n    if (this.visible) {\n      if (this._el) {\n        mount(parentNode, placeholder, this._el);\n        unmount(parentNode, this._el);\n        this.el = placeholder;\n        this.visible = visible;\n        return;\n      }\n      mount(parentNode, placeholder, this.view);\n      unmount(parentNode, this.view);\n\n      this.el = placeholder;\n      this.view = null;\n    }\n  }\n  this.visible = visible;\n};\n\nvar router = function (parent, Views, initData) {\n  return new Router(parent, Views, initData);\n};\n\nvar Router = function Router (parent, Views, initData) {\n  this.el = ensureEl(parent);\n  this.Views = Views;\n  this.initData = initData;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.route = route;\n    this.view = View && new View(this.initData, data);\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data, route);\n};\n\nvar ns = 'http://www.w3.org/2000/svg';\n\nvar svgCache = {};\n\nvar memoizeSVG = function (query) { return svgCache[query] || (svgCache[query] = createElement(query, ns)); };\n\nvar svg = function (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeSVG(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n};\n\nsvg.extend = function (query) {\n  var clone = memoizeSVG(query);\n\n  return svg.bind(this, clone);\n};\n\nsvg.ns = ns;\n\nvar s = svg;\n\nexport { el, h, html, list, List, listPool, ListPool, mount, unmount, place, Place, router, Router, setAttr, setStyle, setChildren, s, svg, text };\n","import {el, mount, list} from 'redom';\n\n// item: {label, callback}\nexport class ContextMenu {\n\tconstructor(triggerElement, items) {\n\t\tlet triggerBounds = triggerElement.getBoundingClientRect();\n\t\t\n\n\t\tthis.el = el('div.contextMenu', {\n\t\t\tstyle: {\n\t\t\t\ttop: (triggerBounds.bottom + window.pageYOffset) + 'px',\n\t\t\t\tleft: triggerBounds.left + 'px'\n\t\t\t}\n\t\t});\n\t\tthis.list = list(this.el, ContextMenuItem);\n\t\tthis.list.update(items);\n\t\t\n\t\tsetTimeout(() => {\n\t\t\tthis.eventListener = window.addEventListener('click', () => {\n\t\t\t\tthis.remove();\n\t\t\t});\n\t\t}, 0);\n\t\t\n\t\tmount(document.body, this.el);\n\t}\n\t\n\tremove() {\n\t\tif (this.eventListener) \n\t\t\twindow.removeEventListener('click', this.eventListener);\n\t\t\n\t\tif (this.el.parentNode)\n\t\t\tthis.el.parentNode.removeChild(this.el);\n\t}\n}\n\nclass ContextMenuItem {\n\tconstructor() {\n\t\tthis.el = el('div.contextMenuItem',\n\t\t\t{\n\t\t\t\tonclick: () => this.callback && this.callback()\n\t\t\t}\n\t\t);\n\n\t\tthis.callback = null;\n\t}\n\n\tupdate(data) {\n\t\tthis.el.textContent = data.label;\n\t\tthis.callback = data.callback;\n\t}\n}\n","import {getAjax} from \"./util\";\nimport {el, mount, list} from 'redom';\n\nlet profile = {};\n\nlet profileButton = null;\nlet profileMenu = null;\nlet buttonContainer = null;\n\nlet windowLoadPromise = new Promise((resolve, reject) => window.addEventListener('load', resolve));\n\nlet promiseResolve = null;\nexport let profilePromise = new Promise((resolve, reject) => {\n\tpromiseResolve = resolve;\n});\n\nexport function setButtonContainer(container) {\n\tif (buttonContainer)\n\t\treturn console.error('profile.setButtonContainer can only be called once');\n\tbuttonContainer = container;\n\n\t// return; // Remove this line to enable profile\n\n\twindowLoadPromise.then(() => {\n\t\tprofileButton = new ProfileButton();\n\t\tprofileMenu = new ProfileMenu();\n\n\t\tmount(document.body, profileMenu);\n\t\tmount(buttonContainer, profileButton);\n\n\t\tgetAjax(`/api/profile?userId=${localStorage.openEditPlayUserId}&userToken=${localStorage.openEditPlayUserToken}`).then(user => {\n\t\t\tdelete user.userToken;\n\t\t\tif (user.games)\n\t\t\t\tuser.gameIdList = user.games.map(game => game.id);\n\t\t\twindow.user = user;\n\t\t\tif (promiseResolve)\n\t\t\t\tpromiseResolve(user) && console.log('resolved');\n\t\t\tprofileMenu.gamesCreated.textContent = user.games;\n\t\t});\n\t});\n}\n\nclass ProfileButton {\n\tconstructor() {\n\t\tthis.el = el('img.profileButton', {\n\t\t\tsrc: '/img/profile.png',\n\t\t\tonclick: () => profileMenu.el.classList.toggle('visible')\n\t\t});\n\t}\n\n\tupdate(data) {\n\t}\n}\n\nclass ProfileMenu {\n\tconstructor() {\n\t\tthis.el = el('div.profileMenu',\n\t\t\tel('div.profileMenuContent',\n\t\t\t\tel('div.gamesCreatedBlock',\n\t\t\t\t\t'Welcome to Open Edit Play! Play or Edit a game and profile will be created for you.',\n\t\t\t\t\tel('div'),\n\t\t\t\t\t'Games created: ',\n\t\t\t\t\tthis.gamesCreated = el('span.gamesCreated')\n\t\t\t\t)\n\t\t\t),\n\t\t\t{\n\t\t\t\tonclick: () => profileMenu.el.classList.toggle('visible')\n\t\t\t}\n\t\t);\n\t}\n\n\tupdate(data) {\n\t}\n}\n\n\n/*\nWhat?\n\nremember games that i have created\naccess games that i have created\n\n\n\n\n\n\n\n\n\n */\n","import {dateToAgoFormat, standaloneMobileLinkClickEventSupport} from \"./util\";\nimport {ContextMenu} from \"./contextMenu\";\nimport {el, mount, list} from 'redom';\nimport {profilePromise} from \"./profile\";\n\nconst sizeExplanation = 'Game size in data units. Every object in scene, type, component, level and property is a data unit.';\n\nexport class GameList {\n\tconstructor() {\n\t\tthis.el = el('div.gameListContainer',\n\t\t\tel('table.gameList',\n\t\t\t\tel('thead.gameListHeader',\n\t\t\t\t\tel('th.gameListHeaderName', 'Name'),\n\t\t\t\t\tel('th.gameListHeaderPlay'),\n\t\t\t\t\tel('th.gameListHeaderSize', 'Size', {title: sizeExplanation}),\n\t\t\t\t\tel('th.gameListHeaderLevels', 'Levels'),\n\t\t\t\t\tel('th.gameListHeaderCreated', 'Created'),\n\t\t\t\t\tel('th.gameListHeaderModified', 'Modified')\n\t\t\t\t),\n\t\t\t\tthis.list = list('tbody.gameListContent', Game)\n\t\t\t)\n\t\t);\n\t}\n\n\tupdate(gameListData) {\n\t\tthis.list.update(gameListData);\n\t}\n}\n\nclass Game {\n\tconstructor() {\n\t\tthis.el = el('tr.gameElement',\n\t\t\tthis.name = el('td.gameElementName'),\n\t\t\tthis.play = el('td.gameElementPlay',\n\t\t\t\tthis.primaryButton = el('a.linkButton', 'Play', {\n\t\t\t\t\tonclick: standaloneMobileLinkClickEventSupport\n\t\t\t\t}),\n\t\t\t\tthis.secondaryButton = el('a.linkButton.hideInSmallScreens.gameElementSecondaryButton', '...', {\n\t\t\t\t\thref: '#',\n\t\t\t\t\tonclick: e => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif (this.isMyGame)Â {\n\t\t\t\t\t\t\twindow.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\tnew ContextMenu(this.secondaryButton, [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'Edit',\n\t\t\t\t\t\t\t\t\tcallback: () => window.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]);\t\n\t\t\t\t\t\t\t*/\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnew ContextMenu(this.secondaryButton, [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'Open editor sandbox',\n\t\t\t\t\t\t\t\t\tcallback: () => window.location.href = '/edit/?gameId=' + this.gameId\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t),\n\t\t\tthis.size = el('td.gameElementSize', {title: sizeExplanation}),\n\t\t\tthis.levels = el('td.gameElementLevels'),\n\t\t\tthis.created = el('td.gameElementCreated'),\n\t\t\tthis.modified = el('td.gameElementModified')\n\t\t);\n\t}\n\n\tupdate(gameData) {\n\t\tthis.isMyGame = null;\n\t\tthis.gameId = gameData.id;\n\t\t\n\t\tthis.name.textContent = gameData.name;\n\t\tthis.size.textContent = gameData.serializableCount;\n\t\tthis.levels.textContent = gameData.levelCount;\n\n\t\tthis.created.textContent = dateToAgoFormat(gameData.createdAt);\n\t\tthis.created.setAttribute('title', new Date(gameData.createdAt).toLocaleString());\n\n\t\tthis.modified.textContent = dateToAgoFormat(gameData.updatedAt);\n\t\tthis.modified.setAttribute('title', new Date(gameData.updatedAt).toLocaleString());\n\n\t\tthis.primaryButton.setAttribute('href', '/play/?gameId=' + gameData.id);\n\t\t\n\t\tprofilePromise.then(user => {\n\t\t\tthis.isMyGame = !!(user.gameIdList && user.gameIdList.includes(gameData.id));\n\t\t\tthis.el.classList.toggle('isMyGame', this.isMyGame);\n\t\t\t\n\t\t\t// this.primaryButton.classList.toggle('playButton', !this.isMyGame);\n\t\t\t// this.primaryButton.classList.toggle('editButton', this.isMyGame);\n\t\t\t\n\t\t\tif (this.isMyGame) {\n\t\t\t\tthis.secondaryButton.textContent = 'Edit';\n\t\t\t} else {\n\t\t\t\tthis.secondaryButton.textContent = '...';\n\t\t\t}\n\t\t});\n\t}\n}\n\n","import {getAjax} from \"./util\";\nimport {el, mount, list, text} from 'redom';\nimport {GameList} from \"./gameElement\";\nimport {profilePromise, setButtonContainer} from \"./profile\";\n\nwindow.IS_SMALL_SCREEN = window.screen.width < 800;\nwindow.IS_MOBILE_STANDALONE = window.navigator.standalone;\n\nwindow.addEventListener('load', () => {\n\tif (IS_SMALL_SCREEN)\n\t\tdocument.body.classList.add('isSmallDevice');\n\t\n\tsetButtonContainer(document.getElementById('profileButtonContainer'));\n\t\n\tlet gamesElement = document.getElementById('games');\n\tgetAjax('/api/gameListSample').then(gameListData => {\n\t\tlet gameList = new GameList();\n\t\tgameList.update(gameListData);\n\t\tmount(gamesElement, gameList);\n\t}).catch((e) => {\n\t\tmount(gamesElement, text('Could not load'));\n\t});\n\n\tprofilePromise.then(profile => {\n\t\tif (!profile.id || profile.games.length === 0)\n\t\t\treturn;\n\t\tlet myGamesElement = document.getElementById('myGames');\n\t\tmyGamesElement.style.display = 'block';\n\t\tlet myGameList = new GameList();\n\t\tmyGameList.update(profile.games);\n\t\tmount(myGamesElement, myGameList);\n\t});\n\n\tlet topBarBackground = document.getElementById('topBarBackground');\n\n\tif (IS_MOBILE_STANDALONE) {\n\t\t// In standalone mode, just show the top bar always. In iOS, scolling events can't be trusted.\n\t\ttopBarBackground.style.opacity = 1;\n\t} else {\n\t\t// In large devices, do mooth scrolling experience\n\n\t\twindow.onscroll = function () {\n\t\t\t\"use strict\";\n\t\t\tlet scroll = document.documentElement.scrollTop || document.body.scrollTop;\n\n\t\t\tlet point1 = 100;\n\t\t\tlet point2 = 350;\n\t\t\tlet fullOpacity = 1;\n\n\t\t\tif (scroll < point1) {\n\t\t\t\ttopBarBackground.style.opacity = 0;\n\t\t\t} else if (scroll < point2) {\n\t\t\t\ttopBarBackground.style.opacity = (scroll - point1) / (point2 - point1) * fullOpacity;\n\t\t\t} else {\n\t\t\t\ttopBarBackground.style.opacity = fullOpacity;\n\t\t\t}\n\t\t};\n\t\twindow.onscroll();\n\t}\n});\n"],"names":["arguments"],"mappings":"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"}