{"version":3,"file":null,"sources":["../src/assert.js","../src/core/serializableManager.js","../src/core/serializable.js","../src/core/propertyType.js","../node_modules/redom/dist/redom.es.js","../src/core/entity.js","../src/core/propertyModel.js","../src/core/test.js","../src/core/property.js","../src/core/component.js","../src/core/componentExample.js","../src/components/Position.js","../src/components/Test.js","../src/editor/event.js","../src/editor/ui/top.js","../src/editor/ui/propertyEditor.js","../src/editor/ui/left.js","../src/editor/ui/bottom.js","../src/editor/ui/layout.js","../src/editor/editor.js","../src/mainDev.js"],"sourcesContent":["export default function assert(condition, message) {\n\tif (!condition)\n\t\tthrow new Error(message);\n}\n","let serializables = new Map();\n\nexport function addSerializable(serializable) {\n\tif (serializables.has(serializable.id)) throw new Error('Serializable id clash!');\n\tserializables.set(serializable.id, serializable);\n}\n\nexport function getSerializable(id) {\n\treturn serializables.get(id);\n}\n\nexport function hasSerializable(id) {\n\treturn serializables.has(id);\n}\n\nexport function removeSerializable(id) {\n\tif (!serializables.delete(id))\n\t\tthrow new Error('Serializable not found!');\n}\n","import assert from '../assert';\nimport * as serializableManager from './serializableManager';\n\nconst BASE_64_CHARACTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\nconst CHAR_COUNT = BASE_64_CHARACTERS.length;\nfunction char() {\n\treturn BASE_64_CHARACTERS[Math.random() * CHAR_COUNT | 0];\n}\nfunction createStringId(threeLetterPrefix = '???', characters = 16) {\n\tlet id = threeLetterPrefix;\n\tfor (let i = characters - 1; i !== 0; --i)\n\t\tid += char();\n\treturn id;\n}\n\nexport default class Serializable {\n\tconstructor(threeLetterType, predefinedId = false) {\n\t\tif (predefinedId)\n\t\t\tthis.id = predefinedId;\n\t\telse\n\t\t\tthis.id = createStringId(threeLetterType);\n\n\t\tserializableManager.addSerializable(this);\n\t}\n\tdelete() {\n\t\tserializableManager.removeSerializable(this.id);\n\t}\n\ttoJSON() {\n\t\treturn {\n\t\t\tid: this.id\n\t\t};\n\t}\n\ttoString() {\n\t\treturn JSON.stringify(this.toJSON(), null, 4);\n\t}\n\tstatic fromJSON(json) {\n\t\tassert(typeof json.id === 'string');\n\t\treturn new Serializable(null, json.id);\n\t}\n}\n","import assert from '../assert';\nimport PropertyModel from './propertyModel';\n\nexport default function PropertyType(propertyName, defaultValue, type, ...optionalParameters) {\n\ttype = type();\n\tlet validator = type.validators.default();\n\tlet description = '';\n\toptionalParameters.forEach(p => {\n\t\tif (typeof p === 'string')\n\t\t\tdescription = p;\n\t\telse if (p && p.validate)\n\t\t\tvalidator = p;\n\t\telse\n\t\t\tassert(false, 'invalid parameter ' + p);\n\t});\n\treturn new PropertyModel(propertyName, type, validator, defaultValue);\n};\n\nexport function addType({\n\tname = '',\n\tvalidators = { default: x => x }, // default must exist\n\ttoJSON = x => x,\n\tfromJSON = x => x\n}) {\n\tassert(name, 'name missing from property type');\n\tassert(typeof validators.default === 'function','default validator missing from property type: ' + name);\n\tassert(typeof toJSON === 'function', 'invalid toJSON for property type: ' + name);\n\tassert(typeof fromJSON === 'function', 'invalid fromJSON for property type: ' + name);\n\n\tlet type = {\n\t\tname,\n\t\tvalidators,\n\t\ttoJSON,\n\t\tfromJSON\n\t};\n\tlet createType = () => type;\n\t\n\tObject.keys(validators).forEach(validatorName => {\n\t\tcreateType[validatorName] = createValidator(validatorName, validators[validatorName]);\n\t\tvalidators[validatorName] = createType[validatorName];\n\t});\n\tPropertyType[name] = createType;\n}\n\nexport function createValidator(name, validatorFunction) {\n\tlet validator = function() {\n\t\tlet parameters = [...arguments];\n\t\treturn {\n\t\t\tvalidatorName: name,\n\t\t\tvalidatorParameters: parameters,\n\t\t\tvalidate: x => validatorFunction(x, ...parameters)\n\t\t};\n\t};\n\tvalidator.validatorName = name;\n\tvalidator.validate = validatorFunction;\n\treturn validator;\n}\n\naddType({\n\tname: 'float',\n\tvalidators: {\n\t\tdefault(x) {\n\t\t\tx = parseFloat(x);\n\t\t\tassert(!isNaN(x), 'invalid float: ' + x);\n\t\t\treturn x;\n\t\t},\n\t\t// PropertyType.float.range(min, max)\n\t\trange(x, min, max) {\n\t\t\tx = parseFloat(x);\n\t\t\tassert(!isNaN(x), 'invalid float: ' + x);\n\t\t\treturn Math.min(max, Math.max(min, x));\n\t\t}\n\t},\n\ttoJSON: x => x,\n\tfromJSON: x => x\n});\n\naddType({\n\tname: 'string',\n\tvalidators: {\n\t\tdefault: x => String(x)\n\t},\n\ttoJSON: x => x,\n\tfromJSON: x => x\n});\n","var HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nfunction createElement (query, ns) {\n  var tag;\n  var id;\n  var className;\n\n  var mode = 0;\n  var start = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n\n    if (char === HASH || char === DOT || !char) {\n      if (mode === 0) {\n        if (i === 0) {\n          tag = 'div';\n        } else if (!char) {\n          tag = query;\n        } else {\n          tag = query.substring(start, i);\n        }\n      } else {\n        var slice = query.substring(start, i);\n\n        if (mode === 1) {\n          id = slice;\n        } else if (className) {\n          className += ' ' + slice;\n        } else {\n          className = slice;\n        }\n      }\n\n      start = i + 1;\n\n      if (char === HASH) {\n        mode = 1;\n      } else {\n        mode = 2;\n      }\n    }\n  }\n\n  var element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    element.className = className;\n  }\n\n  return element;\n}\n\nfunction text (content) {\n  return document.createTextNode(content);\n}\n\nfunction mount (parent, child, before) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (childEl.__redom_list) {\n    childEl = childEl.el;\n  }\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n  if (child.isMounted) {\n    child.remount && child.remount();\n  } else {\n    child.mount && child.mount();\n  }\n  if (before) {\n    parentEl.insertBefore(childEl, before.el || before);\n  } else {\n    parentEl.appendChild(childEl);\n  }\n  if (child.isMounted) {\n    child.remounted && child.remounted();\n  } else {\n    child.isMounted = true;\n    child.mounted && child.mounted();\n  }\n}\n\nfunction unmount (parent, child) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  child.unmount && child.unmount();\n\n  parentEl.removeChild(childEl);\n\n  child.isMounted = false;\n  child.unmounted && child.unmounted();\n}\n\nvar elcache = {};\n\nfunction el (query) {\n  var arguments$1 = arguments;\n\n  var element;\n\n  if (typeof query === 'string') {\n    element = (elcache[query] || (elcache[query] = createElement(query))).cloneNode(false);\n  } else if (query && query.nodeType) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  var empty = true;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments$1[i];\n\n    if (!arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (typeof arg === 'string' || typeof arg === 'number') {\n      if (empty) {\n        empty = false;\n        element.textContent = arg;\n      } else {\n        element.appendChild(text(arg));\n      }\n    } else if (arg.nodeType || (arg.el && arg.el.nodeType)) {\n      empty = false;\n      mount(element, arg);\n    } else if (arg.length) {\n      empty = false;\n      for (var j = 0; j < arg.length; j++) {\n        mount(element, arg[j]);\n      }\n    } else if (typeof arg === 'object') {\n      for (var key in arg) {\n        var value = arg[key];\n\n        if (key === 'style') {\n          if (typeof value === 'string') {\n            element.setAttribute(key, value);\n          } else {\n            for (var cssKey in value) {\n              element.style[cssKey] = value[cssKey];\n            }\n          }\n        } else if (key in element || typeof value === 'function') {\n          element[key] = value;\n        } else {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n  }\n\n  return element;\n}\n\nel.extend = function (query) {\n  var clone = (elcache[query] || (elcache[query] = createElement(query)));\n\n  return el.bind(this, clone);\n};\n\nfunction setChildren (parent, children) {\n  var parentEl = parent.el || parent;\n  var traverse = parentEl.firstChild;\n\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = child.el || child;\n\n    if (childEl === traverse) {\n      traverse = traverse.nextSibling;\n      continue;\n    }\n\n    mount(parent, child, traverse);\n  }\n\n  while (traverse) {\n    var next = traverse.nextSibling;\n\n    unmount(parent, traverse);\n\n    traverse = next;\n  }\n}\n\nfunction list (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n}\n\nfunction List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.key = key;\n  this.initData = initData;\n  this.views = [];\n  this.el = typeof parent === 'string' ? el(parent) : parent;\n\n  if (key) {\n    this.lookup = {};\n  }\n}\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\nList.prototype.update = function (data) {\n  if ( data === void 0 ) data = [];\n\n  var View = this.View;\n  var key = this.key;\n  var functionKey = typeof key === 'function';\n  var initData = this.initData;\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n  var newLookup = key && {};\n  var oldLookup = key && this.lookup;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (key) {\n      var id = functionKey ? key(item) : item[key];\n      view = newViews[i] = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__id = id;\n    } else {\n      view = newViews[i] = oldViews[i] || new View(initData, item, i, data);\n    }\n    var el$$1 = view.el;\n    if (el$$1.__redom_list) {\n      el$$1 = el$$1.el;\n    }\n    el$$1.__redom_view = view;\n    view.update && view.update(item, i, data);\n  }\n\n  setChildren(this, newViews);\n\n  if (key) {\n    this.lookup = newLookup;\n  }\n  this.views = newViews;\n};\n\nfunction router (parent, Views) {\n  return new Router(parent, Views);\n}\n\nvar Router = function Router (parent, Views) {\n  this.el = typeof parent === 'string' ? el(parent) : parent;\n  this.Views = Views;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.view = View && new View();\n    this.route = route;\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data);\n};\n\nvar SVG = 'http://www.w3.org/2000/svg';\n\nvar svgcache = {};\n\nfunction svg (query, a) {\n  var arguments$1 = arguments;\n\n  var element;\n\n  if (typeof query === 'string') {\n    element = (svgcache[query] || (svgcache[query] = createElement(query, SVG))).cloneNode(false);\n  } else if (query && query.nodeType) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  var empty = true;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments$1[i];\n\n    if (!arg) {\n      continue;\n    } else if (typeof arg === 'function') {\n      arg = arg(element);\n    } else if (typeof arg === 'string' || typeof arg === 'number') {\n      if (empty) {\n        empty = false;\n        element.textContent = arg;\n      } else {\n        element.appendChild(text(arg));\n      }\n    } else if (arg.nodeType || (arg.el && arg.el.nodeType)) {\n      empty = false;\n      mount(element, arg);\n    } else if (typeof arg === 'object') {\n      for (var key in arg) {\n        var value = arg[key];\n\n        if (key === 'style' && typeof value !== 'string') {\n          for (var cssKey in value) {\n            element.style[cssKey] = value[cssKey];\n          }\n        } else if (typeof value === 'function') {\n          element[key] = value;\n        } else {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n  }\n\n  return element;\n}\n\nsvg.extend = function (query) {\n  var clone = (svgcache[query] || (svgcache[query] = createElement(query, SVG)));\n\n  return svg.bind(this, clone);\n};\n\nexport { el, list, List, mount, unmount, router, Router, setChildren, svg, text };\n","import Serializable from './serializable';\nimport assert from '../assert';\n\nconst ALIVE_ERROR = 'entity is already dead';\n\nexport default class Entity extends Serializable {\n\tconstructor() {\n\t\tsuper('ent');\n\t\tthis.components = new Map(); // name -> array\n\t\tthis.alive = true;\n\t\tthis.sleeping = false;\n\t\tthis.prototype = null;\n\t}\n\n\t// Get the first component of given name\n\tgetComponent(name) {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\tlet components = this.components.get(name);\n\t\tif (components !== undefined)\n\t\t\treturn components[0];\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t// Get all components with given name\n\tgetComponents(name) {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\treturn this.components.get(name) || [];\n\t}\n\n\t/*\n\tAdds multiple components as an array to this Entity.\n\tUses addComponent internally.\n\tInitializes components after all components are added.\n\t*/\n\taddComponents(components) {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\tassert(Array.isArray(components), 'Parameter is not an array.');\n\n\t\tfor (let i = 0; i < components.length; i++) {\n\t\t\tlet componentList = this.components.get(components[i].name) || this.components.set(components[i].name, []).get(components[i].name);\n\t\t\tcomponentList.push(components[i]);\n\t\t}\n\t\t\n\t\tif (!this.sleeping)\n\t\t\tEntity.initComponents(components);\n\t\treturn this;\n\t}\n\tstatic initComponents(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._preInit();\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._init();\n\t}\n\tstatic makeComponentsSleep(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._sleep();\n\t}\n\tstatic deleteComponents(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i].delete();\n\t}\n\tsleep() {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\tif (this.sleeping) return false;\n\t\t\n\t\tfor (let componentArray of this.components)\n\t\t\tEntity.makeComponentsSleep(componentArray);\n\t\t\n\t\tthis.sleeping = true;\n\t\treturn true;\n\t}\n\twakeUp() {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\tif (!this.sleeping) return false;\n\n\t\tfor (let componentArray of this.components)\n\t\t\tEntity.initComponents(componentArray);\n\n\t\tthis.sleeping = false;\n\t\treturn true;\n\t}\n\tdelete() {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\tthis.sleep();\n\t\tsuper.delete();\n\t\tthis.alive = false;\n\t\tfor (let componentArray of this.components)\n\t\t\tEntity.deleteComponents(componentArray);\n\t\tthis.components.clear();\n\t}\n\ttoJSON() {\n\t\tassert(this.alive, ALIVE_ERROR);\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tcomponents: []\n\t\t});\n\t}\n}\n","import Serializable from './serializable';\nimport assert from '../assert';\n\n// info about type, validator, validatorParameters, initialValue\n\nexport default class PropertyModel extends Serializable {\n\tconstructor(name, type, validator, initialValue) {\n\t\tassert(typeof name === 'string');\n\t\tassert(typeof type.name === 'string');\n\t\tassert(typeof validator.validate === 'function');\n\t\t\n\t\tsuper('pmo');\n\t\t\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.validator = validator;\n\t\tthis.initialValue = initialValue;\n\t}\n\ttoJSON() {\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tname: this.name,\n\t\t\ttype: this.type.name,\n\t\t\tvalidatorName: this.validator.validatorName,\n\t\t\tvalidatorParameters: this.validator.validatorParameters,\n\t\t\tinitialValue: this.type.toJSON(this.initialValue)\n\t\t});\n\t}\n\tdelete() {\n\t\tsuper.delete();\n\t\tthis.type = null;\n\t\tthis.validator = null;\n\t}\n}\n","import assert from '../assert';\n\nimport Serializable from './serializable';\n(() => {\n\tlet s = new Serializable('tes');\n\tlet id = s.id;\n\tassert(typeof id === 'string' && id.length > 10);\n\tlet json = s.toJSON();\n\tassert(json && typeof json === 'object' && typeof json.id === 'string');\n\ts.delete();\n\ts = Serializable.fromJSON(json);\n\tassert(typeof s.id === 'string' && s.id.length > 10 && s.id === id);\n\tconsole.log('Serializable tests OK');\n})();\n\nimport Entity from './entity';\n(() => {\n\tlet i = new Entity();\n\tassert(i.components.size === 0);\n\tassert(i.getComponent('moi') === null);\n\tassert(i.getComponents('moi').length === 0);\n\tconsole.log('Entity tests OK');\n})();\n\nimport PropertyType from './propertyType';\n(() => {\n\tassert(PropertyType.float.default().validate('4') === 4);\n\tassert(PropertyType.float.range(0, 1).validate(3) === 1);\n\tconsole.log('PropertyType tests OK');\n})();\n","import Serializable from './serializable';\nimport assert from '../assert';\n\n// Entity of a property\nexport default class Property extends Serializable {\n\tconstructor(propertyModel) {\n\t\tsuper('pro');\n\t\tthis.model = propertyModel;\n\t\tthis.value = propertyModel.initialValue;\n\t}\n\ttoJSON() {\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tvalue: this.type.toJSON(this.value),\n\t\t\tmodelId: this.model.id\n\t\t});\n\t}\n\tdelete() {\n\t\tsuper.delete();\n\t\tthis.model = null;\n\t}\n}\nObject.defineProperty(Property.prototype, 'type', {\n\tget() {\n\t\treturn this.model.type;\n\t}\n});\nObject.defineProperty(Property.prototype, 'value', {\n\tset(newValue) {\n\t\tthis._value = this.model.validator.validate(newValue);\n\t},\n\tget() {\n\t\treturn this._value;\n\t}\n});\nObject.defineProperty(Property.prototype, 'initialValue', {\n\tget() {\n\t\treturn this.model.initialValue;\n\t}\n});\n","import Serializable from './serializable';\nimport assert from '../assert';\nimport Property from './property';\nexport { default as Prop } from './propertyType';\n\nexport let componentClasses = new Map();\n\n// Instance of a component, see componentExample.js\nexport class Component extends Serializable {\n\tconstructor(componentModel, entity, env) {\n\t\tsuper('com');\n\t\tthis.entity = entity;\n\t\tthis.env = env;\n\t\tthis.children = {}; // TODO: create children\n\t\tthis._properties = {};\n\t\tthis._componentModel = componentModel;\n\t\tthis.constructor.propertyModels.forEach(p => {\n\t\t\tthis._properties[p.name] = new Property(p);\n\t\t});\n\t}\n\tdelete() {\n\t\tassert(!this.env.entity.alive, 'Do not call Component.delete!');\n\t\tsuper.delete();\n\t}\n\t_preInit() {\n\t\tthis.constructor.requirements.forEach(r => {\n\t\t\tthis[r] = this.entity.getComponent(r);\n\t\t\tassert(this[r], 'required component not found');\n\t\t});\n\n\t\tthis._forEachChildComponent(c => c._preInit());\n\t\n\t\ttry {\n\t\t\tif (typeof this.preInit === 'function')\n\t\t\t\tthis.preInit();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.name, 'preInit', e);\n\t\t}\n\t}\n\t_init() {\n\t\tthis._forEachChildComponent(c => c._init());\n\t\ttry {\n\t\t\tif (typeof this.init === 'function')\n\t\t\t\tthis.init();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.name, 'init', e);\n\t\t}\n\t}\n\t_sleep() {\n\t\ttry {\n\t\t\tif (typeof this.sleep === 'function')\n\t\t\t\tthis.sleep();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.name, 'sleep', e);\n\t\t}\n\t\tthis._forEachChildComponent(c => c._sleep());\n\t}\n\t_forEachChildComponent(func) {\n\t\tObject.keys(this.children).forEach(key => {\n\t\t\tlet child = this.children[key];\n\t\t\tif (Array.isArray(child)) {\n\t\t\t\tchild.forEach(func);\n\t\t\t} else {\n\t\t\t\tfunc(child);\n\t\t\t}\n\t\t});\n\t}\n}\n\nComponent.reservedPropertyNames = new Set(['id', 'constructor', 'delete', 'children', 'entity', 'env', 'init', 'preInit', 'sleep', '_preInit', '_init', '_sleep', '_forEachChildComponent', '_properties', '_componentModel']);\nComponent.reservedPrototypeMembers = new Set(['id', 'children', 'entity', 'env', '_preInit', '_init', '_sleep', '_forEachChildComponent', '_properties', '_componentModel']);\nComponent.register = function({\n\tname = '',\n\tdescription = '',\n\tcategory = 'Other',\n\ticon = 'fa-bars',\n\tproperties = [],\n\trequirements = [],\n\tchildren = [],\n\tparentClass = Component,\n\tprototype = {}\n}) {\n\tassert(name, 'Component must have a name.');\n\tassert(!componentClasses.has(name), 'Duplicate component class ' + name);\n\tObject.keys(prototype).forEach(k => {\n\t\tif (Component.reservedPrototypeMembers.has(k))\n\t\t\tassert(false, 'Component prototype can not have a reserved member: ' + k);\n\t});\n\t\n\tlet constructorFunction = prototype.constructor;\n\tlet deleteFunction = prototype.delete;\n\tdelete prototype.constructor;\n\tdelete prototype.delete;\n\tclass Class extends parentClass {\n\t\tconstructor() {\n\t\t\tsuper(...arguments);\n\t\t\tif (constructorFunction)\n\t\t\t\tconstructorFunction();\n\t\t}\n\t\tdelete() {\n\t\t\tsuper.delete(...arguments);\n\t\t\tif (deleteFunction)\n\t\t\t\tdeleteFunction();\n\t\t}\n\t}\n\tObject.defineProperty(Class, 'name', { get: () => name });\n\tClass.propertyModels = properties;\n\tClass.category = category;\n\tClass.requirements = requirements;\n\tClass.children = children;\n\tObject.assign(Class.prototype, prototype);\n\n\tClass.propertyModels.forEach(p => {\n\t\tassert(!Component.reservedPropertyNames.has(p.name), 'Can not have property called ' + p.name);\n\t\tassert(Class.prototype[p.name] === undefined, 'Name ' + p.name + ' clashes ');\n\t\tObject.defineProperty(Class.prototype, p.name, {\n\t\t\tget() {\n\t\t\t\treturn this._properties[p.name].value;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis._properties[p.name].value = value;\n\t\t\t}\n\t\t});\n\t});\n\tcomponentClasses.set(Class.name, Class);\n\treturn Class;\n};\n","import { Component, Prop } from '../core/component';\n\n// Export so that other components can have this component as parent\nexport default Component.register({\n\tname: 'Example',\n\tdescription: 'Description of what this component does',\n\tcategory: 'Core', // You can also make up new categories.\n\ticon: 'fa-circle', // Font Awesome id\n\trequirements: ['Position'], // These shared components are autofilled. Error if component is not found.\n\tchildren: ['Image', 'Image', 'Sound'], // These private components are also autofilled. Error if component is not found.\n\tproperties: [\n\t\tProp('variable', 0.5, Prop.float, Prop.float.range(0, 1), 'Description of the property'),\n\t\tProp('otherVariaerfperfjoierjfoeifjble', 'Hello', Prop.string, 'Description of the property')\n\t],\n\tparentClass: Component,\n\tprototype: {\n\t\tstaticVariable: 'Example class info',\n\t\tconstructor() {\n\t\t\t// This will be called once, when creating the component\n\t\t\tthis.hiddenVariable = 3;\n\t\t},\n\t\tpreInit() {\n\t\t\t// preInit is called for every component before any component is inited with init(). Children are already preInited here.\n\t\t\tthis.data = {\n\t\t\t\tlotsOfData: 123 + this.variable + this.hiddenVariable\n\t\t\t};\n\t\t},\n\t\tinit() {\n\t\t\t// All the components of this entity has been preInited. You can use them. Children are already inited here.\n\t\t\tthis.Position.x = this.Position.y + 1;\n\n\t\t\tthis.howToAccessChildren = [\n\t\t\t\tthis.children.Image[0].property,\n\t\t\t\tthis.children.Sound.property\n\t\t\t];\n\n\t\t\tthis.SomeComponent = this.entity.getComponent('SomeComponent');\n\t\t},\n\t\tsleep() {\n\t\t\t// Release all the data created in preInit and init\n\t\t\tthis.data = null;\n\t\t\tthis.SomeComponent = null;\n\t\t\tthis.howToAccessChildren = null;\n\t\t\t// Position component is automatically released because it is a requirement.\n\t\t},\n\t\tdelete() {\n\t\t\t// This will be called once, when component stops existing\n\t\t}\n\t}\n});\n","import { Component, Prop } from '../core/component';\n\nComponent.register({\n\tname: 'Position',\n\tcategory: 'Core',\n\ticon: 'fa-circle',\n\tproperties: [\n\t\tProp('x', 0.1, Prop.float),\n\t\tProp('y', 0.2, Prop.float)\n\t]\n});\n","import { Component, Prop } from '../core/component';\n\nComponent.register({\n\tname: 'Test',\n\tcategory: 'Core',\n\ticon: 'fa-circle',\n\tproperties: [\n\t\tProp('name', 'Oh right', Prop.string),\n\t\tProp('number', 666, Prop.float)\n\t]\n});\n","/*\n Global event system\n\n let unlisten = eventManager.listen('event name', function(params, ...) {});\n eventManager.dispatch('event name', paramOrParamArray);\n unlisten();\n */\n\nlet listeners = {};\n\nexport default {\n\tlisten(event, callback) {\n\t\tif (!listeners.hasOwnProperty(event)) {\n\t\t\tlisteners[event] = [];\n\t\t}\n\t\tlisteners[event].push(callback);\n\t\treturn () => {\n\t\t\tvar index = listeners[event].indexOf(callback);\n\t\t\tlisteners[event].splice(index, 1);\n\t\t};\n\t},\n\tdispatch(event, args) {\n\t\tif (listeners.hasOwnProperty(event)) {\n\t\t\tif (!Array.isArray(args)) args = [args];\n\n\t\t\tfor (var i = 0; i < listeners[event].length; ++i) {\n\t\t\t\ttry {\n\t\t\t\t\tlisteners[event][i].call(null, args);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (console && console.error) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n","import { el, list, mount } from 'redom';\n\nexport class TopButton {\n\tconstructor() {\n\t\tthis.el = el('div.button.topIconTextButton',\n\t\t\tel('div.topIconTextButtonContent',\n\t\t\t\tthis.icon = el('i.fa'),\n\t\t\t\tthis.text = el('span')\n\t\t\t)\n\t\t)\n\t}\n\tupdate(state) {\n\t\tconsole.log('Button', state);\n\t\tthis.icon.className = state.iconClass;\n\t\tthis.text.textContent = state.text;\n\t}\n}\n\nexport class Top {\n\tconstructor() {\n\t\tthis.el = el('div.top',\n\t\t\tthis.logo = el('img.logo.button.iconButton', { src: '../img/logo_reflection_medium.png' }),\n\t\t\tthis.list = list('div.buttonContainer', TopButton)\n\t\t);\n\t}\n\tupdate(state) {\n\t\tconsole.log('Top', state);\n\t\tthis.list.update(state.buttons);\n\t}\n}\n","import { el, list, mount } from 'redom';\n\nexport class PropertyEditor {\n\tconstructor() {\n\t\tthis.el = el('div.propertyEditor.packable',\n\t\t\tthis.editor = el('div.propertyEditor'),\n\t\t\tthis.toggleButton = el('i.togglePacked.button.iconButton.fa.fa-chevron-right')\n\t\t);\n\t\tthis.el.onclick = () => this.el.classList.contains('packed') && this.el.classList.remove('packed');\n\t\tthis.toggleButton.onclick = event => {\n\t\t\tthis.el.classList.add('packed');\n\t\t\tevent.stopPropagation();\n\t\t};\n\t}\n\tupdate(state) {\n\t\t// if (!Array.isArray(state)) return;\n\t\t// if (!state.length)\n\t\t\t\n\t\t\n\t\t\t\n\t\tnew PJS($(this.editor), state.schema, state.data);\n\t}\n}\n","import { el, list, mount } from 'redom';\n\nexport class Left {\n\tconstructor() {\n\t\tthis.el = el('div.left.packable',\n\t\t\tthis.toggleButton = el('i.togglePacked.button.iconButton.fa.fa-chevron-left')\n\t\t);\n\t\tthis.el.onclick = () => this.el.classList.contains('packed') && this.el.classList.remove('packed');\n\t\tthis.toggleButton.onclick = event => {\n\t\t\tthis.el.classList.add('packed');\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\tupdate(state) {\n\t}\n}\n","import { el, list, mount } from 'redom';\n\nexport class Bottom {\n\tconstructor() {\n\t\tthis.el = el('div.bottom.packable',\n\t\t\tthis.toggleButton = el('i.togglePacked.button.iconButton.fa.fa-chevron-down')\n\t\t);\n\t\tthis.el.onclick = () => this.el.classList.contains('packed') && this.el.classList.remove('packed');\n\t\tthis.toggleButton.onclick = event => {\n\t\t\tthis.el.classList.add('packed');\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\tupdate(state) {\n\t}\n}\n","import Event from '../event';\nimport { el, list, mount } from 'redom';\nimport { TopButton, Top } from './top';\nimport { PropertyEditor } from './propertyEditor';\nimport { Left } from './left';\nimport { Bottom } from './bottom';\n\nexport default class Layout {\n\tconstructor() {\n\t\tthis.el = el('div.editorLayout',\n\t\t\tel('div.nonRight',\n\t\t\t\tthis.top = new Top,\n\t\t\t\tel('div.middle',\n\t\t\t\t\tthis.left = new Left,\n\t\t\t\t\tthis.center = new Center\n\t\t\t\t),\n\t\t\t\tthis.bottom = new Bottom\n\t\t\t),\n\t\t\tthis.propertyEditor = new PropertyEditor\n\t\t);\n\t}\n\tupdate(state) {\n\t\tthis.top.update(state.top);\n\t\tthis.left.update(state.left);\n\t\tthis.center.update(state.center);\n\t\tthis.propertyEditor.update(state.propertyEditor);\n\t\tthis.bottom.update(state.bottom);\n\t}\n\tselect(items) {\n\t\tthis.propertyEditor.update(items);\n\t}\n}\n\nclass Center {\n\tconstructor() {\n\t\tthis.el = el('div.center');\n\t}\n\tupdate(state) {\n\t}\n}\n\nEvent.listen('load', () => {\n\tconsole.log('layout load', componentClasses);\n\t\n\tlet schema = {\n\t\teditors: [\n\t\t\t{\n\t\t\t\tfield: 'yks',\n\t\t\t\ttitle: 'YKS',\n\t\t\t\ttype: 'text'\n\t\t\t}\n\t\t]\n\t};\n\t\n\tlet data = {};\n\t\n\tlet componentArray = Array.from(componentClasses.values());\n\tcomponentArray.forEach(c => {\n\t\tlet componentSchema = {\n\t\t\ttype: 'group',\n\t\t\tfield: c.name,\n\t\t\ttitle: c.name,\n\t\t\teditors: c.propertyModels.map(pm => ({\n\t\t\t\tfield: c.name + '.' + pm.name,\n\t\t\t\ttitle: pm.name.length > 30 ? (pm.name.substring(0, 28) + '..') : pm.name,\n\t\t\t\ttype: propertyTypeToEditorType[pm.type.name] || 'text'\n\t\t\t}))\n\t\t};\n\t\tschema.editors.push(componentSchema);\n\n\t\tlet componentData = {};\n\t\tc.propertyModels.forEach(pm => {\n\t\t\tcomponentData[pm.name] = pm.initialValue;\n\t\t});\n\t\tdata[c.name] = componentData;\n\t});\n\t\n\t\n\tconsole.log('schema', schema, data);\n\t\n\tlet state = {\n\t\ttop: {\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\ticonClass: 'fa fa-bell-o',\n\t\t\t\t\ttext: 'Bell'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ticonClass: 'fa fa-cubes',\n\t\t\t\t\ttext: 'Cubes'\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\tpropertyEditor: {\n\t\t\tschema,\n\t\t\tdata\n\t\t}\n\t};\n\n\tlet layout = new Layout;\n\tlayout.update(state);\n\tmount(document.body, layout);\n});\n","import Event from './event';\nimport Layout from './ui/layout';\nimport { el, list, mount } from 'redom';\n\nimport { componentClasses } from '../core/component';\n\nwindow.addEventListener('load', () => {\n\teditor = new Editor();\n\t\n});\n\nlet propertyTypeToEditorType = {\n\t'float': 'number',\n\t'string': 'text'\n};\n\nlet editor = null;\nclass Editor {\n\tconstructor() {\n\t\tthis.layout = new Layout();\n\t\tthis.selectedItems = [];\n\n\t\tconsole.log('layout load', componentClasses);\n\n\t\tlet schema = {\n\t\t\teditors: [\n\t\t\t\t{\n\t\t\t\t\tfield: 'yks',\n\t\t\t\t\ttitle: 'YKS',\n\t\t\t\t\ttype: 'text'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\tlet data = {};\n\n\t\tlet componentArray = Array.from(componentClasses.values());\n\t\tcomponentArray.forEach(c => {\n\t\t\tlet componentSchema = {\n\t\t\t\ttype: 'group',\n\t\t\t\tfield: c.name,\n\t\t\t\ttitle: c.name,\n\t\t\t\teditors: c.propertyModels.map(pm => ({\n\t\t\t\t\tfield: c.name + '.' + pm.name,\n\t\t\t\t\ttitle: pm.name.length > 30 ? (pm.name.substring(0, 28) + '..') : pm.name,\n\t\t\t\t\ttype: propertyTypeToEditorType[pm.type.name] || 'text'\n\t\t\t\t}))\n\t\t\t};\n\t\t\tschema.editors.push(componentSchema);\n\n\t\t\tlet componentData = {};\n\t\t\tc.propertyModels.forEach(pm => {\n\t\t\t\tcomponentData[pm.name] = pm.initialValue;\n\t\t\t});\n\t\t\tdata[c.name] = componentData;\n\t\t});\n\n\n\t\tconsole.log('schema', schema, data);\n\n\t\tlet state = {\n\t\t\ttop: {\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\ticonClass: 'fa fa-bell-o',\n\t\t\t\t\t\ttext: 'Bell'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ticonClass: 'fa fa-cubes',\n\t\t\t\t\t\ttext: 'Cubes'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tpropertyEditor: {\n\t\t\t\tschema,\n\t\t\t\tdata\n\t\t\t}\n\t\t};\n\n\t\tlet layout = new Layout;\n\t\tlayout.update(state);\n\t\tmount(document.body, layout);\n\t}\n\tselect(items) {\n\t\tthis.selectedItems = items;\n\t\tthis.layout.select(items);\n\t}\n}\n","// tests\nimport './core/test';\nimport './core/componentExample';\n\n// main\nimport './main';\nimport './editor/editor';\n\n\nimport Property from './core/property';\nwindow.Property = Property;\n\nimport PropertyModel from './core/propertyModel';\nwindow.PropertyModel = PropertyModel;\n\nimport PropertyType from './core/propertyType';\nwindow.PropertyType = PropertyType;\n\nimport { Component } from './core/component';\nwindow.Component = Component;\n"],"names":["assert","condition","message","Error","addSerializable","serializable","serializables","has","id","set","removeSerializable","delete","char","BASE_64_CHARACTERS","Math","random","CHAR_COUNT","createStringId","threeLetterPrefix","characters","let","i","PropertyType","propertyName","defaultValue","type","validator","validators","default","description","optionalParameters","forEach","p","validate","PropertyModel","addType","ref","x","name","toJSON","fromJSON","createType","Object","keys","validatorName","createValidator","validatorFunction","parameters","validatorParameters","createElement","query","ns","tag","className","mode","start","length","charCodeAt","HASH","DOT","substring","slice","element","document","createElementNS","text","content","createTextNode","mount","parent","child","before","parentEl","el","childEl","__redom_list","__redom_view","isMounted","remount","insertBefore","appendChild","remounted","mounted","unmount","removeChild","unmounted","arguments$1","arguments","elcache","cloneNode","nodeType","empty","arg","textContent","j","key","value","setAttribute","cssKey","style","setChildren","children","traverse","firstChild","nextSibling","next","list","View","initData","List","this","views","lookup","Map","Serializable","threeLetterType","predefinedId","serializableManager.addSerializable","serializableManager.removeSerializable","toString","JSON","stringify","json","const","ALIVE_ERROR","Entity","super","components","alive","sleeping","prototype","getComponent","get","undefined","getComponents","addComponents","Array","isArray","componentList","push","initComponents","_preInit","_init","makeComponentsSleep","_sleep","deleteComponents","sleep","componentArray","wakeUp","clear","assign","initialValue","parseFloat","isNaN","range","min","max","String","s","console","log","size","float","Property","propertyModel","model","modelId","defineProperty","newValue","_value","componentClasses","Component","componentModel","entity","env","_properties","_componentModel","constructor","propertyModels","requirements","r","_forEachChildComponent","c","preInit","e","error","init","func","reservedPropertyNames","Set","reservedPrototypeMembers","register","k","constructorFunction","deleteFunction","Class","parentClass","properties","category","icon","Prop","string","staticVariable","hiddenVariable","data","lotsOfData","variable","Position","y","howToAccessChildren","Image","property","Sound","SomeComponent","listeners","listen","event","callback","hasOwnProperty","index","indexOf","splice","dispatch","args","call","extend","clone","bind","update","functionKey","newViews","oldViews","newLookup","oldLookup","item","view","__id","el$$1","Router","Views","route","TopButton","state","iconClass","Top","logo","src","buttons","PropertyEditor","editor","toggleButton","onclick","classList","contains","remove","this$1","add","stopPropagation","PJS","$","schema","Left","Bottom","Layout","top","left","center","Center","bottom","propertyEditor","select","items","Event","editors","field","title","from","values","componentSchema","map","pm","propertyTypeToEditorType","componentData","layout","body","window","addEventListener","Editor","selectedItems"],"mappings":"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"}