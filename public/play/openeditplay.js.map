{"version":3,"file":null,"sources":["../node_modules/redom/dist/redom.es.js","../src/core/game.ts"],"sourcesContent":["var text = function (str) { return doc.createTextNode(str); };\n\nfunction mount (parent, child, before) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (isList(childEl)) {\n    childEl = childEl.el;\n  }\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n\n  if (child.isMounted) {\n    child.remount && child.remount();\n  } else {\n    child.mount && child.mount();\n  }\n\n  if (before) {\n    parentEl.insertBefore(childEl, before.el || before);\n  } else {\n    parentEl.appendChild(childEl);\n  }\n\n  if (child.isMounted) {\n    child.remounted && child.remounted();\n  } else {\n    child.isMounted = true;\n    child.mounted && child.mounted();\n  }\n\n  return child;\n}\n\nfunction unmount (parent, child) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  child.unmount && child.unmount();\n\n  parentEl.removeChild(childEl);\n\n  child.isMounted = false;\n  child.unmounted && child.unmounted();\n\n  return child;\n}\n\nfunction setStyle (view, arg1, arg2) {\n  var el = view.el || view;\n\n  if (arguments.length > 2) {\n    el.style[arg1] = arg2;\n  } else if (isString(arg1)) {\n    el.setAttribute('style', arg1);\n  } else {\n    for (var key in arg1) {\n      setStyle(el, key, arg1[key]);\n    }\n  }\n}\n\nfunction setAttr (view, arg1, arg2) {\n  var el = view.el || view;\n  var isSVG = el instanceof window.SVGElement;\n\n  if (arguments.length > 2) {\n    if (arg1 === 'style') {\n      setStyle(el, arg2);\n    } else if (isSVG && isFunction(arg2)) {\n      el[arg1] = arg2;\n    } else if (!isSVG && (arg1 in el || isFunction(arg2))) {\n      el[arg1] = arg2;\n    } else {\n      el.setAttribute(arg1, arg2);\n    }\n  } else {\n    for (var key in arg1) {\n      setAttr(el, key, arg1[key]);\n    }\n  }\n}\n\nfunction parseArguments (element, args) {\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n\n    if (!arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (isString(arg) || isNumber(arg)) {\n      element.appendChild(text(arg));\n    } else if (isNode(arg) || isNode(arg.el) || isList(arg.el)) {\n      mount(element, arg);\n    } else if (arg.length) {\n      parseArguments(element, arg);\n    } else if (typeof arg === 'object') {\n      setAttr(element, arg);\n    }\n  }\n}\n\nvar isString = function (a) { return typeof a === 'string'; };\nvar isNumber = function (a) { return typeof a === 'number'; };\nvar isFunction = function (a) { return typeof a === 'function'; };\n\nvar isNode = function (a) { return a && a.nodeType; };\nvar isList = function (a) { return a && a.__redom_list; };\n\nvar doc = document;\n\nvar HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nfunction createElement (query, ns) {\n  var tag;\n  var id;\n  var className;\n\n  var mode = 0;\n  var start = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n\n    if (char === HASH || char === DOT || !char) {\n      if (mode === 0) {\n        if (i === 0) {\n          tag = 'div';\n        } else if (!char) {\n          tag = query;\n        } else {\n          tag = query.substring(start, i);\n        }\n      } else {\n        var slice = query.substring(start, i);\n\n        if (mode === 1) {\n          id = slice;\n        } else if (className) {\n          className += ' ' + slice;\n        } else {\n          className = slice;\n        }\n      }\n\n      start = i + 1;\n\n      if (char === HASH) {\n        mode = 1;\n      } else {\n        mode = 2;\n      }\n    }\n  }\n\n  var element = ns ? doc.createElementNS(ns, tag) : doc.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    if (ns) {\n      element.setAttribute('class', className);\n    } else {\n      element.className = className;\n    }\n  }\n\n  return element;\n}\n\nvar htmlCache = {};\n\nvar memoizeHTML = function (query) { return htmlCache[query] || createElement(query); };\n\nfunction html (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeHTML(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n}\n\nhtml.extend = function (query) {\n  var clone = memoizeHTML(query);\n\n  return html.bind(this, clone);\n};\n\nvar el = html;\n\nfunction setChildren (parent, children) {\n  if (children.length === undefined) {\n    return setChildren(parent, [children]);\n  }\n\n  var parentEl = parent.el || parent;\n  var traverse = parentEl.firstChild;\n\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = child.el || child;\n\n    if (isList(childEl)) {\n      childEl = childEl.el;\n    }\n\n    if (childEl === traverse) {\n      traverse = traverse.nextSibling;\n      continue;\n    }\n\n    mount(parent, child, traverse);\n  }\n\n  while (traverse) {\n    var next = traverse.nextSibling;\n\n    unmount(parent, traverse);\n\n    traverse = next;\n  }\n}\n\nfunction list (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n}\n\nfunction List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.key = key;\n  this.initData = initData;\n  this.views = [];\n  this.el = getParentEl(parent);\n\n  if (key) {\n    this.lookup = {};\n  }\n}\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\nList.prototype.update = function (data) {\n  if ( data === void 0 ) data = [];\n\n  var View = this.View;\n  var key = this.key;\n  var functionKey = isFunction(key);\n  var initData = this.initData;\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n  var newLookup = key && {};\n  var oldLookup = key && this.lookup;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (key) {\n      var id = functionKey ? key(item) : item[key];\n      view = newViews[i] = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__id = id;\n    } else {\n      view = newViews[i] = oldViews[i] || new View(initData, item, i, data);\n    }\n    var el$$1 = view.el;\n    if (el$$1.__redom_list) {\n      el$$1 = el$$1.el;\n    }\n    el$$1.__redom_view = view;\n    view.update && view.update(item, i, data);\n  }\n\n  setChildren(this, newViews);\n\n  if (key) {\n    this.lookup = newLookup;\n  }\n  this.views = newViews;\n};\n\nfunction getParentEl (parent) {\n  if (isString(parent)) {\n    return html(parent);\n  } else if (isNode(parent.el)) {\n    return parent.el;\n  } else {\n    return parent;\n  }\n}\n\nfunction router (parent, Views, initData) {\n  return new Router(parent, Views, initData);\n}\n\nvar Router = function Router (parent, Views, initData) {\n  this.el = getParentEl(parent);\n  this.Views = Views;\n  this.initData = initData;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.view = View && new View(this.initData, data);\n    this.route = route;\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data, route);\n};\n\nvar SVG = 'http://www.w3.org/2000/svg';\n\nvar svgCache = {};\n\nvar memoizeSVG = function (query) { return svgCache[query] || createElement(query, SVG); };\n\nfunction svg (query) {\n  var args = [], len = arguments.length - 1;\n  while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n  var element;\n\n  if (isString(query)) {\n    element = memoizeSVG(query).cloneNode(false);\n  } else if (isNode(query)) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  parseArguments(element, args);\n\n  return element;\n}\n\nsvg.extend = function (query) {\n  var clone = memoizeSVG(query);\n\n  return svg.bind(this, clone);\n};\n\nexport { html, el, list, List, mount, unmount, router, Router, setAttr, setStyle, setChildren, svg, text };\n","// @flow\n\nimport Serializable from './serializable'\nimport { addChange, changeType, setChangeOrigin } from './serializableManager';\nimport Prototype from './prototype'\nimport assert from '../util/assert'\nimport PropertyOwner, { Prop } from './propertyOwner';\nimport {stickyNonModalErrorPopup} from '../util/popup'\nimport '../modules';\n\nlet propertyTypes = [\n\tProp('name', 'No name', Prop.string)\n];\n\nlet game = null; // only one game at the time\nexport { game };\n\nlet isClient = typeof window !== 'undefined';\n\nexport default class Game extends PropertyOwner {\n\tconstructor(predefinedId) {\n\t\tif (game)\n\t\t\tconsole.error('Only one game allowed.');\n\t\t\n\t\t/*\n\t\tif (isClient) {\n\t\t\tif (game) {\n\t\t\t\ttry {\n\t\t\t\t\tgame.delete();\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn('Deleting old game failed', e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t*/\n\t\t\n\t\tsuper(...arguments);\n\t\t\n\t\tif (isClient) {\n\t\t\tgame = this;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tgameCreateListeners.forEach(listener => listener(game));\n\t\t}, 1);\n\t}\n\tinitWithChildren() {\n\t\tsuper.initWithChildren(...arguments);\n\t\taddChange(changeType.addSerializableToTree, this);\n\t}\n\tdelete() {\n\t\taddChange(changeType.deleteSerializable, this);\n\t\tif (!super.delete()) return false;\n\t\t\n\t\tif (game === this)\n\t\t\tgame = null;\n\n\t\tstickyNonModalErrorPopup('Game deleted');\n\t\t\n\t\treturn true;\n\t}\n}\nPropertyOwner.defineProperties(Game, propertyTypes);\n\nGame.prototype.isRoot = true;\n\n\n\nSerializable.registerSerializable(Game, 'gam', json => {\n\tif (json.c) {\n\t\tjson.c.sort((a, b) => {\n\t\t\tif (a.id.startsWith('prt') || a.id.startsWith('pfa'))\n\t\t\t\treturn -1;\n\t\t\telse\n\t\t\t\treturn 1;\n\t\t});\n\t}\n\treturn new Game(json.id);\n});\n\nlet gameCreateListeners = [];\nexport function listenGameCreation(listener: (object) => void) {\n\tgameCreateListeners.push(listener);\n\t\n\tconsole.log('real ts');\n\n\tif (game)\n\t\tlistener(game);\n}\n\n\n// jee\n\n\n"],"names":["arguments","Prop","isClient"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}