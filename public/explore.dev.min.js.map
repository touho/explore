{"version":3,"file":null,"sources":["../src/assert.js","../src/core/serializableManager.js","../src/core/serializable.js","../src/core/property.js","../src/core/propertyType.js","../src/core/dataTypes.js","../src/core/propertyOwner.js","../src/core/entity.js","../src/core/scene.js","../src/core/componentData.js","../src/core/component.js","../src/components/Transform.js","../src/components/Test.js","../src/util/input.js","../src/components/Mover.js","../src/components/Rect.js","../src/core/prototype.js","../src/core/entityPrototype.js","../src/components/Spawner.js","../src/core/game.js","../src/util/compression.js","../src/util/net.js","../src/core/test.js","../src/core/componentExample.js","../src/editor/events.js","../node_modules/redom/dist/redom.es.js","../src/editor/layout/moduleContainer.js","../src/editor/layout/layout.js","../src/editor/module/module.js","../src/core/level.js","../src/editor/module/topBar.js","../src/editor/views/popup/popup.js","../src/editor/views/propertyEditorTypes.js","../src/editor/views/popup/componentAdder.js","../src/editor/util/sceneEdit.js","../src/editor/views/propertyEditor.js","../src/editor/module/type.js","../src/editor/module/instance.js","../src/editor/module/scene.js","../src/editor/module/types.js","../src/editor/module/instances.js","../src/editor/module/test3.js","../src/editor/editor.js","../src/mainDev.js"],"sourcesContent":["export default function assert(condition, message) {\n\tif (!condition) {\n\t\tdebugger;\n\t\tthrow new Error(message);\n\t}\n}\n","import assert from '../assert';\nimport Serializable from './serializable';\n\nexport let serializables = {};\nwindow.serializables = serializables;\n\nlet DEBUG_CHANGES = 0;\n\nexport function addSerializable(serializable) {\n\tassert(serializables[serializable.id] === undefined, 'Serializable id clash');\n\tserializables[serializable.id] = serializable;\n}\n\nexport function getSerializable(id) {\n\treturn serializables[id] || null;\n}\n\nexport function hasSerializable(id) {\n\treturn Boolean(serializables[id]);\n}\n\nexport function removeSerializable(id) {\n\tif (serializables[id])\n\t\tdelete serializables[id];\n\telse\n\t\tthrow new Error('Serializable not found!');\n}\n\n// reference parameters are not sent over net. they are helpers in local game instance\nexport let changeType = {\n\taddSerializableToTree: 'a', // parentId, reference\n\tsetPropertyValue: 's', // id, value\n\tdeleteSerializable: 'd', // id\n\tmove: 'm', // id, parentId\n\tdeleteAllChildren: 'c', // id\n};\nlet keyToShortKey = {\n\tid: 'i', // obj.id\n\ttype: 't', // changeType.*\n\tvalue: 'v', // value after toJSON\n\tparentId: 'p' // obj._parent.id\n};\nlet shortKeyToKey = {};\nObject.keys(keyToShortKey).forEach(k => {\n\tshortKeyToKey[keyToShortKey[k]] = k;\n});\n\nlet origin;\nlet previousVisualOrigin;\nfunction resetOrigin() {\n\torigin = null;\n}\nexport function setChangeOrigin(_origin) {\n\tif (_origin !== origin) {\n\t\torigin = _origin;\n\t\tif (DEBUG_CHANGES && _origin && _origin !== previousVisualOrigin) {\n\t\t\tconsole.log('origin', previousVisualOrigin);\n\t\t\tpreviousVisualOrigin = _origin;\n\t\t}\n\t\tsetTimeout(resetOrigin);\n\t}\n}\n\nlet externalChange = false;\nexport function addChange(type, reference) {\n\tassert(origin, 'Change without origin!');\n\tif (!reference.id) return;\n\t\n\tlet change = {\n\t\ttype,\n\t\treference,\n\t\tid: reference.id,\n\t\texternal: externalChange,\n\t\torigin\n\t};\n\tif (type === changeType.setPropertyValue) {\n\t\tchange.value = reference._value;\n\t} else if (type === changeType.move) {\n\t\tchange.parent = reference._parent;\n\t} else if (type === changeType.addSerializableToTree) {\n\t\tchange.parent = reference._parent;\n\t\tdelete change.id;\n\t}\n\t\n\tif (DEBUG_CHANGES)\n\t\tconsole.log('change', change);\n\t\n\tlisteners.forEach(l => l(change));\n}\n\nexport function executeExternal(callback) {\n\tsetChangeOrigin('external');\n\tif (externalChange) return callback();\n\texternalChange = true;\n\tcallback();\n\texternalChange = false;\n}\n\nlet listeners = [];\n\nexport function addChangeListener(callback) {\n\tassert(typeof callback === 'function');\n\tlisteners.push(callback);\n}\n\nexport function packChange(change) {\n\tif (change.parent)\n\t\tchange.parentId = change.parent.id;\n\tif (change.value)\n\t\tchange.value = change.reference.propertyType.type.toJSON(change.value);\n\tif (change.type === changeType.addSerializableToTree) {\n\t\tchange.value = change.reference.toJSON();\n\t}\n\t\n\tlet packed = {};\n\t\n\tObject.keys(keyToShortKey).forEach(key => {\n\t\tif (change[key]) {\n\t\t\tif (key === 'type' && change[key] === changeType.setPropertyValue) return; // optimize most common type\n\t\t\tpacked[keyToShortKey[key]] = change[key];\n\t\t}\n\t});\n\treturn packed;\n}\n\nexport function unpackChange(packedChange) {\n\tlet change = {};\n\tObject.keys(packedChange).forEach(shortKey => {\n\t\tlet key = shortKeyToKey[shortKey];\n\t\tchange[key] = packedChange[shortKey];\n\t});\n\tif (!change.type)\n\t\tchange.type = changeType.setPropertyValue;\n\tchange.reference = getSerializable(change.id);\n\tif (change.type === changeType.addSerializableToTree) {\n\t}\n\telse if (!change.reference) {\n\t\tconsole.error('received a change with unknown id', change);\n\t\treturn null;\n\t}\n\tif (change.parentId)\n\t\tchange.parent = getSerializable(change.parentId);\n\treturn change;\n}\n\nexport function executeChange(change) {\n\tlet newScene;\n\t\n\texecuteExternal(() => {\n\t\tconsole.log('execute change', change);\n\t\tif (change.type === changeType.setPropertyValue) {\n\t\t\tchange.reference.value = change.reference.propertyType.type.fromJSON(change.value);\n\t\t} else if (change.type === changeType.addSerializableToTree) {\n\t\t\tif (change.parent) {\n\t\t\t\tlet obj = Serializable.fromJSON(change.value);\n\t\t\t\tchange.parent.addChild(obj);\n\t\t\t\tif (obj.threeLetterType === 'ent') {\n\t\t\t\t\tobj.localMaster = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet obj = Serializable.fromJSON(change.value); // Scene does not need a parent\n\t\t\t\tif (obj.threeLetterType === 'sce')\n\t\t\t\t\tnewScene = obj;\n\t\t\t}\n\t\t} else if (change.type === changeType.deleteAllChildren) {\n\t\t\tchange.reference.deleteChildren();\n\t\t} else if (change.type === changeType.deleteSerializable) {\n\t\t\tchange.reference.delete();\n\t\t} else if (change.type === changeType.move) {\n\t\t\tchange.reference.move(change.parent);\n\t\t}\n\t});\n\t\n\tif (newScene)\n\t\tnewScene.play();\n}\n","import assert from '../assert';\nimport * as serializableManager from './serializableManager';\n\nconst CHARACTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'; // 62 chars\nconst CHAR_COUNT = CHARACTERS.length;\nfunction char() {\n\treturn CHARACTERS[Math.random() * CHAR_COUNT | 0];\n}\nexport function createStringId(threeLetterPrefix = '???', characters = 16) {\n\tlet id = threeLetterPrefix;\n\tfor (let i = characters - 1; i !== 0; --i)\n\t\tid += char();\n\treturn id;\n}\n\nlet serializableClasses = new Map();\n\nexport default class Serializable {\n\tconstructor(predefinedId = false) {\n\t\tassert(this.threeLetterType, 'Forgot to Serializable.registerSerializable your class?');\n\t\tthis._children = new Map(); // threeLetterType -> array\n\t\tthis._listeners = [];\n\t\tthis._isInTree = this.isRoot;\n\t\tif (predefinedId) {\n\t\t\tthis._state |= Serializable.STATE_PREDEFINEDID;\n\t\t\tthis.id = predefinedId;\n\t\t} else {\n\t\t\tthis.id = createStringId(this.threeLetterType);\n\t\t}\n\t\tif (this.id.startsWith('?'))\n\t\t\tthrow new Error('?');\n\t\tserializableManager.addSerializable(this);\n\t\tthis._state |= Serializable.STATE_CONSTRUCTOR;\n\t}\n\tdelete() {\n\t\tif (this._parent) {\n\t\t\tthis._parent.deleteChild(this);\n\t\t\treturn;\n\t\t}\n\t\tthis.deleteChildren();\n\t\tthis._alive = false;\n\t\tthis._isInTree = false;\n\t\tthis._listeners.length = 0;\n\t\tserializableManager.removeSerializable(this.id);\n\t\tthis._state |= Serializable.STATE_DESTROY;\n\t}\n\tdeleteChildren() {\n\t\tif (this._children.size) {\n\t\t\tthis._children.forEach(array => {\n\t\t\t\tarray.forEach(child => {\n\t\t\t\t\tchild._parent = null;\n\t\t\t\t\tchild.delete();\n\t\t\t\t});\n\t\t\t});\n\t\t\tthis._children.clear();\n\n\t\t\tif (this._parent) {\n\t\t\t\t\n\t\t\t\tserializableManager.addChange(serializableManager.changeType.deleteAllChildren, this);\n\t\t\t}\n\t\t}\n\t}\n\t// this is called right after constructor\n\tinitWithChildren(children = []) {\n\t\tassert(!(this._state & Serializable.STATE_INIT), 'init already done');\n\t\tthis._state |= Serializable.STATE_INIT;\n\t\tif (children.length > 0)\n\t\t\tthis.addChildren(children);\n\t\treturn this;\n\t}\n\taddChildren(children) {\n\t\tfor (let i = 0; i < children.length; i++)\n\t\t\tthis.addChild(children[i]);\n\t\treturn this;\n\t}\n\taddChild(child) {\n\t\t\n\t\tthis._addChild(child);\n\t\t\n\t\t\n\t\tthis._state |= Serializable.STATE_ADDCHILD;\n\t\t\n\t\tif (this._isInTree)\n\t\t\tserializableManager.addChange(serializableManager.changeType.addSerializableToTree, child);\n\t\treturn this;\n\t}\n\t_addChild(child) {\n\t\tassert(child._parent === null);\n\t\t\n\t\tlet array = this._children.get(child.threeLetterType);\n\t\tif (array === undefined) {\n\t\t\tarray = [];\n\t\t\tthis._children.set(child.threeLetterType, array);\n\t\t}\n\t\tarray.push(child);\n\t\tchild._parent = this;\n\t\tchild._state |= Serializable.STATE_ADDPARENT;\n\t\tchild.setInTreeStatus(this._isInTree);\n\t\t\n\t\treturn this;\n\t}\n\tfindChild(threeLetterType, filterFunction) {\n\t\tlet array = this._children.get(threeLetterType);\n\t\tif (!array) return null;\n\t\tif (filterFunction)\n\t\t\treturn array.find(filterFunction) || null;\n\t\telse\n\t\t\treturn array[0];\n\t}\n\tfindParent(threeLetterType, filterFunction = null) {\n\t\tlet parent = this;\n\t\twhile (parent) {\n\t\t\tif (parent.threeLetterType === threeLetterType && (!filterFunction || filterFunction(parent)))\n\t\t\t\treturn parent;\n\t\t\tparent = parent._parent;\n\t\t}\n\t\treturn null;\n\t}\n\tgetRoot() {\n\t\tlet element = this;\n\t\twhile (element._parent)\n\t\t\telement = element._parent;\n\t\treturn element;\n\t}\n\tdeleteChild(child) {\n\t\t\n\t\tserializableManager.addChange(serializableManager.changeType.deleteSerializable, child);\n\t\tthis._detachChild(child);\n\t\tchild.delete();\n\t\treturn this;\n\t}\n\t_detachChild(child) {\n\t\tlet array = this._children.get(child.threeLetterType);\n\t\tlet idx = array.indexOf(child);\n\t\tassert(idx >= 0, 'child not found');\n\t\tarray.splice(idx, 1);\n\t\tif (array.length === 0)\n\t\t\tthis._children.delete(child.threeLetterType);\n\t\tchild._parent = null;\n\t\tchild.setInTreeStatus(false);\n\t\t\n\t\treturn this;\n\t}\n\tforEachChild(threeLetterType = null, callback, deep = false) {\n\t\tfunction processArray(array) {\n\t\t\tarray.forEach(child => {\n\t\t\t\tcallback(child);\n\t\t\t\tdeep && child.forEachChild(threeLetterType, callback, true);\n\t\t\t});\n\t\t}\n\t\tif (threeLetterType) {\n\t\t\tprocessArray(this._children.get(threeLetterType) || []);\n\t\t} else {\n\t\t\tthis._children.forEach(processArray);\n\t\t}\n\t\treturn this;\n\t}\n\tmove(newParent) {\n\t\t\n\t\tnewParent._addChild(this._detach());\n\n\t\tserializableManager.addChange(serializableManager.changeType.move, this);\n\t\t\n\t\treturn this;\n\t}\n\t_detach() {\n\t\tthis._parent && this._parent._detachChild(this);\n\t\treturn this;\n\t}\n\tgetParent() {\n\t\treturn this._parent || null;\n\t}\n\tgetChildren(threeLetterType) {\n\t\treturn this._children.get(threeLetterType) || [];\n\t}\n\ttoJSON() {\n\t\tlet json = {\n\t\t\tid: this.id\n\t\t};\n\t\tif (this._children.size > 0) {\n\t\t\tlet arrays = [];\n\t\t\t// prototypes must come before a level\n\t\t\tArray.from(this._children.keys()).sort((a, b) => a === 'prt' ? -1 : 1)\n\t\t\t\t.forEach(key => arrays.push(this._children.get(key)));\n\t\t\tjson.c = [].concat(...arrays).map(child => child.toJSON());\n\t\t}\n\t\treturn json;\n\t}\n\ttoString() {\n\t\treturn JSON.stringify(this.toJSON(), null, 4);\n\t}\n\tclone() {\n\t\tlet obj = new this.constructor();\n\t\tlet children = [];\n\t\tthis.forEachChild(null, child => {\n\t\t\tchildren.push(child.clone());\n\t\t});\n\t\tobj.initWithChildren(children);\n\t\tthis._state |= Serializable.STATE_CLONE;\n\t\treturn obj;\n\t}\n\tlisten(event, callback) {\n\t\tif (!this._listeners.hasOwnProperty(event)) {\n\t\t\tthis._listeners[event] = [];\n\t\t}\n\t\tthis._listeners[event].push(callback);\n\t\treturn () => {\n\t\t\tvar index = this._listeners[event].indexOf(callback);\n\t\t\tthis._listeners[event].splice(index, 1);\n\t\t};\n\t}\n\tdispatch(event, ...args) {\n\t\tif (this._listeners.hasOwnProperty(event)) {\n\t\t\tfor (var i = 0; i < this._listeners[event].length; ++i) {\n\t\t\t\ttry {\n\t\t\t\t\tthis._listeners[event][i].apply(null, args);\n\t\t\t\t} catch(e) {\n\t\t\t\t\tconsole.error(`Event ${event} listener crashed.`, this._listeners[event][i], e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\thasDescendant(child) {\n\t\tif (!child) return false;\n\t\tlet parent = child._parent;\n\t\twhile (parent) {\n\t\t\tif (parent === this) return true;\n\t\t\tparent = parent._parent;\n\t\t}\n\t\treturn false;\n\t}\n\tsetInTreeStatus(isInTree) {\n\t\tif (this._isInTree === isInTree)\n\t\t\treturn;\n\t\t\n\t\tthis._isInTree = isInTree;\n\t\tthis._children.forEach(array => {\n\t\t\tarray.forEach(child => child.setInTreeStatus(isInTree));\n\t\t});\n\t}\n\tstatic fromJSON(json) {\n\t\tassert(typeof json.id === 'string' && json.id.length > 5, 'Invalid id.');\n\t\tlet fromJSON = serializableClasses.get(json.id.substring(0, 3));\n\t\tassert(fromJSON);\n\t\tlet obj;\n\t\ttry {\n\t\t\tobj = fromJSON(json);\n\t\t} catch(e) {\n\t\t\tif (!window.force)\n\t\t\t\tdebugger; // Type 'force = true' in console to ignore failed imports.\n\t\t\t\n\t\t\tif (!window.force)\n\t\t\t\tthrow new Error();\n\t\t\treturn null;\n\t\t}\n\t\tlet children = json.c ? json.c.map(child => Serializable.fromJSON(child)).filter(Boolean) : [];\n\t\tif (obj._state & Serializable.STATE_INIT)\n\t\t\tobj.addChildren(children);\n\t\telse\n\t\t\tobj.initWithChildren(children);\n\t\tobj._state |= Serializable.STATE_FROMJSON;\n\t\treturn obj;\n\t}\n\tstatic registerSerializable(Class, threeLetterType, fromJSON = null) {\n\t\tClass.prototype.threeLetterType = threeLetterType;\n\t\tassert(typeof threeLetterType === 'string' && threeLetterType.length === 3);\n\t\tif (!fromJSON)\n\t\t\tfromJSON = json => new Class(json.id);\n\t\tserializableClasses.set(threeLetterType, fromJSON);\n\t}\n}\n\nSerializable.prototype._parent = null;\nSerializable.prototype._alive = true;\nSerializable.prototype._state = 0;\n\nSerializable.STATE_CONSTRUCTOR = 1;\nSerializable.STATE_INIT = 2;\nSerializable.STATE_ADDCHILD = 4;\nSerializable.STATE_ADDPARENT = 8;\nSerializable.STATE_CLONE = 16;\nSerializable.STATE_DESTROY = 32;\nSerializable.STATE_FROMJSON = 64;\nSerializable.STATE_PREDEFINEDID = 128;\n\nSerializable.prototype.isRoot = false; // If this should be a root node\nObject.defineProperty(Serializable.prototype, 'debug', {\n\tget() {\n\t\tlet info = this.threeLetterType;\n\n\t\tthis._children.forEach((value, key) => {\n\t\t\tinfo += '|';\n\t\t\tif (key === 'prp')\n\t\t\t\tinfo += this.getChildren('prp').map(p => `${p.name}=${p._value}`).join(', ');\n\t\t\telse\n\t\t\t\tinfo += `${key}(${value.length})`;\n\t\t});\n\t\t\n\t\tinfo += '|state: ';\n\t\t\n\t\tlet states = [];\n\t\tlet logState = (state, stateString) => {\n\t\t\tif (this._state & state)\n\t\t\t\tstates.push(stateString);\n\t\t};\n\t\t\n\t\tlogState(Serializable.STATE_CONSTRUCTOR, 'constructor');\n\t\tlogState(Serializable.STATE_INIT, 'init');\n\t\tlogState(Serializable.STATE_ADDCHILD, 'add child');\n\t\tlogState(Serializable.STATE_ADDPARENT, 'add parent');\n\t\tlogState(Serializable.STATE_CLONE, 'clone');\n\t\tlogState(Serializable.STATE_DESTROY, 'destroy');\n\t\tlogState(Serializable.STATE_FROMJSON, 'from json');\n\t\tlogState(Serializable.STATE_PREDEFINEDID, 'predefined id');\n\t\t\n\t\tinfo += states.join(', ');\n\t\t\n\t\treturn info;\n\t}\n});\nObject.defineProperty(Serializable.prototype, 'debugChildren', {\n\tget() {\n\t\tlet c = [];\n\t\tthis._children.forEach((value, key) => {\n\t\t\tc = c.concat(value);\n\t\t});\n\t\t\n\t\tlet children = [];\n\t\t\n\t\tfunction createDebugObject(type) {\n\t\t\tif (type === 'gam') return new function Game(){};\n\t\t\tif (type === 'sce') return new function Scene(){};\n\t\t\tif (type === 'prt') return new function Prototype(){};\n\t\t\tif (type === 'prp') return new function Property(){};\n\t\t\tif (type === 'cda') return new function ComponentData(){};\n\t\t\tif (type === 'com') return new function Component(){};\n\t\t\tif (type === 'epr') return new function EntityPrototype(){};\n\t\t\tif (type === 'ent') return new function Entity(){};\n\t\t\tif (type === 'lvl') return new function Level(){};\n\t\t\treturn new function Other(){};\n\t\t}\n\n\t\tc.forEach(child => {\n\t\t\tlet obj = createDebugObject(child.threeLetterType);\n\t\t\t\n\t\t\tobj.debug = child.debug;\n\t\t\tobj.ref = child;\n\t\t\tlet c = child.debugChildArray;\n\t\t\tif (c && c.length > 0)\n\t\t\t\tobj.children = c;\n\t\t\tchildren.push(obj);\n\t\t});\n\n\t\treturn children;\n\t}\n});\n","import Serializable from './serializable';\nimport { addChange, changeType } from './serializableManager'; \nimport assert from '../assert';\n\n// Instance of a property\nexport default class Property extends Serializable {\n\t// set skipSerializableRegistering=true if you are not planning to add this property to the hierarchy\n\t// if you give propertyType, value in real value form\n\t// if you don't give propertyType (give it later), value as JSON form\n\tconstructor({ value, predefinedId, name, propertyType, skipSerializableRegistering = false }) {\n\t\tassert(name, 'Property without a name can not exist');\n\t\tif (!skipSerializableRegistering)\n\t\t\tsuper(predefinedId);\n\t\tthis._initialValue = value;\n\t\tif (propertyType)\n\t\t\tthis.setPropertyType(propertyType);\n\t\telse {\n\t\t\tthis.name = name;\n\t\t\tthis._initialValueIsJSON = true;\n\t\t}\n\t}\n\tsetPropertyType(propertyType) {\n\t\tthis.propertyType = propertyType;\n\t\ttry {\n\t\t\tif (this._initialValue !== undefined)\n\t\t\t\tthis.value = this._initialValueIsJSON ? propertyType.type.fromJSON(this._initialValue) : this._initialValue;\n\t\t\telse\n\t\t\t\tthis.value = propertyType.initialValue;\n\t\t} catch(e) {\n\t\t\tconsole.log('Invalid value', e, propertyType, this);\n\t\t\tthis.value = propertyType.initialValue;\n\t\t}\n\t\tthis.name = propertyType.name;\n\t}\n\tclone(skipSerializableRegistering = false) {\n\t\treturn new Property({\n\t\t\tvalue: this.propertyType.type.clone(this.value),\n\t\t\tname: this.name,\n\t\t\tpropertyType: this.propertyType,\n\t\t\tskipSerializableRegistering\n\t\t});\n\t}\n\ttoJSON() {\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tv: this.type.toJSON(this.value),\n\t\t\tn: this.propertyType.name\n\t\t});\n\t}\n}\nProperty.prototype.propertyType = null;\nObject.defineProperty(Property.prototype, 'type', {\n\tget() {\n\t\treturn this.propertyType.type;\n\t}\n});\nObject.defineProperty(Property.prototype, 'value', {\n\tset(newValue) {\n\t\tthis._value = this.propertyType.validator.validate(newValue);\n\t\t\n\t\tif (this._isInTree)\n\t\t\taddChange(changeType.setPropertyValue, this);\n\t},\n\tget() {\n\t\treturn this._value;\n\t}\n});\n\nSerializable.registerSerializable(Property, 'prp', json => {\n\treturn new Property({\n\t\tvalue: json.v,\n\t\tpredefinedId: json.id,\n\t\tname: json.n\n\t});\n});\n\nObject.defineProperty(Property.prototype, 'debug', {\n\tget() {\n\t\treturn `prp ${this.name}=${this.value}`;\n\t}\n});\n","import assert from '../assert';\nimport Property from './property';\n\n// info about type, validator, validatorParameters, initialValue\n\n\n\nclass PropertyType {\n\tconstructor(name, type, validator, initialValue, description, flags = []) {\n\t\tassert(typeof name === 'string');\n\t\tassert(name[0] >= 'a' && name[0] <= 'z', 'Name of a property must start with lower case letter.');\n\t\tassert(type && typeof type.name === 'string');\n\t\tassert(validator && typeof validator.validate === 'function');\n\t\t\n\t\tthis.name = name;\n\t\tthis.type = type;\n\t\tthis.validator = validator;\n\t\tthis.initialValue = initialValue;\n\t\tthis.description = description;\n\t\tthis.flags = {};\n\t\tflags.forEach(f => this.flags[f.type] = f);\n\t}\n\tgetFlag(flag) {\n\t\treturn this.flags[flag.type];\n\t}\n\tcreateProperty({ value, predefinedId, skipSerializableRegistering = false } = {}) {\n\t\treturn new Property({\n\t\t\tpropertyType: this,\n\t\t\tvalue,\n\t\t\tpredefinedId,\n\t\t\tname: this.name,\n\t\t\tskipSerializableRegistering\n\t\t});\n\t}\n}\n\n/*\n\tBeautiful way of creating property types\n\t\n\toptionalParameters:\n\t\tdescription: 'Example',\n\t\tvalidator: PropertyType.\n */\nexport default function createPropertyType(propertyName, defaultValue, type, ...optionalParameters) {\n\ttype = type();\n\tlet validator = type.validators.default();\n\tlet description = '';\n\tlet flags = [];\n\toptionalParameters.forEach(p => {\n\t\tif (typeof p === 'string')\n\t\t\tdescription = p;\n\t\telse if (p && p.validate)\n\t\t\tvalidator = p;\n\t\telse if (p && p.isFlag) {\n\t\t\tflags.push(p);\n\t\t} else\n\t\t\tassert(false, 'invalid parameter ' + p);\n\t});\n\treturn new PropertyType(propertyName, type, validator, defaultValue, description, flags);\n};\n\nexport { createPropertyType as dataType };\n\nfunction createFlag(type, func = {}) {\n\tfunc.isFlag = true;\n\tfunc.type = type;\n\treturn func;\n}\n\ncreatePropertyType.flagDegreesInEditor = createFlag('degreesInEditor');\n\nexport function createDataType({\n\tname = '',\n\tvalidators = { default: x => x }, // default must exist\n\ttoJSON = x => x,\n\tfromJSON = x => x,\n\tclone = x => x\n}) {\n\tassert(name, 'name missing from property type');\n\tassert(typeof validators.default === 'function','default validator missing from property type: ' + name);\n\tassert(typeof toJSON === 'function', 'invalid toJSON for property type: ' + name);\n\tassert(typeof fromJSON === 'function', 'invalid fromJSON for property type: ' + name);\n\n\tlet type = {\n\t\tname,\n\t\tvalidators,\n\t\ttoJSON,\n\t\tfromJSON,\n\t\tclone\n\t};\n\tlet createType = () => type;\n\n\tObject.keys(validators).forEach(validatorName => {\n\t\tcreateType[validatorName] = createValidator(validatorName, validators[validatorName]);\n\t\tvalidators[validatorName] = createType[validatorName];\n\t});\n\treturn createType;\n}\n\nfunction createValidator(name, validatorFunction) {\n\tlet validator = function() {\n\t\tlet parameters = [...arguments];\n\t\treturn {\n\t\t\tvalidatorName: name,\n\t\t\tvalidatorParameters: parameters,\n\t\t\tvalidate: x => validatorFunction(x, ...parameters),\n\t\t\tparameters\n\t\t};\n\t};\n\tvalidator.validatorName = name;\n\tvalidator.validate = validatorFunction;\n\treturn validator;\n}\n","import assert from '../assert';\nimport { createDataType, dataType } from './propertyType';\n\nfunction validateFloat(val) {\n\tif (isNaN(val) || val === Infinity || val === -Infinity)\n\t\tthrow new Error('Invalid float: ' + val);\n}\n\nconst FLOAT_JSON_PRECISION = 4;\nconst FLOAT_DELTA = 0.0000001;\n\ndataType.float = createDataType({\n\tname: 'float',\n\tvalidators: {\n\t\tdefault(x) {\n\t\t\tx = parseFloat(x);\n\t\t\tvalidateFloat(x);\n\t\t\treturn x;\n\t\t},\n\t\t// PropertyType.float.range(min, max)\n\t\trange(x, min, max) {\n\t\t\tx = parseFloat(x);\n\t\t\tvalidateFloat(x);\n\t\t\treturn Math.min(max, Math.max(min, x));\n\t\t},\n\t\tmodulo(x, min, max) {\n\t\t\tx = parseFloat(x);\n\t\t\tvalidateFloat(x);\n\t\t\t\n\t\t\tlet range = max - min;\n\t\t\t\n\t\t\tif (x < min) {\n\t\t\t\tx += (((min - x) / range | 0) + 1) * range;\n\t\t\t} else if (x > max - FLOAT_DELTA) {\n\t\t\t\tx -= (((x - max) / range | 0) + 1) * range;\n\t\t\t}\n\t\t\t\n\t\t\treturn x;\n\t\t}\n\t},\n\ttoJSON: x => +x.toFixed(FLOAT_JSON_PRECISION),\n\tfromJSON: x => x\n});\ndataType.int = createDataType({\n\tname: 'int',\n\tvalidators: {\n\t\tdefault(x) {\n\t\t\tx = parseInt(x);\n\t\t\tvalidateFloat(x);\n\t\t\treturn x;\n\t\t},\n\t\t// PropertyType.float.range(min, max)\n\t\trange(x, min, max) {\n\t\t\tx = parseInt(x);\n\t\t\tvalidateFloat(x);\n\t\t\treturn Math.min(max, Math.max(min, x));\n\t\t}\n\t},\n\ttoJSON: x => x,\n\tfromJSON: x => x\n});\n\ndataType.vector = createDataType({\n\tname: 'vector',\n\tvalidators: {\n\t\tdefault(vec) {\n\t\t\tif (!(vec instanceof Victor))\n\t\t\t\tthrow new Error();\n\t\t\tvec.x = parseFloat(vec.x);\n\t\t\tvec.y = parseFloat(vec.y);\n\t\t\tvalidateFloat(vec.x);\n\t\t\tvalidateFloat(vec.y);\n\t\t\treturn vec;\n\t\t}\n\t},\n\ttoJSON: vec => ({\n\t\tx: +vec.x.toFixed(FLOAT_JSON_PRECISION),\n\t\ty: +vec.y.toFixed(FLOAT_JSON_PRECISION)\n\t}),\n\tfromJSON: vec => Victor.fromObject(vec),\n\tclone: vec => vec.clone()\n});\n\ndataType.string = createDataType({\n\tname: 'string',\n\tvalidators: {\n\t\tdefault: x => x ? String(x) : ''\n\t},\n\ttoJSON: x => x,\n\tfromJSON: x => x\n});\n\ndataType.bool = createDataType({\n\tname: 'bool',\n\tvalidators: {\n\t\tdefault(x) {\n\t\t\tif (typeof x !== 'boolean')\n\t\t\t\tthrow new Error();\n\t\t\treturn x;\n\t\t}\n\t},\n\ttoJSON: x => x ? 1 : 0,\n\tfromJSON: x => !!x\n});\n\ndataType.enum = createDataType({\n\tname: 'enum',\n\tvalidators: {\n\t\tdefault() {\n\t\t\tassert(false, `also specify enum values with Prop.enum.values('value1', 'value2', ...)`);\n\t\t},\n\t\tvalues(x, ...values) {\n\t\t\tif (!Array.isArray(values))\n\t\t\t\tthrow new Error();\n\t\t\tif (typeof x !== 'string')\n\t\t\t\tthrow new Error('val should be string');\n\t\t\tif (values.indexOf(x) < 0)\n\t\t\t\tthrow new Error('value not in enum');\n\t\t\treturn x;\n\t\t}\n\t},\n\ttoJSON: x => x,\n\tfromJSON: x => x\n});\n","import Serializable from './serializable';\nimport assert from '../assert';\nimport { getSerializable } from './serializableManager';\nexport { default as Prop } from './propertyType';\n\nexport default class PropertyOwner extends Serializable {\n\tconstructor(predefinedId = false) {\n\t\tassert(Array.isArray(this.constructor._propertyTypes), 'call PropertyOwner.defineProperties after class definition');\n\t\tsuper(predefinedId);\n\t\tthis._properties = {};\n\t}\n\t// Just a helper\n\tinitWithPropertyValues(values = {}) {\n\t\tlet children = [];\n\t\t\n\t\tObject.keys(values).forEach(propName => {\n\t\t\tlet propertyType = this.constructor._propertyTypesByName[propName];\n\t\t\tassert(propertyType, 'Invalid property ' + propName);\n\t\t\tchildren.push(propertyType.createProperty({\n\t\t\t\tvalue: values[propName]\n\t\t\t}));\n\t\t});\n\t\tthis.initWithChildren(children);\n\t\treturn this;\n\t}\n\tinitWithChildren(children = []) {\n\t\tassert(!(this._state & Serializable.STATE_INIT), 'init already done');\n\t\tthis._state |= Serializable.STATE_INIT;\n\t\t\n\t\tlet propChildren = [];\n\t\tlet otherChildren = [];\n\t\t// Separate Property children and other children\n\t\tchildren.forEach(child => {\n\t\t\tif (child.threeLetterType === 'prp') {\n\t\t\t\tpropChildren.push(child);\n\t\t\t} else {\n\t\t\t\totherChildren.push(child);\n\t\t\t}\n\t\t});\n\t\tsuper.addChildren(otherChildren);\n\t\t\n\t\tlet invalidPropertiesCount = 0;\n\t\t\n\t\t// Make sure Properties have a PropertyType. They don't work without it.\n\t\tpropChildren.filter(prop => !prop.propertyType).forEach(prop => {\n\t\t\tif (!this.constructor._propertyTypesByName[prop.name]) {\n\t\t\t\tconsole.log('Property of that name not defined', this.id, prop.name, this);\n\t\t\t\tinvalidPropertiesCount++;\n\t\t\t\tprop.isInvalid = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprop.setPropertyType(this.constructor._propertyTypesByName[prop.name]);\n\t\t});\n\t\tif (invalidPropertiesCount)\n\t\t\tpropChildren = propChildren.filter(p => !p.isInvalid);\n\t\t\n\t\t// Make sure all PropertyTypes have a matching Property\n\t\tlet nameToProp = {};\n\t\tpropChildren.forEach(c => nameToProp[c.name] = c);\n\t\tthis.constructor._propertyTypes.forEach(propertyType => {\n\t\t\tif (!nameToProp[propertyType.name])\n\t\t\t\tpropChildren.push(propertyType.createProperty());\n\t\t});\n\t\t\n\t\tsuper.addChildren(propChildren);\n\t};\n\taddChild(child) {\n\t\tassert(this._state & Serializable.STATE_INIT, this.constructor.componentName + ' requires that initWithChildren will be called before addChild');\n\t\tsuper.addChild(child);\n\t\tif (child.threeLetterType === 'prp') {\n\t\t\tif (!child.propertyType) {\n\t\t\t\tif (!this.constructor._propertyTypesByName[child.name]) {\n\t\t\t\t\tconsole.log('Property of that name not defined', this.id, child, this);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tchild.setPropertyType(this.constructor._propertyTypesByName[child.name]);\n\t\t\t}\n\t\t\tassert(this._properties[child.propertyType.name] === undefined, 'Property already added');\n\t\t\tthis._properties[child.propertyType.name] = child;\n\t\t}\n\t};\n\tdelete() {\n\t\tsuper.delete();\n\t\tthis._properties = {};\n\t}\n\tdeleteChild(child) {\n\t\tassert(child.threeLetterType !== 'prp', 'Can not delete just one Property child.');\n\t\tsuper.deleteChild(child);\n\t}\n}\n\nPropertyOwner.defineProperties = function(Class, propertyTypes) {\n\tClass._propertyTypes = propertyTypes;\n\tClass._propertyTypesByName = {};\n\tpropertyTypes.forEach(propertyType => {\n\t\tassert(Class.prototype[propertyType.name] === undefined, 'Property name ' + propertyType.name + ' clashes');\n\t\tClass._propertyTypesByName[propertyType.name] = propertyType;\n\t\tObject.defineProperty(Class.prototype, propertyType.name, {\n\t\t\tget() {\n\t\t\t\treturn this._properties[propertyType.name].value;\n\t\t\t},\n\t\t\tset(value) {\n\t\t\t\tthis._properties[propertyType.name].value = value;\n\t\t\t}\n\t\t});\n\t});\n};\n","import Serializable from './serializable';\nimport assert from '../assert';\n\nconst ALIVE_ERROR = 'entity is already dead';\n\nexport default class Entity extends Serializable {\n\tconstructor(predefinedId = false) {\n\t\tsuper(predefinedId);\n\t\tthis.components = new Map(); // name -> array\n\t\tthis.sleeping = false;\n\t\tthis.prototype = null; // should be set immediately after constructor\n\t\tthis.localMaster = true; // set false if entity is controlled over the net\n\t}\n\n\t// Get the first component of given name\n\tgetComponent(name) {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\tlet components = this.components.get(name);\n\t\tif (components !== undefined)\n\t\t\treturn components[0];\n\t\telse\n\t\t\treturn null;\n\t}\n\n\t// Get all components with given name\n\tgetComponents(name) {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\treturn this.components.get(name) || [];\n\t}\n\t\n\tgetListOfAllComponents() {\n\t\tlet components = [];\n\t\tthis.components.forEach((value, key) => {\n\t\t\tcomponents.push(...value);\n\t\t});\n\t\treturn components;\n\t}\n\t\n\tclone() {\n\t\tlet entity = new Entity();\n\t\tentity.prototype = this.prototype;\n\t\tentity.sleeping = this.sleeping;\n\t\tlet components = [];\n\t\tthis.components.forEach((value, key) => {\n\t\t\tcomponents.push(...value.map(c => c.clone()));\n\t\t});\n\t\tentity.addComponents(components);\n\t\treturn entity;\n\t}\n\n\t/*\n\tAdds multiple components as an array to this Entity.\n\tUses addComponent internally.\n\tInitializes components after all components are added.\n\t*/\n\taddComponents(components) {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\tassert(Array.isArray(components), 'Parameter is not an array.');\n\n\t\tfor (let i = 0; i < components.length; i++) {\n\t\t\tlet componentList = this.components.get(components[i]._name) || this.components.set(components[i]._name, []).get(components[i]._name);\n\t\t\tcomponentList.push(components[i]);\n\t\t\tcomponents[i].entity = this;\n\t\t\tcomponents[i]._parent = this;\n\t\t}\n\t\t\n\t\tif (!this.sleeping)\n\t\t\tEntity.initComponents(components);\n\t\treturn this;\n\t}\n\tstatic initComponents(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._preInit();\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._init();\n\t}\n\tstatic makeComponentsSleep(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i]._sleep();\n\t}\n\tstatic deleteComponents(components) {\n\t\tfor (let i = 0; i < components.length; i++)\n\t\t\tcomponents[i].delete();\n\t}\n\tsleep() {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\tif (this.sleeping) return false;\n\t\t\n\t\tthis.components.forEach((value, key) => Entity.makeComponentsSleep(value));\n\t\t\n\t\tthis.sleeping = true;\n\t\treturn true;\n\t}\n\twakeUp() {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\tif (!this.sleeping) return false;\n\n\t\tthis.components.forEach((value, key) => Entity.initComponents(value));\n\n\t\tthis.sleeping = false;\n\t\treturn true;\n\t}\n\tdelete() {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\tthis.sleep();\n\t\tsuper.delete();\n\t\tthis.components.forEach((value, key) => Entity.deleteComponents(value));\n\t\tthis.components.clear();\n\t}\n\tsetInTreeStatus(isInTree) {\n\t\tif (this._isInTree === isInTree)\n\t\t\treturn;\n\n\t\tthis._isInTree = isInTree;\n\t\tthis.components.forEach((value, key) => {\n\t\t\tvalue.forEach(component => component.setInTreeStatus(isInTree));\n\t\t});\n\t}\n\ttoJSON() {\n\t\tassert(this._alive, ALIVE_ERROR);\n\t\t\n\t\tlet components = [];\n\t\tthis.components.forEach(compArray => {\n\t\t\tcompArray.forEach(comp => {\n\t\t\t\tcomponents.push(comp.toJSON());\n\t\t\t});\n\t\t});\n\t\t\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tcomp: components,\n\t\t\tproto: this.prototype.id\n\t\t});\n\t}\n}\nObject.defineProperty(Entity.prototype, 'position', {\n\tget() {\n\t\treturn this.getComponent('Transform').position;\n\t},\n\tset(position) {\n\t\tthis.getComponent('Transform').position = position;\n\t}\n});\n\nSerializable.registerSerializable(Entity, 'ent', json => {\n\tconsole.log('creating entity from json', json);\n\tlet entity = new Entity(json.id);\n\tentity.prototype = getSerializable(json.proto);\n\tconsole.log('created entity from json', entity);\n\tif (json.comp) {\n\t\tentity.addComponents(json.comp.map(Serializable.fromJSON));\n\t}\n\treturn entity;\n});\n","import Serializable from './serializable';\nimport Entity from './entity';\nimport assert from '../assert';\nimport { game } from './game';\nimport { addChange, changeType, setChangeOrigin } from './serializableManager';\n\nexport let scene = null;\n\nexport default class Scene extends Serializable {\n\tconstructor(predefinedId = false) {\n\t\tif (scene) {\n\t\t\ttry {\n\t\t\t\tscene.delete();\n\t\t\t} catch(e) {\n\t\t\t\tconsole.warn('Deleting old scene failed', e);\n\t\t\t}\n\t\t}\n\t\tscene = this;\n\n\t\tthis.canvas = document.querySelector('canvas.anotherCanvas');\n\t\tthis.context = this.canvas.getContext('2d');\n\n\t\tthis.level = null;\n\t\t\n\t\tthis.animationFrameId = null;\n\t\tthis.playing = false;\n\t\tthis.time = 0;\n\n\t\tsuper(predefinedId);\n\t\taddChange(changeType.addSerializableToTree, this);\n\n\t\tif (predefinedId)\n\t\t\tconsole.log('scene import');\n\t\telse\n\t\t\tconsole.log('scene created');\n\t\t\n\t\tthis.draw();\n\t}\n\tanimFrame(playCalled) {\n\t\tthis.animationFrameId = null;\n\t\tif (!this._alive || !this.playing) return;\n\t\t\n\t\tlet t = 0.001*performance.now();\n\t\tlet dt = t-this._prevUpdate;\n\t\tif (dt > 0.1)\n\t\t\tdt = 0.1;\n\t\tthis._prevUpdate = t;\n\t\tthis.time += dt;\n\n\t\tsetChangeOrigin(this);\n\t\tthis.dispatch('onUpdate', dt, this.time);\n\t\tthis.draw();\n\t\t\n\t\tthis.requestAnimFrame();\n\t}\n\trequestAnimFrame() {\n\t\tthis.animationFrameId = window.requestAnimationFrame(() => this.animFrame());\n\t}\n\tdraw() {\n\t\tthis.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\t\tthis.dispatch('onDraw', this.context);\n\t}\n\tisInInitialState() {\n\t\treturn !this.playing && this.time === 0;\n\t}\n\treset() {\n\t\tthis.pause();\n\t\tthis.deleteChildren();\n\t\tif (this.level)\n\t\t\tthis.level.createScene(this);\n\t\tthis.time = 0;\n\t\tthis.draw();\n\t}\n\tpause() {\n\t\tif (!this.playing) return;\n\t\t\n\t\tthis.playing = false;\n\t\tif (this.animationFrameId)\n\t\t\twindow.cancelAnimationFrame(this.animationFrameId);\n\t\tthis.animationFrameId = null;\n\t}\n\tplay() {\n\t\tif (this.playing) return;\n\t\t\n\t\tthis._prevUpdate = 0.001*performance.now();\n\t\tthis.playing = true;\n\t\t\n\t\tthis.requestAnimFrame();\n\t\t\n\t\t\n\t\tif (this.time === 0)\n\t\t\tthis.dispatch('onStart');\n\t\t\n\t\t/*\n\t\tlet player = game.findChild('prt', p => p.name === 'Player', true);\n\t\tif (player) {\n\t\t\tconsole.log('Spawning player!', player);\n\t\t\tthis.spawn(player);\n\t\t}\n\t\t*/\n\t}\n\tdelete() {\n\t\tif (scene === this)\n\t\t\tscene = null;\n\t\tsuper.delete();\n\t\tconsole.log('scene.delete');\n\t}\n}\nScene.prototype.isRoot = true;\n\nSerializable.registerSerializable(Scene, 'sce');\n","import Serializable, { createStringId } from './serializable';\nimport assert from '../assert';\nimport { componentClasses } from './component';\n\nexport default class ComponentData extends Serializable {\n\tconstructor(componentClassName, predefinedId = false, predefinedComponentId = false) {\n\t\tthis.name = componentClassName;\n\t\tthis.componentClass = componentClasses.get(this.name);\n\t\tassert(this.componentClass, 'Component class not defined: ' + componentClassName);\n\t\tsuper(predefinedId);\n\t\tif (!this.componentClass.allowMultiple)\n\t\t\tpredefinedComponentId = '_' + componentClassName;\n\t\tthis.componentId = predefinedComponentId || createStringId('cid', 10); // what will be the id of component created from this componentData\n\t}\n\taddChild(child) {\n\t\tif (child.threeLetterType === 'prp') {\n\t\t\tif (!child.propertyType) {\n\t\t\t\tif (!this.componentClass._propertyTypesByName[child.name]) {\n\t\t\t\t\tconsole.log('Property of that name not defined', this.id, child, this);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tchild.setPropertyType(this.componentClass._propertyTypesByName[child.name]);\n\t\t\t}\n\t\t}\n\t\tsuper.addChild(child);\n\t\treturn this;\n\t};\n\tclone() {\n\t\tlet obj = new ComponentData(this.name);\n\t\tlet children = [];\n\t\tthis.forEachChild(null, child => {\n\t\t\tchildren.push(child.clone());\n\t\t});\n\t\tobj.addChildren(children);\n\t\treturn obj;\n\t}\n\ttoJSON() {\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tcid: this.componentId,\n\t\t\tn: this.name\n\t\t});\n\t}\n\t/*\n\tReturns a list of Properties.\n\tThose which don't have an id are temporary properties generated from parents.\n\tDon't set _depth.\n\t */\n\tgetInheritedProperties(_depth = 0) {\n\t\tlet properties = {};\n\n\t\t// properties from parent\n\t\tlet parentComponentData = this.getParentComponentData();\n\t\tif (parentComponentData)\n\t\t\tparentComponentData.getInheritedProperties(_depth + 1).forEach(prop => properties[prop.name] = prop);\n\t\t\n\t\t// properties from this. override properties of parents\n\t\tthis.getChildren('prp').forEach(prop => {\n\t\t\tif (_depth === 0)\n\t\t\t\tproperties[prop.name] = prop;\n\t\t\telse\n\t\t\t\tproperties[prop.name] = prop.clone(true);\n\t\t});\n\t\t\n\t\t// fill from propertyType\n\t\tif (_depth === 0) {\n\t\t\treturn this.componentClass._propertyTypes.map(propertyType => {\n\t\t\t\treturn properties[propertyType.name] || propertyType.createProperty({\n\t\t\t\t\tskipSerializableRegistering: true\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\treturn Object.keys(properties).map(key => properties[key]);\n\t\t}\n\t}\n\tgetParentComponentData() {\n\t\tif (!this._parent) return null;\n\t\tlet parentPrototype = this._parent.getParentPrototype();\n\t\twhile (parentPrototype) {\n\t\t\tlet parentComponentData = parentPrototype.findChild('cda', componentData => componentData.componentId === this.componentId);\n\t\t\tif (parentComponentData)\n\t\t\t\treturn parentComponentData;\n\t\t\telse\n\t\t\t\tparentPrototype = parentPrototype.getParentPrototype();\n\t\t}\n\t\treturn null;\n\t}\n\tgetPropertyOrCreate(name) {\n\t\tlet property = this.findChild('prp', prp => prp.name === name);\n\t\tif (!property) {\n\t\t\tproperty = this.componentClass._propertyTypesByName[name].createProperty();\n\t\t\tthis.addChild(property);\n\t\t}\n\t\treturn property;\n\t}\n\tgetProperty(name) {\n\t\treturn this.findChild('prp', prp => prp.name === name);\n\t}\n\tsetValue(propertyName, value) {\n\t\tthis.getPropertyOrCreate(propertyName).value = value;\n\t\treturn this;\n\t}\n\tgetValue(name) {\n\t\tlet property = this.properties[name];\n\t\tif (property) return property.value;\n\t\t\n\t\tlet propertyType = componentClasses.get(this.componentClassName).propertyTypeMap.get(name);\n\t\tassert(classDef, '');\n\t\tif (classDef) return classDef.propertyTypeMap.get(name);\n\t\t\n\t\treturn property && property.value\n\t\t\t|| componentClasses.get(this.componentClassName).propertyTypeMap.get(name).initialValue\n\t\t\t|| assert(false, 'Value of this name does not exist in this');\n\t\tif (property) return property.value;\n\t\t\n\t\t// return property && property.value || this.componentClass.propertyTypes.;\n\t\treturn this.properties[name] || this.parent && this.parent.getProperty(name) || null;\n\t}\n}\nSerializable.registerSerializable(ComponentData, 'cda', json => {\n\treturn new ComponentData(json.n, json.id, json.cid);\n});\n","import Serializable from './serializable';\nimport assert from '../assert';\nimport Property from './property';\nimport PropertyOwner from './propertyOwner';\nimport { scene } from './scene';\nimport { game } from './game';\nexport { default as Prop } from './propertyType';\nexport let componentClasses = new Map();\nimport ComponentData from './componentData';\n\n// Instance of a component, see componentExample.js\nexport class Component extends PropertyOwner {\n\tconstructor(predefinedId = false) {\n\t\tsuper(predefinedId);\n\t\tthis._componentId = null; // Creator will fill this\n\t\tthis.scene = scene;\n\t\tthis.game = game;\n\t\tthis._listenRemoveFunctions = [];\n\t}\n\tdelete() {\n\t\tassert(!this.entity._alive, 'Do not call Component.delete!');\n\t\tthis._parent = null;\n\t\tsuper.delete();\n\t}\n\t_preInit() {\n\t\tthis.constructor.requirements.forEach(r => {\n\t\t\tthis[r] = this.entity.getComponent(r);\n\t\t\tassert(this[r], `${this.constructor.componentName} requires component ${r} but it is not found`);\n\t\t});\n\n\t\tthis.forEachChild('com', c => c._preInit());\n\t\t\n\t\t['onUpdate', 'onDraw', 'onDrawHelper', 'onStart'].forEach(funcName => {\n\t\t\tif (typeof this[funcName] === 'function') {\n\t\t\t\t// console.log('listen ' + funcName);\n\t\t\t\tthis._listenRemoveFunctions.push(this.scene.listen(funcName, (...args) => this[funcName](...args)));\n\t\t\t}\n\t\t});\n\n\t\ttry {\n\t\t\tif (typeof this.preInit === 'function')\n\t\t\t\tthis.preInit();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.componentName, 'preInit', e);\n\t\t}\n\t}\n\t_init() {\n\t\tthis.forEachChild('com', c => c._init());\n\t\ttry {\n\t\t\tif (typeof this.init === 'function')\n\t\t\t\tthis.init();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.componentName, 'init', e);\n\t\t}\n\t}\n\t_sleep() {\n\t\ttry {\n\t\t\tif (typeof this.sleep === 'function')\n\t\t\t\tthis.sleep();\n\t\t} catch(e) {\n\t\t\tconsole.error(this.entity, this.constructor.componentName, 'sleep', e);\n\t\t}\n\t\tthis.forEachChild('com', c => c._sleep());\n\t\t// console.log(`remove ${this._listenRemoveFunctions.length} listeners`);\n\t\tthis._listenRemoveFunctions.forEach(f => f());\n\t\tthis._listenRemoveFunctions.length = 0;\n\t}\n\tcreateComponentData() {\n\t\tlet componentName = this.constructor.componentName;\n\t\tlet propertyTypes = this.constructor._propertyTypes;\n\t\tlet componentData = new ComponentData(componentName);\n\t\tlet children = [];\n\t\tpropertyTypes.forEach(pt => {\n\t\t\tchildren.push(pt.createProperty({\n\t\t\t\tvalue: this[pt.name]\n\t\t\t}));\n\t\t});\n\t\tcomponentData.initWithChildren(children);\n\t\treturn componentData;\n\t}\n\ttoJSON() {\n\t\treturn Object.assign(super.toJSON(), {\n\t\t\tn: this.constructor.componentName,\n\t\t\tcid: this._componentId\n\t\t});\n\t}\n}\nComponent.create = function(name, values = {}) {\n\tlet componentClass = componentClasses.get(name);\n\tassert(componentClass);\n\tlet component = new componentClass();\n\tcomponent.initWithPropertyValues(values);\n\treturn component;\n}\n\nComponent.reservedPropertyNames = new Set(['id', 'constructor', 'delete', 'children', 'entity', 'env', 'init', 'preInit', 'sleep', 'toJSON', 'fromJSON']);\nComponent.reservedPrototypeMembers = new Set(['id', 'children', 'entity', 'env', '_preInit', '_init', '_sleep', '_forEachChildComponent', '_properties', '_componentData', 'toJSON', 'fromJSON']);\nComponent.register = function({\n\tname = '', // required\n\tdescription = '',\n\tcategory = 'Other',\n\ticon = 'fa-puzzle-piece', // in editor\n\tcolor = '', // in editor\n\tproperties = [],\n\trequirements = ['Transform'],\n\tchildren = [],\n\tparentClass = Component,\n\tprototype = {},\n\tallowMultiple = true\n}) {\n\tassert(name, 'Component must have a name.');\n\tassert(name[0] >= 'A' && name[0] <= 'Z', 'Component name must start with capital letter.');\n\tassert(!componentClasses.has(name), 'Duplicate component class ' + name);\n\tObject.keys(prototype).forEach(k => {\n\t\tif (Component.reservedPrototypeMembers.has(k))\n\t\t\tassert(false, 'Component prototype can not have a reserved member: ' + k);\n\t});\n\t\n\tlet constructorFunction = prototype.constructor;\n\tlet deleteFunction = prototype.delete;\n\tdelete prototype.constructor;\n\tdelete prototype.delete;\n\tclass Com extends parentClass {\n\t\tconstructor() {\n\t\t\tsuper(...arguments);\n\t\t\tif (constructorFunction)\n\t\t\t\tconstructorFunction();\n\t\t}\n\t\tdelete() {\n\t\t\tsuper.delete(...arguments);\n\t\t\tif (deleteFunction)\n\t\t\t\tdeleteFunction();\n\t\t}\n\t}\n\tproperties.forEach(p => {\n\t\tassert(!Component.reservedPropertyNames.has(p.name), 'Can not have property called ' + p.name);\n\t});\n\tPropertyOwner.defineProperties(Com, properties); // properties means propertyTypes here\n\tCom.componentName = name;\n\tCom.category = category;\n\tif (requirements.indexOf('Transform') < 0) requirements.push('Transform');\n\tCom.requirements = requirements;\n\tCom.children = children;\n\tCom.description = description;\n\tCom.allowMultiple = allowMultiple;\n\tCom.icon = icon;\n\t\n\tlet num = name.split('').reduce((prev, curr) => prev + curr.charCodeAt(0), 0);\n\tCom.color = color || `hsla(${ num % 360 }, 40%, 60%, 1)`;\n\n\tprototype._name = name;\n\tObject.assign(Com.prototype, prototype);\n\tcomponentClasses.set(Com.componentName, Com);\n\treturn Com;\n};\n\nSerializable.registerSerializable(Component, 'com', json => {\n\tlet component = new (componentClasses.get(json.n))(json.id);\n\tcomponent._componentId = json.cid || null;\n\treturn component;\n});\n","import { Component, Prop } from '../core/component';\n\nComponent.register({\n\tname: 'Transform',\n\tcategory: 'Core',\n\ticon: 'fa-dot-circle-o',\n\tallowMultiple: false,\n\tproperties: [\n\t\tProp('position', new Victor(0, 0), Prop.vector),\n\t\tProp('scale', new Victor(1, 1), Prop.vector),\n\t\tProp('rotation', 0, Prop.float, Prop.float.modulo(0, Math.PI * 2), Prop.flagDegreesInEditor)\n\t]\n});\n","import { Component, Prop } from '../core/component';\n\nlet vari = 0;\n\nComponent.register({\n\tname: 'Test',\n\tcategory: 'Core',\n\tproperties: [\n\t\tProp('name', 'Oh right', Prop.string),\n\t\tProp('enum', 'yksi', Prop.enum, Prop.enum.values('yksi', 'kaksi', 'kolme', 'neljä')),\n\t\tProp('topBarHelper', new Victor(0, 1), Prop.vector),\n\t\tProp('test' + ++vari, vari, Prop.int),\n\t\tProp('test' + ++vari, false, Prop.bool),\n\t\tProp('test' + ++vari, true, Prop.bool)\n\t]\n});\n","\nexport function keyPressed(key) {\n\treturn keys[key] || false;\n}\n\nexport function listenKeyDown(handler) {\n\tkeyDownListeners.push(handler);\n\treturn () => keyDownListeners.splice(keyDownListeners.indexOf(handler), 1);\n}\nexport function listenKeyUp(handler) {\n\tkeyUpListeners.push(handler);\n\treturn () => keyUpListeners.splice(keyUpListeners.indexOf(handler), 1);\n}\n\nexport const key = {\n\tleft: 37,\n\tright: 39,\n\tup: 38,\n\tdown: 40,\n\tctrl: 17,\n\tappleLeft: 91,\n\tappleRight: 93,\n\talt: 18,\n\tshift: 16,\n\tspace: 32,\n\ta: 65,\n\tz: 90,\n\t'0': 48,\n\t'1': 49,\n\t'9': 57,\n\tbackspace: 8,\n\tenter: 13,\n\tesc: 27\n};\n\nexport function listenMouseMove(element, handler) {\n\telement.addEventListener('mousemove', event => {\n\t\tlet x = event.pageX;\n\t\tlet y = event.pageY;\n\t\tlet el = element;\n\t\twhile( el != null ) {\n\t\t\tx -= el.offsetLeft;\n\t\t\ty -= el.offsetTop;\n\t\t\tel = el.offsetParent;\n\t\t}\n\t\t\n\t\telement._mx = x;\n\t\telement._my = y;\n\t\thandler(new Victor(x, y));\n\t});\n}\n\nexport function listenMouseDown(element, handler) {\n\telement.addEventListener('mousedown', event => {\n\t\tif (typeof element._mx === 'number')\n\t\t\thandler(new Victor(element._mx, element._my));\n\t\telse\n\t\t\thandler();\n\t});\n}\nexport function listenMouseUp(element, handler) {\n\telement.addEventListener('mouseup', event => {\n\t\tif (typeof element._mx === 'number')\n\t\t\thandler(new Victor(element._mx, element._my));\n\t\telse\n\t\t\thandler();\n\t});\n}\n\n////////////////////////////////////\n\n\nlet keys = {};\nlet keyDownListeners = [];\nlet keyUpListeners = [];\n\nwindow.onkeydown = event => {\n\tlet keyCode = event.which || event.keyCode;\n\t\n\tif (document.activeElement.nodeName.toLowerCase() == \"input\" && keyCode !== key.esc)\n\t\treturn;\n\t\n\tkeys[keyCode] = true;\n\tkeyDownListeners.forEach(l => l(keyCode));\n};\nwindow.onkeyup = event => {\n\tlet key = event.which || event.keyCode;\n\tkeys[key] = false;\n\tkeyUpListeners.forEach(l => l(key));\n};\n","import { Component, Prop } from '../core/component';\nimport { key, keyPressed } from '../util/input';\n\nComponent.register({\n\tname: 'Mover',\n\tproperties: [\n\t\tProp('change', new Victor(10, 10), Prop.vector),\n\t\tProp('userControlled', false, Prop.bool),\n\t\tProp('speed', 1, Prop.float),\n\t\tProp('rotationSpeed', 0, Prop.float, 'Degrees per second', Prop.flagDegreesInEditor)\n\t],\n\tprototype: {\n\t\tonUpdate(dt, t) {\n\t\t\tif (this.userControlled) {\n\t\t\t\tif (!this.entity.localMaster) return;\n\t\t\t\t\n\t\t\t\tlet dx = 0;\n\t\t\t\tlet dy = 0;\n\t\t\t\t\n\t\t\t\tif (keyPressed(key.left)) dx -= 1;\n\t\t\t\tif (keyPressed(key.right)) dx += 1;\n\t\t\t\tif (keyPressed(key.up)) dy -= 1;\n\t\t\t\tif (keyPressed(key.down)) dy += 1;\n\t\t\t\tif (dx) this.Transform.position.addScalarX(dx * this.speed * dt);\n\t\t\t\tif (dy) this.Transform.position.addScalarY(dy * this.speed * dt);\n\t\t\t\tif (dx || dy) {\n\t\t\t\t\tthis.Transform.position = this.Transform.position;\n\t\t\t\t}\n\t\t\t\tif (dx && this.rotationSpeed) {\n\t\t\t\t\tthis.Transform.rotation += dt * dx * this.rotationSpeed;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet change = new Victor(dt, 0).rotate(t * this.speed).multiply(this.change);\n\t\t\t\tthis.Transform.position.copy(this.Transform.position).add(change);\n\t\t\t\t\n\t\t\t\tif (this.rotationSpeed)\n\t\t\t\t\tthis.Transform.rotation += dt * this.rotationSpeed;\n\t\t\t}\n\t\t}\n\t}\n});\n","import { Component, Prop } from '../core/component';\n\nComponent.register({\n\tname: 'Rect',\n\ticon: 'fa-stop',\n\tallowMultiple: true,\n\tproperties: [\n\t\tProp('size', new Victor(10, 10), Prop.vector),\n\t\tProp('style', 'red', Prop.string),\n\t\tProp('randomStyle', false, Prop.bool)\n\t],\n\tprototype: {\n\t\tinit() {\n\t\t\tif (this.randomStyle)\n\t\t\t\tthis.style = `hsl(${Math.random()*360 | 0}, 100%, 40%)`;\n\t\t},\n\t\tonDraw(context) {\n\t\t\tlet\n\t\t\t\tx = this.Transform.position.x - this.size.x/2 * this.Transform.scale.x,\n\t\t\t\ty = this.Transform.position.y - this.size.y/2 * this.Transform.scale.y,\n\t\t\t\tw = this.size.x * this.Transform.scale.x,\n\t\t\t\th = this.size.y * this.Transform.scale.y;\n\t\t\tcontext.save();\n\t\t\tcontext.fillStyle = this.style;\n\t\t\tcontext.translate(x+w/2, y+h/2);\n\t\t\tcontext.rotate(this.Transform.rotation);\n\t\t\tcontext.fillRect(-w/2, -h/2, w, h);\n\t\t\tcontext.restore();\n\t\t}\n\t}\n});\n","import Serializable from './serializable';\nimport assert from '../assert';\nimport { getSerializable } from './serializableManager';\nimport Prop from './propertyType';\nimport PropertyOwner from './propertyOwner';\nimport ComponentData from './componentData';\nimport Entity from './entity';\n\nlet propertyTypes = [\n\tProp('name', 'No name', Prop.string)\n];\n\nexport default class Prototype extends PropertyOwner {\n\tconstructor() {\n\t\tsuper(...arguments);\n\t\t\n\t\tthis.previouslyCreatedEntity = null;\n\t}\n\t\n\taddChild(child) {\n\t\tif (child.threeLetterType === 'cda' && !child.componentClass.allowMultiple)\n\t\t\tassert(this.findChild('cda', cda => cda.componentId === child.componentId) === null, `Can't have multiple ${child.name} components. See Component.allowMultiple`);\n\t\tsuper.addChild(child);\n\t}\n\tgetParentPrototype() {\n\t\treturn this._parent && this._parent.threeLetterType === 'prt' ? this._parent : null;\n\t}\n\t\n\t/*\n\tReturns JSON:\n\t[\n\t\t{\n\t\t\townComponent: false, // component of a parent prototype\n\t\t\tcomponentClass: [object Object],\n\t\t\tcomponentId: <componentId>,\n\t\t\tthreeLetterType: 'icd',\n\t \t\tgeneratedForPrototype: <this>,\n\t\t\tproperties: [\n\t\t\t\t{ id missing }\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t ownComponentData: <ComponentData> || null, // null if this prototype has 0 properties defined\n\t\t\t componentClass: [object Object],\n\t\t\t componentId: <componentId>,\n\t\t\t threeLetterType: 'icd',\n\t\t\t generatedForPrototype: <this>,\n\t\t\t properties: [\n\t\t\t \t{ id found if own property } // some properties might be from parent prototypes and thus missing id\n\t\t\t ]\n\t\t }\n\t]\n\t */\n\tgetInheritedComponentDatas() {\n\t\tlet originalPrototype = this;\n\t\t\n\t\tfunction getDataFromPrototype(prototype, _depth = 0) {\n\t\t\tlet data;\n\t\t\t\n\t\t\tlet parentPrototype = prototype.getParentPrototype();\n\t\t\tif (parentPrototype)\n\t\t\t\tdata = getDataFromPrototype(parentPrototype, _depth + 1);\n\t\t\telse\n\t\t\t\tdata = {}; // Top level\n\t\t\t\n\t\t\tlet componentDatas = prototype.getChildren('cda');\n\t\t\tcomponentDatas.forEach(componentData => {\n\t\t\t\tif (!data[componentData.componentId]) {\n\t\t\t\t\t// Most parent version of this componentId\n\t\t\t\t\tdata[componentData.componentId] = {\n\t\t\t\t\t\t// ownComponent = true if the original prototype is the first one introducing this componentId\n\t\t\t\t\t\townComponentData: null, // will be given value if original prototype has this componentId\n\t\t\t\t\t\tcomponentClass: componentData.componentClass,\n\t\t\t\t\t\tcomponentId: componentData.componentId,\n\t\t\t\t\t\tpropertyHash: {},\n\t\t\t\t\t\tthreeLetterType: 'icd',\n\t\t\t\t\t\tgeneratedForPrototype: originalPrototype\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (_depth === 0) {\n\t\t\t\t\tdata[componentData.componentId].ownComponentData = componentData;\n\t\t\t\t}\n\n\t\t\t\tcomponentData.getChildren('prp').forEach(property => {\n\t\t\t\t\t// Newest version of a property always overrides old property\n\t\t\t\t\tdata[componentData.componentId].propertyHash[property.name] = _depth === 0 ? property : property.clone(true);\n\t\t\t\t});\n\t\t\t});\n\t\t\t\n\t\t\treturn data;\n\t\t}\n\n\t\tlet data = getDataFromPrototype(this);\n\t\tlet array = Object.keys(data).map(key => data[key]);\n\t\tarray.forEach(inheritedComponentData => {\n\t\t\tinheritedComponentData.properties = inheritedComponentData.componentClass._propertyTypes.map(propertyType => {\n\t\t\t\tif (inheritedComponentData.propertyHash[propertyType.name])\n\t\t\t\t\treturn inheritedComponentData.propertyHash[propertyType.name];\n\t\t\t\telse\n\t\t\t\t\treturn propertyType.createProperty({ skipSerializableRegistering: true });\n\t\t\t});\n\t\t\tdelete inheritedComponentData.propertyHash;\n\t\t});\n\t\t\n\t\tarray.forEach(inheritedComponentData => {\n\t\t\tlet cid = inheritedComponentData.componentId;\n\t\t});\n\n\t\treturn array.sort((a, b) => a.componentClass.componentName.localeCompare(b.componentClass.componentName));\n\t}\n\t\n\tcreateAndAddPropertyForComponentData(inheritedComponentData, propertyName, propertyValue) {\n\t\tlet propertyType = inheritedComponentData.componentClass._propertyTypesByName[propertyName];\n\t\tassert(propertyType, 'Invalid propertyName', propertyName, inheritedComponentData);\n\t\tlet componentData = this.findChild('cda', componentData => componentData.componentId === inheritedComponentData.componentId);\n\t\tif (!componentData) {\n\t\t\tconsole.log('no component data. create one', this, inheritedComponentData);\n\t\t\tcomponentData = new ComponentData(inheritedComponentData.componentClass.componentName, false, inheritedComponentData.componentId);\n\t\t\tthis.addChild(componentData);\n\t\t}\n\t\tlet property = componentData.findChild('prp', property => property.name === propertyName);\n\t\tif (property) {\n\t\t\tproperty.value = propertyValue;\n\t\t\treturn property;\n\t\t}\n\n\t\tproperty = propertyType.createProperty({\n\t\t\tvalue: propertyValue,\n\t\t});\n\t\tcomponentData.addChild(property);\n\t\t\n\t\treturn property;\n\t}\n\t\n\tfindComponentDataByComponentId(componentId, alsoFindFromParents = false) {\n\t\tlet child = this.findChild('cda', componentData => componentData.componentId === componentId);\n\t\tif (child)\n\t\t\treturn child;\n\t\tif (alsoFindFromParents) {\n\t\t\tlet parent = this.getParentPrototype();\n\t\t\tif (parent)\n\t\t\t\treturn parent.findComponentDataByComponentId(componentId, alsoFindFromParents);\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tgetOwnComponentDataOrInherit(componentId) {\n\t\tlet componentData = this.findComponentDataByComponentId(componentId, false);\n\t\tif (!componentData) {\n\t\t\tlet inheritedComponentData = this.findComponentDataByComponentId(componentId, true);\n\t\t\tif (!inheritedComponentData)\n\t\t\t\treturn null;\n\t\t\t\n\t\t\tcomponentData = new ComponentData(inheritedComponentData.name, false, componentId);\n\t\t\tthis.addChild(componentData);\n\t\t}\n\t\treturn componentData\n\t}\n\t\n\tfindOwnProperty(componentId, propertyName) {\n\t\tlet componentData = this.findComponentDataByComponentId(componentId);\n\t\tif (componentData) {\n\t\t\treturn componentData.getProperty(propertyName);\n\t\t}\n\t\treturn null;\n\t}\n\t\n\tcreateEntity() {\n\t\tlet entity = new Entity();\n\t\tlet inheritedComponentDatas = this.getInheritedComponentDatas();\n\t\tlet components = [];\n\t\tinheritedComponentDatas.forEach(d => {\n\t\t\tlet component = new d.componentClass;\n\t\t\tcomponent._componentId = d.componentId;\n\t\t\tlet properties = d.properties.map(p => p.clone());\n\t\t\tcomponent.initWithChildren(properties);\n\t\t\tcomponents.push(component);\n\t\t});\n\t\tentity.addComponents(components);\n\t\tentity.prototype = this;\n\t\t\n\t\tthis.previouslyCreatedEntity = entity;\n\t\treturn entity;\n\t}\n}\nPropertyOwner.defineProperties(Prototype, propertyTypes);\n\nPrototype.create = function(name) {\n\treturn new Prototype().initWithPropertyValues({ name: name });\n};\n\nSerializable.registerSerializable(Prototype, 'prt');\n","import Prototype from './prototype';\nimport Property from './property';\nimport Serializable from './serializable';\nimport { getSerializable } from './serializableManager';\nimport { Prop, componentClasses } from './component';\nimport ComponentData from './componentData';\nimport { scene } from './scene';\n\n// EntityPrototype is a prototype that always has one Transform ComponentData and optionally other ComponentDatas also.\n// Entities are created based on EntityPrototypes\nexport default class EntityPrototype extends Prototype {\n\tconstructor(predefinedId = false) {\n\t\tsuper(...arguments);\n\t\t// this._parent is level, not prototype. We need a link to parent-prototype.\n\t\tthis.prototype = null;\n\t}\n\tgetTransform() {\n\t\treturn this.findChild('cda', cda => cda.name === 'Transform');\n\t}\n\tgetParentPrototype() {\n\t\treturn this.prototype;\n\t}\n\tclone() {\n\t\tlet clone = super.clone();\n\t\tclone.prototype = this.prototype;\n\t\treturn clone;\n\t}\n\ttoJSON() {\n\t\t// return super.toJSON();\n\t\t\n\t\t// Below optimization reduces size 88%. id's have to be generated based on this.id\n\t\t\n\t\tlet Transform = this.getTransform();\n\t\tlet json = {\n\t\t\tid: this.id,\n\t\t\tp: this.prototype.id\n\t\t};\n\t\t\n\t\tlet childArrays = [];\n\t\tthis._children.forEach(child => {\n\t\t\tchildArrays.push(child);\n\t\t});\n\t\tlet children = [].concat(...childArrays).filter(child => {\n\t\t\treturn child !== Transform && child !== this._properties.name;\n\t\t});\n\t\tif (children.length > 0)\n\t\t\tjson.c = children.map(child => child.toJSON());\n\t\t\n\t\tlet prototype = this.prototype;\n\t\t\n\t\tlet floatToJSON = Prop.float().toJSON;\n\t\tlet handleProperty = prp => {\n\t\t\tif (prp.name === 'name') {\n\t\t\t\tif (!prototype || prp.value !== prototype.name)\n\t\t\t\t\tjson.n = prp.value;\n\t\t\t} else if (prp.name === 'position') {\n\t\t\t\tjson.x = floatToJSON(prp.value.x);\n\t\t\t\tjson.y = floatToJSON(prp.value.y);\n\t\t\t} else if (prp.name === 'scale') {\n\t\t\t\tif (!prp.value.isEqualTo(new Victor(1, 1))) {\n\t\t\t\t\tjson.w = floatToJSON(prp.value.x);\n\t\t\t\t\tjson.h = floatToJSON(prp.value.y);\n\t\t\t\t}\n\t\t\t} else if (prp.name === 'rotation') {\n\t\t\t\tif (prp.value !== 0)\n\t\t\t\t\tjson.a = floatToJSON(prp.value);\n\t\t\t}\n\t\t};\n\t\thandleProperty(this._properties.name);\n\n\t\tTransform.getChildren('prp').forEach(handleProperty);\n\t\treturn json;\n\t}\n\tspawnEntityToScene(position) {\n\t\tif (!scene)\n\t\t\treturn;\n\t\t\n\t\tif (position) {\n\t\t\tthis.getTransform().getPropertyOrCreate('position').value = position;\n\t\t}\n\t\t\n\t\tlet entity = this.createEntity();\n\t\tscene.addChild(entity);\n\t}\n}\nObject.defineProperty(EntityPrototype.prototype, 'position', {\n\tget() {\n\t\treturn this.getTransform().findChild('prp', prp => prp.name === 'position').value;\n\t},\n\tset(position) {\n\t\treturn this.getTransform().findChild('prp', prp => prp.name === 'position').value = position;\n\t}\n});\n\n// If Transform or Transform.position is missing, they are added.\nEntityPrototype.createFromPrototype = function(prototype, componentDatas = []) {\n\tlet transform = componentDatas.find(cda => cda.name === 'Transform');\n\tif (!transform) {\n\t\ttransform = new ComponentData('Transform');\n\t\tcomponentDatas.push(transform);\n\t}\n\t\n\tlet position = transform.findChild('prp', prp => prp.name === 'position');\n\tif (!position) {\n\t\tposition = transform.componentClass._propertyTypesByName.position.createProperty({\n\t\t\tvalue: new Victor(0, 0)\n\t\t});\n\t\ttransform.addChild(position);\n\t}\n\t\n\tlet entityPrototype = new EntityPrototype();\n\tentityPrototype.prototype = prototype;\n\tentityPrototype.initWithPropertyValues({\n\t\tname: prototype.name\n\t});\n\tentityPrototype.addChildren(componentDatas);\n\treturn entityPrototype;\n};\n\nSerializable.registerSerializable(EntityPrototype, 'epr', json => {\n\tlet entityPrototype = new EntityPrototype(json.id);\n\tentityPrototype.prototype = getSerializable(json.p);\n\t\n\tlet nameId = json.id + '_n';\n\tlet transformId = json.id + '_t';\n\tlet positionId = json.id + '_p';\n\tlet scaleId = json.id + '_s';\n\tlet rotationId = json.id + '_r';\n\t\n\tlet name = Prototype._propertyTypesByName.name.createProperty({ \n\t\tvalue: json.n === undefined ? entityPrototype.prototype.name : json.n, \n\t\tpredefinedId: nameId \n\t});\n\t\n\tlet transformData = new ComponentData('Transform', transformId);\n\tlet transformClass = componentClasses.get('Transform');\n\t\n\tlet position = transformClass._propertyTypesByName.position.createProperty({\n\t\tvalue: new Victor(json.x, json.y),\n\t\tpredefinedId: positionId\n\t});\n\ttransformData.addChild(position, 'fromJSON');\n\n\tlet scale = transformClass._propertyTypesByName.scale.createProperty({\n\t\tvalue: new Victor(json.w === undefined ? 1 : json.w, json.h === undefined ? 1 : json.h),\n\t\tpredefinedId: scaleId\n\t});\n\ttransformData.addChild(scale, 'fromJSON');\n\n\tlet rotation = transformClass._propertyTypesByName.rotation.createProperty({\n\t\tvalue: json.a || 0,\n\t\tpredefinedId: rotationId\n\t});\n\ttransformData.addChild(rotation, 'fromJSON');\n\t\n\t\n\tentityPrototype.initWithChildren([name, transformData], 'fromJSON');\n\treturn entityPrototype;\n});\n","import { Component, Prop } from '../core/component';\nimport EntityPrototype from '../core/entityPrototype';\n\nComponent.register({\n\tname: 'Spawner',\n\tproperties: [\n\t\tProp('typeName', '', Prop.string)\n\t],\n\tprototype: {\n\t\tonStart() {\n\t\t\tthis.spawn();\n\t\t},\n\t\tonDrawHelper(context) {\n\t\t\tlet size = 30;\n\t\t\tlet\n\t\t\t\tx = this.Transform.position.x - size * this.Transform.scale.x/2,\n\t\t\t\ty = this.Transform.position.y - size * this.Transform.scale.y/2,\n\t\t\t\tw = size * this.Transform.scale.x,\n\t\t\t\th = size * this.Transform.scale.y;\n\t\t\tcontext.save();\n\t\t\tcontext.fillStyle = 'blue';\n\t\t\tcontext.strokeStyle = 'white';\n\t\t\tcontext.lineWidth = 1;\n\t\t\tcontext.font = '40px FontAwesome';\n\t\t\tcontext.textAlign = 'center';\n\t\t\tcontext.fillText('\\uf21d', this.Transform.position.x + 2, this.Transform.position.y);\n\t\t\tcontext.strokeText('\\uf21d', this.Transform.position.x + 2, this.Transform.position.y);\n\t\t\t\n\t\t\tcontext.restore();\n\t\t},\n\t\tspawn() {\n\t\t\tlet prototype = this.game.findChild('prt', prt => prt.name === this.typeName);\n\t\t\tif (!prototype)\n\t\t\t\treturn;\n\n\t\t\tEntityPrototype.createFromPrototype(prototype).spawnEntityToScene(this.Transform.position.clone());\n\t\t}\n\t}\n});\n","import Serializable from './serializable'\nimport '../components/import'\nimport Prototype from '../core/prototype'\nimport assert from '../assert'\nimport PropertyOwner, { Prop } from '../core/propertyOwner';\n\nlet propertyTypes = [\n\tProp('name', 'No name', Prop.string)\n];\n\nexport let game = null; // only one game at the time\n\nexport default class Game extends PropertyOwner {\n\tconstructor(predefinedId) {\n\t\tif (game) {\n\t\t\ttry {\n\t\t\t\tgame.delete();\n\t\t\t} catch(e) {\n\t\t\t\tconsole.warn('Deleting old game failed', e);\n\t\t\t}\n\t\t}\n\t\tgame = this;\n\t\t\n\t\tif (predefinedId)\n\t\t\tconsole.log('game import');\n\t\telse\n\t\t\tconsole.log('game created');\n\t\t\n\t\tsuper(...arguments);\n\t}\n\tdelete() {\n\t\tif (game === this)\n\t\t\tgame = null;\n\t\tsuper.delete();\n\t\tconsole.log('game.delete');\n\t}\n}\nPropertyOwner.defineProperties(Game, propertyTypes);\n\nGame.create = function(name) {\n\treturn new Game().initWithPropertyValues({ name: name });\n};\nGame.prototype.isRoot = true;\n\nSerializable.registerSerializable(Game, 'gam');\n","// LZW-compress a string\nexport function lzw_encode(s) {\n\tvar dict = {};\n\tvar data = (s + \"\").split(\"\");\n\tvar out = [];\n\tvar currChar;\n\tvar phrase = data[0];\n\tvar code = 256;\n\tfor (var i=1; i<data.length; i++) {\n\t\tcurrChar=data[i];\n\t\tif (dict[phrase + currChar] != null) {\n\t\t\tphrase += currChar;\n\t\t}\n\t\telse {\n\t\t\tout.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));\n\t\t\tdict[phrase + currChar] = code;\n\t\t\tcode++;\n\t\t\tphrase=currChar;\n\t\t}\n\t}\n\tout.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));\n\tfor (var i=0; i<out.length; i++) {\n\t\tout[i] = String.fromCharCode(out[i]);\n\t}\n\treturn out.join(\"\");\n}\n\n// Decompress an LZW-encoded string\nexport function lzw_decode(s) {\n\tvar dict = {};\n\tvar data = (s + \"\").split(\"\");\n\tvar currChar = data[0];\n\tvar oldPhrase = currChar;\n\tvar out = [currChar];\n\tvar code = 256;\n\tvar phrase;\n\tfor (var i=1; i<data.length; i++) {\n\t\tvar currCode = data[i].charCodeAt(0);\n\t\tif (currCode < 256) {\n\t\t\tphrase = data[i];\n\t\t}\n\t\telse {\n\t\t\tphrase = dict[currCode] ? dict[currCode] : (oldPhrase + currChar);\n\t\t}\n\t\tout.push(phrase);\n\t\tcurrChar = phrase.charAt(0);\n\t\tdict[code] = oldPhrase + currChar;\n\t\tcode++;\n\t\toldPhrase = phrase;\n\t}\n\treturn out.join(\"\");\n}\n","import { addChangeListener, packChange, unpackChange, executeChange, executeExternal, changeType } from '../core/serializableManager'\nimport Serializable from '../core/serializable';\n\nimport { lzw_decode, lzw_encode } from './compression';\n\nlet networkEnabled = false;\nexport function setNetworkEnabled(enabled = true) {\n\tnetworkEnabled = enabled;\n}\n\nlet socket;\n\nlet sceneTreeThreeLetterTypes = {\n\tsce: true,\n\t\n};\nfunction isInSceneTree(change) {\n\treturn change.reference.getRoot().threeLetterType === 'sce';\n}\n\nfunction tryToLoad() {\n\tif (!window.io) return setTimeout(tryToLoad, 10);\n\t\n\tsocket = io();\n\t\n\tlet changes = [];\n\tlet valueChanges = {}; // id => change\n\n\taddChangeListener(change => {\n\t\tif (change.origin === 'external' || !networkEnabled)\n\t\t\treturn; // Don't send a change that you have received.\n\t\t\n\t\tif (isInSceneTree(change)) // Don't sync scene\n\t\t\treturn;\n\t\t\n\t\tif (change.type === changeType.setPropertyValue) {\n\t\t\tlet duplicateChange = valueChanges[change.id];\n\t\t\tif (duplicateChange) {\n\t\t\t\tchanges.splice(changes.indexOf(duplicateChange), 1);\n\t\t\t}\n\t\t\tvalueChanges[change.id] = change;\n\t\t}\n\t\tchanges.push(change);\n\t});\n\t\n\tsetInterval(() => {\n\t\tif (changes.length === 0)\n\t\t\treturn;\n\t\tlet packedChanges = changes.map(packChange);\n\t\tchanges.length = 0;\n\t\tvalueChanges = {};\n\t\tconsole.log('sending', packedChanges);\n\t\tsocket.emit('c', packedChanges);\n\t}, 100);\n\n\tsocket.on('c', packedChanges => {\n\t\tif (!networkEnabled)\n\t\t\treturn;\n\t\t\n\t\tconsole.log('received', packedChanges);\n\t\tpackedChanges.forEach(change => {\n\t\t\tchange = unpackChange(change);\n\t\t\tif (change)\n\t\t\t\texecuteChange(change);\n\t\t});\n\t});\n}\n\ntryToLoad();\n","import assert from '../assert';\n\nimport Serializable from './serializable';\n(() => {\n\tclass S extends Serializable {}\n\tSerializable.registerSerializable(S, 'tes', json => {\n\t\treturn new S(json.id);\n\t});\n\tlet s = new S();\n\tlet id = s.id;\n\tassert(typeof id === 'string' && id.length > 10);\n\tlet json = s.toJSON();\n\tassert(json && typeof json === 'object' && typeof json.id === 'string');\n\ts.delete();\n\ts = Serializable.fromJSON(json);\n\tassert(typeof s.id === 'string' && s.id.length > 10 && s.id === id);\n\ts.delete();\n\tconsole.log('Serializable tests OK');\n})();\n\nimport Entity from './entity';\n(() => {\n\tlet i = new Entity();\n\tassert(i.components.size === 0);\n\tassert(i.getComponent('moi') === null);\n\tassert(i.getComponents('moi').length === 0);\n\ti.delete();\n\tconsole.log('Entity tests OK');\n})();\n\nimport PropertyType from './propertyType';\n(() => {\n\tassert(PropertyType.float.default().validate('4') === 4);\n\tassert(PropertyType.float.range(0, 1).validate(3) === 1);\n\tconsole.log('PropertyType tests OK');\n})();\n","import { Component, Prop } from '../core/component';\n\n// Export so that other components can have this component as parent\nexport default Component.register({\n\tname: 'Example',\n\tdescription: 'Description of what this component does',\n\tcategory: 'Core', // You can also make up new categories.\n\ticon: 'fa-bars', // Font Awesome id\n\trequirements: ['Transform'], // These shared components are autofilled. Error if component is not found.\n\tchildren: ['Image', 'Image', 'Sound'], // These private components are also autofilled. Error if component is not found.\n\tproperties: [\n\t\tProp('variable', 0.5, Prop.float, Prop.float.range(0, 1), 'Description of the property'),\n\t\tProp('otherVar_iaerfperfjoierj', 'Hello', Prop.string, 'Description of the property')\n\t],\n\tparentClass: Component,\n\tprototype: {\n\t\tstaticVariable: 'Example class info',\n\t\tconstructor() {\n\t\t\t// This will be called once, when creating the component\n\t\t\tthis.hiddenVariable = 3;\n\t\t},\n\t\tpreInit() {\n\t\t\t// preInit is called for every component before any component is inited with init(). Children are already preInited here.\n\t\t\tthis.data = {\n\t\t\t\tlotsOfData: 123 + this.variable + this.hiddenVariable\n\t\t\t};\n\t\t},\n\t\tinit() {\n\t\t\t// All the components of this entity has been preInited. You can use them. Children are already inited here.\n\t\t\tthis.Transform.position.x = this.Transform.position.y + 1;\n\n\t\t\tthis.howToAccessChildren = [\n\t\t\t\tthis.children.Image[0].property,\n\t\t\t\tthis.children.Sound.property\n\t\t\t];\n\n\t\t\tthis.SomeComponent = this.entity.getComponent('SomeComponent');\n\t\t},\n\t\tsleep() {\n\t\t\t// Release all the data created in preInit and init\n\t\t\tthis.data = null;\n\t\t\tthis.SomeComponent = null;\n\t\t\tthis.howToAccessChildren = null;\n\t\t\t// Position component is automatically released because it is a requirement.\n\t\t},\n\t\tdelete() {\n\t\t\t// This will be called once, when component stops existing\n\t\t}\n\t}\n});\n","/*\n Global event system\n\n let unlisten = events.listen('event name', function(params, ...) {});\n eventManager.dispatch('event name', paramOrParamArray);\n unlisten();\n */\n\nlet listeners = {};\n\nexport default events = {\n\tlisten(event, callback) {\n\t\tif (!listeners.hasOwnProperty(event)) {\n\t\t\tlisteners[event] = [];\n\t\t}\n\t\tlisteners[event].push(callback);\n\t\treturn () => {\n\t\t\tvar index = listeners[event].indexOf(callback);\n\t\t\tlisteners[event].splice(index, 1);\n\t\t};\n\t},\n\tdispatch(event, ...args) {\n\t\tif (listeners.hasOwnProperty(event)) {\n\t\t\tfor (var i = 0; i < listeners[event].length; ++i) {\n\t\t\t\tlisteners[event][i].apply(null, args);\n\t\t\t\t/*\n\t\t\t\ttry {\n\t\t\t\t\tlisteners[event][i].apply(null, args);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tif (console && console.error) {\n\t\t\t\t\t\tconsole.error(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}\n\t\t}\n\t},\n\tgetLoadEventPromise(event) {\n\t\treturn new Promise(function(res) {\n\t\t\tevents.listen(event, res);\n\t\t});\n\t}\n};\n\n// DOM / ReDom event system\n\nexport function dispatch(view, type, data) {\n\tconst el = view === window ? view : view.el || view;\n\tconst debug = 'Debug info ' + new Error().stack;\n\tel.dispatchEvent(new CustomEvent(type, {\n\t\tdetail: { data, debug },\n\t\tbubbles: true\n\t}));\n}\nexport function listen(view, type, handler) {\n\tlet el = view === window ? view : view.el || view;\n\tel.addEventListener(type, event => {\n\t\tif (event instanceof CustomEvent)\n\t\t\thandler(event.detail.data, event.detail.debug);\n\t\telse\n\t\t\thandler(event);\n\t});\n}\n","var HASH = '#'.charCodeAt(0);\nvar DOT = '.'.charCodeAt(0);\n\nfunction createElement (query, ns) {\n  var tag;\n  var id;\n  var className;\n\n  var mode = 0;\n  var start = 0;\n\n  for (var i = 0; i <= query.length; i++) {\n    var char = query.charCodeAt(i);\n\n    if (char === HASH || char === DOT || !char) {\n      if (mode === 0) {\n        if (i === 0) {\n          tag = 'div';\n        } else if (!char) {\n          tag = query;\n        } else {\n          tag = query.substring(start, i);\n        }\n      } else {\n        var slice = query.substring(start, i);\n\n        if (mode === 1) {\n          id = slice;\n        } else if (className) {\n          className += ' ' + slice;\n        } else {\n          className = slice;\n        }\n      }\n\n      start = i + 1;\n\n      if (char === HASH) {\n        mode = 1;\n      } else {\n        mode = 2;\n      }\n    }\n  }\n\n  var element = ns ? document.createElementNS(ns, tag) : document.createElement(tag);\n\n  if (id) {\n    element.id = id;\n  }\n\n  if (className) {\n    element.className = className;\n  }\n\n  return element;\n}\n\nfunction text (content) {\n  return document.createTextNode(content);\n}\n\nfunction mount (parent, child, before) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (childEl.__redom_list) {\n    childEl = childEl.el;\n  }\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  if (child !== childEl) {\n    childEl.__redom_view = child;\n  }\n  if (child.isMounted) {\n    child.remount && child.remount();\n  } else {\n    child.mount && child.mount();\n  }\n  if (before) {\n    parentEl.insertBefore(childEl, before.el || before);\n  } else {\n    parentEl.appendChild(childEl);\n  }\n  if (child.isMounted) {\n    child.remounted && child.remounted();\n  } else {\n    child.isMounted = true;\n    child.mounted && child.mounted();\n  }\n}\n\nfunction unmount (parent, child) {\n  var parentEl = parent.el || parent;\n  var childEl = child.el || child;\n\n  if (child === childEl && childEl.__redom_view) {\n    // try to look up the view if not provided\n    child = childEl.__redom_view;\n  }\n\n  child.unmount && child.unmount();\n\n  parentEl.removeChild(childEl);\n\n  child.isMounted = false;\n  child.unmounted && child.unmounted();\n}\n\nvar elcache = {};\n\nfunction el (query) {\n  var arguments$1 = arguments;\n\n  var element;\n\n  if (typeof query === 'string') {\n    element = (elcache[query] || (elcache[query] = createElement(query))).cloneNode(false);\n  } else if (query && query.nodeType) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  var empty = true;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments$1[i];\n\n    if (!arg) {\n      continue;\n    }\n\n    // support middleware\n    if (typeof arg === 'function') {\n      arg(element);\n    } else if (typeof arg === 'string' || typeof arg === 'number') {\n      if (empty) {\n        empty = false;\n        element.textContent = arg;\n      } else {\n        element.appendChild(text(arg));\n      }\n    } else if (arg.nodeType || (arg.el && arg.el.nodeType)) {\n      empty = false;\n      mount(element, arg);\n    } else if (arg.length) {\n      empty = false;\n      for (var j = 0; j < arg.length; j++) {\n        mount(element, arg[j]);\n      }\n    } else if (typeof arg === 'object') {\n      for (var key in arg) {\n        var value = arg[key];\n\n        if (key === 'style') {\n          if (typeof value === 'string') {\n            element.setAttribute(key, value);\n          } else {\n            for (var cssKey in value) {\n              element.style[cssKey] = value[cssKey];\n            }\n          }\n        } else if (key in element || typeof value === 'function') {\n          element[key] = value;\n        } else {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n  }\n\n  return element;\n}\n\nel.extend = function (query) {\n  var clone = (elcache[query] || (elcache[query] = createElement(query)));\n\n  return el.bind(this, clone);\n};\n\nfunction setChildren (parent, children) {\n  var parentEl = parent.el || parent;\n  var traverse = parentEl.firstChild;\n\n  for (var i = 0; i < children.length; i++) {\n    var child = children[i];\n\n    if (!child) {\n      continue;\n    }\n\n    var childEl = child.el || child;\n\n    if (childEl === traverse) {\n      traverse = traverse.nextSibling;\n      continue;\n    }\n\n    mount(parent, child, traverse);\n  }\n\n  while (traverse) {\n    var next = traverse.nextSibling;\n\n    unmount(parent, traverse);\n\n    traverse = next;\n  }\n}\n\nfunction list (parent, View, key, initData) {\n  return new List(parent, View, key, initData);\n}\n\nfunction List (parent, View, key, initData) {\n  this.__redom_list = true;\n  this.View = View;\n  this.key = key;\n  this.initData = initData;\n  this.views = [];\n  this.el = typeof parent === 'string' ? el(parent) : parent;\n\n  if (key) {\n    this.lookup = {};\n  }\n}\n\nList.extend = function (parent, View, key, initData) {\n  return List.bind(List, parent, View, key, initData);\n};\n\nlist.extend = List.extend;\n\nList.prototype.update = function (data) {\n  if ( data === void 0 ) data = [];\n\n  var View = this.View;\n  var key = this.key;\n  var functionKey = typeof key === 'function';\n  var initData = this.initData;\n  var newViews = new Array(data.length);\n  var oldViews = this.views;\n  var newLookup = key && {};\n  var oldLookup = key && this.lookup;\n\n  for (var i = 0; i < data.length; i++) {\n    var item = data[i];\n    var view = (void 0);\n\n    if (key) {\n      var id = functionKey ? key(item) : item[key];\n      view = newViews[i] = oldLookup[id] || new View(initData, item, i, data);\n      newLookup[id] = view;\n      view.__id = id;\n    } else {\n      view = newViews[i] = oldViews[i] || new View(initData, item, i, data);\n    }\n    var el$$1 = view.el;\n    if (el$$1.__redom_list) {\n      el$$1 = el$$1.el;\n    }\n    el$$1.__redom_view = view;\n    view.update && view.update(item, i, data);\n  }\n\n  setChildren(this, newViews);\n\n  if (key) {\n    this.lookup = newLookup;\n  }\n  this.views = newViews;\n};\n\nfunction router (parent, Views) {\n  return new Router(parent, Views);\n}\n\nvar Router = function Router (parent, Views) {\n  this.el = typeof parent === 'string' ? el(parent) : parent;\n  this.Views = Views;\n};\nRouter.prototype.update = function update (route, data) {\n  if (route !== this.route) {\n    var Views = this.Views;\n    var View = Views[route];\n\n    this.view = View && new View();\n    this.route = route;\n\n    setChildren(this.el, [ this.view ]);\n  }\n  this.view && this.view.update && this.view.update(data);\n};\n\nvar SVG = 'http://www.w3.org/2000/svg';\n\nvar svgcache = {};\n\nfunction svg (query, a) {\n  var arguments$1 = arguments;\n\n  var element;\n\n  if (typeof query === 'string') {\n    element = (svgcache[query] || (svgcache[query] = createElement(query, SVG))).cloneNode(false);\n  } else if (query && query.nodeType) {\n    element = query.cloneNode(false);\n  } else {\n    throw new Error('At least one argument required');\n  }\n\n  var empty = true;\n\n  for (var i = 1; i < arguments.length; i++) {\n    var arg = arguments$1[i];\n\n    if (!arg) {\n      continue;\n    } else if (typeof arg === 'function') {\n      arg = arg(element);\n    } else if (typeof arg === 'string' || typeof arg === 'number') {\n      if (empty) {\n        empty = false;\n        element.textContent = arg;\n      } else {\n        element.appendChild(text(arg));\n      }\n    } else if (arg.nodeType || (arg.el && arg.el.nodeType)) {\n      empty = false;\n      mount(element, arg);\n    } else if (typeof arg === 'object') {\n      for (var key in arg) {\n        var value = arg[key];\n\n        if (key === 'style' && typeof value !== 'string') {\n          for (var cssKey in value) {\n            element.style[cssKey] = value[cssKey];\n          }\n        } else if (typeof value === 'function') {\n          element[key] = value;\n        } else {\n          element.setAttribute(key, value);\n        }\n      }\n    }\n  }\n\n  return element;\n}\n\nsvg.extend = function (query) {\n  var clone = (svgcache[query] || (svgcache[query] = createElement(query, SVG)));\n\n  return svg.bind(this, clone);\n};\n\nexport { el, list, List, mount, unmount, router, Router, setChildren, svg, text };\n","import { el, list, mount } from 'redom';\nimport events from '../events';\nimport { setOption, getOption } from '../editor';\n\nexport default class ModuleContainer {\n\tconstructor(moduleContainerName = 'unknownClass.anotherClass', packButtonIcon = 'fa-chevron-left') {\n\t\tthis.modules = [];\n\t\tthis.packButtonEnabled = !!packButtonIcon;\n\t\tthis.el = el(`div.moduleContainer.packable.${moduleContainerName}`,\n\t\t\tthis.packButton = packButtonIcon && el(`i.packButton.button.iconButton.fa.${packButtonIcon}`),\n\t\t\tthis.tabs = list('div.tabs', ModuleTab),\n\t\t\tthis.moduleElements = el('div.moduleElements')\n\t\t);\n\n\t\t\t\n\t\tif (packButtonIcon) {\n\t\t\tlet packId = 'moduleContainerPacked_' + moduleContainerName;\n\t\t\tif (getOption(packId))\n\t\t\t\tthis.el.classList.add('packed');\n\t\t\t\t\n\t\t\tthis.el.onclick = () => {\n\t\t\t\tsetOption(packId, '');\n\t\t\t\treturn this.el.classList.contains('packed') && this.el.classList.remove('packed') || undefined;\n\t\t\t};\n\t\t\tthis.packButton.onclick = e => {\n\t\t\t\tthis.el.classList.add('packed');\n\t\t\t\tsetOption(packId, 'true');\n\t\t\t\te.stopPropagation();\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\n\t\tevents.listen('registerModule_' + moduleContainerName.split('.')[0], (moduleClass, editor) => {\n\t\t\tlet module = new moduleClass(editor);\n\t\t\tmodule.el.classList.add('module-' + module.id);\n\t\t\tthis.modules.push(module);\n\t\t\tthis.el.classList.remove('noModules');\n\t\t\tif (this.modules.length !== 1) {\n\t\t\t\tmodule._hide();\n\t\t\t}\n\t\t\tmount(this.moduleElements, module.el);\n\t\t\tthis._updateTabs();\n\t\t\t\n\t\t\tevents.listen('activateModule_' + module.id, (unpackModuleView = true, ...args) => {\n\t\t\t\tif (unpackModuleView)\n\t\t\t\t\tthis.el.classList.remove('packed');\n\t\t\t\tthis._activateModule(module, args);\n\t\t\t});\n\t\t});\n\t\tthis._updateTabs();\n\t}\n\tupdate() {\n\t\tthis.modules.forEach(m => {\n\t\t\tif (m.update() !== false) {\n\t\t\t\tthis._enableModule(m);\n\t\t\t} else\n\t\t\t\tthis._disableModule(m);\n\t\t});\n\t\tthis._updateTabs();\n\t}\n\t_updateTabs() {\n\t\tif (!this.tabs) return;\n\t\t\n\t\tthis.tabs.update(this.modules);\n\t\t\n\t\tif (!this.packButtonEnabled && this.modules.length <= 1)\n\t\t\tthis.tabs.el.style.display = 'none';\n\t\telse\n\t\t\tthis.tabs.el.style.display = 'block';\n\t\t\n\t\tlet noModules = !this.modules.find(m => m._enabled);\n\t\tthis.el.classList.toggle('noModules', noModules);\n\t}\n\t_activateModule(module, args) {\n\t\tthis.modules.forEach(m => {\n\t\t\tif (m !== module) {\n\t\t\t\tm._hide();\n\t\t\t}\n\t\t});\n\t\tmodule._enabled = true;\n\t\tmodule.activate(...args);\n\t\tmodule._show();\n\t\tthis._updateTabs();\n\t}\n\t_enableModule(module) {\n\t\tif (!module._enabled) {\n\t\t\tmodule._enabled = true;\n\t\t\tlet selectedModule = this.modules.find(m => m._selected);\n\t\t\tif (!selectedModule)\n\t\t\t\tthis._activateModule(module);\n\t\t\tthis._updateTabs();\n\t\t}\n\t}\n\t_disableModule(module) {\n\t\tif (module._enabled) {\n\t\t\tmodule._enabled = false;\n\t\t\tif (module._selected) {\n\t\t\t\tmodule._selected = false;\n\t\t\t\tlet enabledModule = this.modules.find(m => m._enabled);\n\t\t\t\tif (enabledModule)\n\t\t\t\t\tthis._activateModule(enabledModule);\n\t\t\t}\n\t\t\tmodule._hide();\n\t\t\tthis._updateTabs();\n\t\t}\n\t}\n}\n\nclass ModuleTab {\n\tconstructor() {\n\t\tthis.el = el('span.moduleTab.button');\n\t\tthis.module = null;\n\t\tthis.el.onclick = () => {\n\t\t\tevents.dispatch('activateModule_' + this.module.id);\n\t\t};\n\t}\n\tupdate(module) {\n\t\tthis.module = module;\n\t\tthis.el.textContent = module.name;\n\t\tthis.el.classList.toggle('moduleSelected', module._selected);\n\t\tthis.el.classList.toggle('moduleEnabled', module._enabled);\n\t}\n}\n","import { el, list, mount } from 'redom';\nimport ModuleContainer from './moduleContainer';\n\nexport default class Layout {\n\tconstructor() {\n\t\tthis.moduleContainers = [];\n\t\tlet addContainer = (...args) => {\n\t\t\tlet container = new ModuleContainer(...args);\n\t\t\tthis.moduleContainers.push(container);\n\t\t\treturn container;\n\t\t}\n\t\tthis.el = el('div.editorLayout',\n\t\t\tel('div.nonRight',\n\t\t\t\taddContainer('top', null),\n\t\t\t\tel('div.bottomLeft',\n\t\t\t\t\taddContainer('left', 'fa-chevron-left'),\n\t\t\t\t\tel('div.middle',\n\t\t\t\t\t\taddContainer('center', null),\n\t\t\t\t\t\taddContainer('bottom', 'fa-chevron-down')\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t),\n\t\t\taddContainer('right', 'fa-chevron-right')\n\t\t);\n\t}\n\tupdate() {\n\t\tthis.moduleContainers.forEach(mc => mc.update());\n\t}\n}\n","import { el, list, mount } from 'redom';\nimport events from '../events';\n\nexport default class Module {\n\tconstructor() {\n\t\tthis.type = 'module';\n\t\tthis.name = this.name || 'Module';\n\t\tthis.id = this.id || 'module';\n\t\tthis.el = el('div.module', ...arguments);\n\t\tthis._selected = true;\n\t\tthis._enabled = true;\n\t}\n\t// Called when this module is opened. Other modules can call Module.activateModule('Module', ...args);\n\tactivate() {\n\t}\n\t// Called when changes happen. return false to hide from ui\n\tupdate() {\n\t}\n\t_show() {\n\t\tthis.el.classList.remove('hidden');\n\t\tthis._selected = true;\n\t\tthis._enabled = true;\n\t}\n\t_hide() {\n\t\tthis.el.classList.add('hidden');\n\t\tthis._selected = false;\n\t}\n}\n//arguments: moduleName, unpackModuleView=true, ...args \nModule.activateModule = function(moduleId, unpackModuleView=true, ...args) {\n\tevents.dispatch('activateModule_' + moduleId, unpackModuleView, ...args);\n};\nModule.packModuleContainer = function(moduleContainerName) {\n\tdocument.querySelectorAll(`.moduleContainer.${moduleContainerName}`)[0].classList.add('packed');\n};\nModule.unpackModuleContainer = function(moduleContainerName) {\n\tdocument.querySelectorAll(`.moduleContainer.${moduleContainerName}`)[0].classList.remove('packed');\n};\n\n// moduleContainerName = left | middle | right | bottom\nModule.register = function(moduleClass, moduleContainerName) {\n\tregisterPromise = registerPromise.then(() => {\n\t\tevents.dispatch('registerModule_' + moduleContainerName, moduleClass);\n\t});\n};\n\nlet nextTopBarPriorityNumber = 1;\nModule.registerTopButton = function(topButton, priority = nextTopBarPriorityNumber++) {\n\tregisterPromise = registerPromise.then(() => {\n\t\tevents.dispatch('registerTopButton', topButton, priority);\n\t});\n};\n\n\nlet registerPromise = new Promise(function(resolve) {\n\tevents.listen('registerModules', function() {\n\t\tregisterPromise.then(() => {\n\t\t\tevents.dispatch('modulesRegistered');\n\t\t});\n\t\tresolve();\n\t});\n});\n","import Serializable from './serializable';\nimport PropertyOwner, { Prop } from '../core/propertyOwner';\nimport Scene, { scene } from './scene';\n\nlet propertyTypes = [\n\tProp('name', 'No name', Prop.string)\n];\n\nexport default class Level extends Serializable {\n\tconstructor(predefinedId) {\n\t\tsuper(...arguments);\n\n\t\tif (predefinedId)\n\t\t\tconsole.log('level import');\n\t\telse\n\t\t\tconsole.log('level created');\n\t}\n\tcreateScene(predefinedSceneObject = false) {\n\t\tif (!predefinedSceneObject)\n\t\t\tnew Scene();\n\t\tlet entities = this.getChildren('epr').map(epr => epr.createEntity());\n\t\tscene.addChildren(entities);\n\t\tscene.level = this;\n\t\treturn scene;\n\t}\n\t\n\t\n\t/*\n\tOPTIMIZATION DOES NOT WORK, YET\n\ttoJSON() {\n\t\tlet json = super.toJSON();\n\t\tconsole.log('before', json);\n\t\tif (json.c) {\n\t\t\tlet prototypeIds = new Set();\n\t\t\tjson.c.forEach(child => {\n\t\t\t\tconsole.log('child', child);\n\t\t\t\tprototypeIds.add(child.p);\n\t\t\t});\n\t\t\t\n\t\t\tlet prototypeIdToNum = {};\n\t\t\tlet prototypeIdArray = [];\n\t\t\tlet num = 0;\n\t\t\tprototypeIds.forEach(key => {\n\t\t\t\tprototypeIdArray[num] = key;\n\t\t\t\tprototypeIdToNum[key] = num++;\n\t\t\t});\n\n\t\t\tjson.c.forEach(child => {\n\t\t\t\tchild.p = prototypeIdToNum[child.p] || child.p;\n\t\t\t});\n\t\t\t\n\t\t\tjson.p = prototypeIdArray;\n\n\t\t\tconsole.log(json, prototypeIds, prototypeIdToNum, prototypeIdArray);\n\t\t}\n\t\treturn json;\n\t}\n\t*/\n}\nPropertyOwner.defineProperties(Level, propertyTypes);\n\nSerializable.registerSerializable(Level, 'lvl');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\nimport { editor, modulesRegisteredPromise } from '../editor';\nimport Level from '../../core/level';\n\nexport class TopBarModule extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.logo = el('img.logo.button.iconButton', { src: '../img/logo_reflection_medium.png' }),\n\t\t\tthis.buttons = el('div.buttonContainer')\n\t\t);\n\t\tthis.id = 'topbar';\n\t\tthis.name = 'TopBar'; // not visible\n\t\t\n\t\tevents.listen('addTopButtonToTopBar', topButton => {\n\t\t\tmount(this.buttons, topButton);\n\t\t});\n\t\t\n\t\tlet createLevelButton = new TopButton({\n\t\t\ttext: 'New level',\n\t\t\tcallback: () => {\n\t\t\t\tlet lvl = new Level();\n\t\t\t\teditor.game.addChild(lvl);\n\t\t\t\teditor.setLevel(lvl);\n\t\t\t}\n\t\t});\n\t}\n}\nModule.register(TopBarModule, 'top');\n\nexport class TopButton {\n\tconstructor({\n\t\ttext = 'Button',\n\t\tcallback,\n\t\ticonClass = 'fa-circle',\n\t\tpriority = 1\n\t} = {}) {\n\t\tthis.priority = priority || 0;\n\t\t\n\t\tthis.el = el('div.button.topIconTextButton',\n\t\t\tel('div.topIconTextButtonContent',\n\t\t\t\tthis.icon = el(`i.fa.${iconClass}`),\n\t\t\t\tthis.text = el('span', text)\n\t\t\t)\n\t\t);\n\t\tthis.el.onclick = () => {\n\t\t\tif (callback) {\n\t\t\t\tcallback(this);\n\t\t\t}\n\t\t};\n\n\t\tmodulesRegisteredPromise.then(() => {\n\t\t\tevents.dispatch('addTopButtonToTopBar', this);\n\t\t});\n\t}\n}\n","import { el, mount, list } from 'redom';\n\nlet popupDepth = 0;\n\nexport default class Popup {\n\tconstructor({\n\t\ttitle = 'Undefined popup',\n\t\tcancelCallback = null,\n\t\twidth = null,\n\t\tcontent = el('div', 'Undefined content')\n\t}) {\n\t\tthis.el = el('div.popup', { style: { 'z-index': 1000 + popupDepth++ } },\n\t\t\tnew Layer(this),\n\t\t\tel('div.popupContent',\n\t\t\t\tthis.text = el('div.popupTitle', title),\n\t\t\t\tthis.content = content\n\t\t\t)\n\t\t);\n\t\tthis.cancelCallback = cancelCallback;\n\t\t\n\t\tmount(document.body, this.el);\n\t}\n\tremove() {\n\t\tpopupDepth--;\n\t\tthis.el.parentNode.removeChild(this.el);\n\t}\n}\n\nexport class Button {\n\tconstructor() {\n\t\tthis.el = el('button.button', {onclick: () => {\n\t\t\tthis.callback();\n\t\t}});\n\t}\n\tupdate(button) {\n\t\tthis.el.textContent = button.text;\n\t\tif (button.icon) {\n\t\t\tlet icon = el('i.fa.' + button.icon);\n\t\t\tif (button.color)\n\t\t\t\ticon.style.color = button.color;\n\t\t\tmount(this.el, icon, this.el.firstChild);\n\t\t}\n\t\tthis.callback = button.callback;\n\t\tif (button.color)\n\t\t\tthis.el.style['border-color'] = button.color;\n\t}\n}\n\nclass Layer {\n\tconstructor(popup) {\n\t\tthis.el = el('div.popupLayer', { onclick: () => {\n\t\t\tpopup.remove();\n\t\t\tpopup.cancelCallback && popup.cancelCallback();\n\t\t} });\n\t}\n}\n","import { el, list, mount } from 'redom';\n\n\n// <dataTypeName>: createFunction(container, oninput, onchange) -> setValueFunction\nexport default editors = {};\n\neditors.default = editors.string = (container, oninput, onchange) => {\n\tlet input = el('input', {\n\t\toninput: () => oninput(input.value),\n\t\tonchange: () => onchange(input.value)\n\t});\n\tmount(container, input);\n\n\treturn val => input.value = val;\n};\n\neditors.float = editors.int = (container, oninput, onchange) => {\n\tlet input = el('input', {\n\t\ttype: 'number',\n\t\toninput: () => oninput(+input.value),\n\t\tonchange: () => onchange(+input.value)\n\t});\n\tmount(container, input);\n\treturn val => input.value = +(+val).toFixed(4);\n};\n\neditors.bool = (container, oninput, onchange) => {\n\tlet input = el('input', {\n\t\ttype: 'checkbox',\n\t\tonchange: () => {\n\t\t\tonchange(input.checked);\n\t\t\tlabel.textContent = input.checked ? 'Yes' : 'No';\n\t\t}\n\t});\n\tlet label = el('span');\n\tmount(container, el('label', input, label));\n\treturn val => {\n\t\tinput.checked = val;\n\t\tlabel.textContent = val ? 'Yes' : 'No';\n\t}\n};\n\neditors.vector = (container, oninput, onchange) => {\n\tfunction getValue() {\n\t\treturn new Victor(+xInput.value, +yInput.value);\n\t}\n\tlet xInput = el('input.xInput', {\n\t\ttype: 'number',\n\t\toninput: () => oninput(getValue()),\n\t\tonchange: () => onchange(getValue())\n\t});\n\tlet yInput = el('input', {\n\t\ttype: 'number',\n\t\toninput: () => oninput(getValue()),\n\t\tonchange: () => onchange(getValue())\n\t});\n\tmount(container, el('div', el('span', 'x:'), xInput, el('span', 'y:'), yInput));\n\treturn val => {\n\t\txInput.value = +val.x.toFixed(4);\n\t\tyInput.value = +val.y.toFixed(4);\n\t};\n};\n\neditors.enum = (container, oninput, onchange, propertyType) => {\n\tlet select = el('select', ...propertyType.validator.parameters.map(p => el('option', p)));\n\tselect.onchange = () => {\n\t\tonchange(select.value);\n\t};\n\tmount(container, select);\n\treturn val => {\n\t\tselect.value = val;\n\t}\n};\n","import Popup, { Button } from './popup';\nimport { componentClasses } from '../../../core/component';\nimport ComponentData from '../../../core/componentData';\nimport { list, el } from 'redom';\nimport assert from '../../../assert';\nimport { setChangeOrigin } from '../../../core/serializableManager';\n\nexport default class ComponentAdder extends Popup {\n\tconstructor(parent, callback) {\n\t\tsuper({\n\t\t\ttitle: 'Add component',\n\t\t\twidth: '500px',\n\t\t\tcontent: this.buttons = list('div', Button)\n\t\t});\n\t\t\n\t\tthis.parent = parent;\n\n\t\tlet components = Array.from(componentClasses.values());\n\t\tcomponents = components.map(comp => {\n\t\t\treturn {\n\t\t\t\ttext: comp.componentName,\n\t\t\t\tcolor: comp.color,\n\t\t\t\ticon: comp.icon,\n\t\t\t\tcallback: () => {\n\t\t\t\t\tthis.addComponentToParent(comp.componentName);\n\t\t\t\t\tcallback && callback();\n\t\t\t\t}\n\t\t\t};\n\t\t});\n\t\t\n\t\tthis.update(components);\n\t}\n\taddComponentToParent(componentName) {\n\t\tsetChangeOrigin(this);\n\t\tif (['epr', 'prt'].indexOf(this.parent.threeLetterType) >= 0) {\n\t\t\tlet component = new ComponentData(componentName);\n\t\t\tthis.parent.addChild(component);\n\t\t\treturn component;\n\t\t}\n\t\tassert(false);\n\t}\n\tupdate(components) {\n\t\tthis.buttons.update(components);\n\t}\n}\n","import { scene } from '../../core/scene';\nimport { editor } from '../editor';\nimport { changeType } from '../../core/serializableManager';\nimport assert from '../../assert';\n\nlet radius = 10;\n\nexport function shouldSyncLevelAndScene() {\n\treturn editor.selectedLevel && scene && scene.isInInitialState();\n}\n\nfunction setEntityPropertyValue(entity, componentName, componentId, sourceProperty) {\n\tlet component = entity.getComponents(componentName)\n\t.filter(c => c._componentId === componentId)[0];\n\n\tif (component)\n\t\tcomponent._properties[sourceProperty.name].value = sourceProperty.value;\n}\n\n// Call setChangeOrigin(this) before calling this\nexport function syncAChangeBetweenSceneAndLevel(change) {\n\tif (!scene || !scene.level) return;\n\t\n\tif (!shouldSyncLevelAndScene())\n\t\treturn;\n\n\tif (change.type === 'editorSelection')\n\t\treturn;\n\t\n\tlet ref = change.reference;\n\tassert(ref._isInTree);\n\t\n\tlet threeLetterType = ref && ref.threeLetterType || null;\n\tlet rootThreeLetterType = change.reference.getRoot().threeLetterType;\n\tif (rootThreeLetterType !== 'gam')\n\t\treturn;\n\t\n\tif (change.type === changeType.addSerializableToTree) {\n\t\tif (threeLetterType === 'epr') {\n\t\t\tlet epr = ref;\n\t\t\tscene.addChild(epr.createEntity());\n\t\t}\n\t} else if (change.type === changeType.setPropertyValue) {\n\t\tlet property = ref;\n\t\tlet cda = property.findParent('cda');\n\t\tif (!cda)\n\t\t\treturn;\n\t\tlet prototype = cda.getParent();\n\t\tif (prototype.threeLetterType === 'epr') {\n\t\t\t// EntityPrototype\n\t\t\t\n\t\t\tif (prototype.previouslyCreatedEntity) {\n\t\t\t\tsetEntityPropertyValue(prototype.previouslyCreatedEntity, cda.name, cda.componentId, property);\n\t\t\t}\n\t\t} else {\n\t\t\t// Prototype\n\t\t\tconsole.log('syncAChangeBetweenSceneAndLevel');\n\t\t\t\n\t\t\tlet affectedPrototypes = new Set();\n\t\t\t\n\t\t\tfunction goThroughChildren(prototype) {\n\t\t\t\tprototype.getChildren('prt').forEach(proto => {\n\t\t\t\t\tif (proto.findOwnProperty(cda.componentId, property.name) === null) {\n\t\t\t\t\t\t// Doesn't override property. Therefore prototype is affected\n\t\t\t\t\t\taffectedPrototypes.add(proto);\n\t\t\t\t\t\tgoThroughChildren(proto);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\taffectedPrototypes.add(prototype);\n\t\t\tgoThroughChildren(prototype);\n\t\t\t\n\t\t\tlet entities = scene.level.getChildren('epr').filter(epr => {\n\t\t\t\treturn affectedPrototypes.has(epr.prototype) \n\t\t\t\t\t&& epr.findOwnProperty(cda.componentId, property.name) === null;\n\t\t\t}).map(epr => epr.previouslyCreatedEntity).filter(ent => ent && ent._alive);\n\n\t\t\tconsole.log('syncAChangeBetweenSceneAndLevel entities', entities);\n\t\t\tconsole.log('poi', scene.level.getChildren('epr').filter(epr => {\n\t\t\t\tconsole.log(affectedPrototypes.has(epr.prototype), epr.findOwnProperty(cda.componentId, property.name));\n\t\t\t\treturn affectedPrototypes.has(epr.prototype)\n\t\t\t\t\t&& epr.findOwnProperty(cda.componentId, property.name) === null;\n\t\t\t}));\n\t\t\tentities.forEach(ent => {\n\t\t\t\tsetEntityPropertyValue(ent, cda.name, cda.componentId, property);\n\t\t\t});\n\t\t}\n\t} else if (change.type === changeType.deleteAllChildren) {\n\t\t\n\t} else if (change.type === changeType.deleteSerializable) {\n\t\tif (threeLetterType === 'epr') {\n\t\t\tlet epr = ref;\n\t\t\tif (epr.previouslyCreatedEntity)\n\t\t\t\tepr.previouslyCreatedEntity.delete();\n\t\t}\n\t} else if (change.type === changeType.move) {\n\t\t\n\t}\t\n}\n\nexport function copyEntitiesToScene(entities) {\n\tif (scene) {\n\t\tif (shouldSyncLevelAndScene()) {\n\t\t\tlet entityPrototypes = entities.map(entity => {\n\t\t\t\tlet epr = entity.prototype.clone();\n\t\t\t\tepr.position = entity.position.clone();\n\t\t\t\treturn epr;\n\t\t\t});\n\t\t\teditor.selectedLevel.addChildren(entityPrototypes);\n\t\t\tscene.addChildren(entityPrototypes.map(epr => epr.createEntity()));\n\t\t} else {\n\t\t\tscene.addChildren(entities.map(e => e.clone()));\n\t\t}\n\t}\n}\n\nexport function getEntityUnderMouse(mousePos) {\n\tlet nearestEntity = null;\n\tlet nearestDistanceSq = Infinity;\n\t\n\tlet minX = mousePos.x - radius;\n\tlet maxX = mousePos.x + radius;\n\tlet minY = mousePos.y - radius;\n\tlet maxY = mousePos.y + radius;\n\t\n\tscene.getChildren('ent').filter(ent => {\n\t\tlet p = ent.position;\n\t\tif (p.x < minX) return false;\n\t\tif (p.x > maxX) return false;\n\t\tif (p.y < minY) return false;\n\t\tif (p.y > maxY) return false;\n\t\tlet distSq = mousePos.distanceSq(p);\n\t\tif (distSq < nearestDistanceSq) {\n\t\t\tnearestDistanceSq = distSq;\n\t\t\tnearestEntity = ent;\n\t\t}\n\t});\n\treturn nearestEntity;\n}\nexport function getEntitiesInSelection(start, end) {\n\tlet minX = Math.min(start.x, end.x);\n\tlet maxX = Math.max(start.x, end.x);\n\tlet minY = Math.min(start.y, end.y);\n\tlet maxY = Math.max(start.y, end.y);\n\n\treturn scene.getChildren('ent').filter(ent => {\n\t\tlet p = ent.position;\n\t\tif (p.x < minX) return false;\n\t\tif (p.x > maxX) return false;\n\t\tif (p.y < minY) return false;\n\t\tif (p.y > maxY) return false;\n\t\treturn true;\n\t});\n}\n\nexport function copyPositionFromEntitiesToEntityPrototypes(entities) {\n\tif (shouldSyncLevelAndScene()) {\n\t\tentities.forEach(e => {\n\t\t\te.prototype.position = e.position.clone();\n\t\t});\n\t}\n}\n\nexport function moveEntities(entities, change) {\n\tif (entities.length === 0)\n\t\treturn;\n\n\tentities.forEach(entity => {\n\t\tlet transform = entity.getComponent('Transform');\n\t\ttransform.position = transform.position.add(change);\n\t});\n}\n\nexport function setEntityPositions(entities, position) {\n\tif (entities.length === 0)\n\t\treturn;\n\n\tentities.forEach(entity => {\n\t\tentity.position = position.clone();\n\t});\n}\n\nexport function deleteEntities(entities) {\n\tif (shouldSyncLevelAndScene()) {\n\t\tentities.forEach(e => e.prototype.delete());\n\t}\n\tentities.forEach(e => e.delete());\n}\n\nexport function entityModifiedInEditor(entity, change) {\n\tif (!entity || entity.threeLetterType !== 'ent' || !change || change.type !== changeType.setPropertyValue)\n\t\treturn;\n\t\n\tif (shouldSyncLevelAndScene()) {\n\t\tlet entityPrototype = entity.prototype;\n\t\tconsole.log('before', entityPrototype);\n\t\tlet property = change.reference;\n\t\tlet component = property.getParent();\n\t\tlet changeComponentId = component._componentId;\n\t\tlet changePropertyName = change.reference.name;\n\t\tlet componentData = entityPrototype.getOwnComponentDataOrInherit(changeComponentId);\n\t\tconsole.log('componentData', componentData);\n\t\tlet entityPrototypeProperty = componentData.getPropertyOrCreate(changePropertyName);\n\t\tconsole.log('entityPrototypeProperty', entityPrototypeProperty);\n\t\tentityPrototypeProperty.value = property.value;\n\t\tconsole.log('after', entityPrototype);\n\t}\n\tentity.dispatch('changedInEditor', change);\n}\n\n\n/// Drawing\n\nexport function drawEntityUnderMouse(entity) {\n\tif (!entity)\n\t\treturn;\n\t\n\tlet p = entity.position;\n\tlet r = 10;\n\tscene.context.strokeStyle = '#53f8ff';\n\tscene.context.lineWidth = 1;\n\t\n\tscene.context.beginPath();\n\tscene.context.arc(p.x, p.y, r, 0, 2*Math.PI, false);\n\tscene.context.stroke();\n}\n\nexport function drawSelection(start, end, entitiesInsideSelection = []) {\n\tif (!start || !end)\n\t\treturn;\n\t\n\tscene.context.strokeStyle = '#53f8ff';\n\tscene.context.lineWidth = 0.2;\n\t\n\tlet r = 10;\n\n\tentitiesInsideSelection.forEach(e => {\n\t\tlet p = e.position;\n\t\tscene.context.beginPath();\n\t\tscene.context.arc(p.x, p.y, r, 0, 2*Math.PI, false);\n\t\tscene.context.stroke();\n\t});\n\t\n\t\n\tscene.context.fillStyle = 'rgba(255, 255, 0, 0.2)';\n\tscene.context.lineWidth = 1;\n\tscene.context.strokeStyle = 'yellow';\n\t\n\tscene.context.fillRect(start.x, start.y, end.x - start.x, end.y - start.y);\n\tscene.context.strokeRect(start.x, start.y, end.x - start.x, end.y - start.y);\n}\n\nexport function drawSelectedEntities(entities) {\n\tif (!Array.isArray(entities) || entities.length === 0)\n\t\treturn;\n\t\n\tlet r = 10;\n\t\n\tscene.context.strokeStyle = '#53f8ff';\n\tscene.context.lineWidth = 1.7;\n\n\tentities.forEach(e => {\n\t\tlet p = e.position;\n\t\tscene.context.beginPath();\n\t\tscene.context.arc(p.x, p.y, r, 0, 2*Math.PI, false);\n\t\tscene.context.stroke();\n\t});\n}\n\nexport function drawPositionHelpers(entities) {\n\tscene.context.fillStyle = 'white';\n\tlet size = 3;\n\tlet halfSize = size/2;\n\tentities.forEach(e => {\n\t\tlet p = e.position;\n\t\tscene.context.fillRect(p.x - halfSize, p.y - halfSize, size, size);\n\t});\n\t\n\tscene.context.fillStyle = 'black';\n\tsize = 2;\n\thalfSize = size/2;\n\tentities.forEach(e => {\n\t\tlet p = e.position;\n\t\tscene.context.fillRect(p.x - halfSize, p.y - halfSize, size, size);\n\t});\n}\n","import { el, list, mount } from 'redom';\nimport events, { listen, dispatch } from '../events';\nimport showPopup from './popup/popup';\nimport ComponentData from '../../core/componentData';\nimport assert from '../../assert';\nimport editors from './propertyEditorTypes';\nimport ComponentAdder from './popup/componentAdder';\nimport { changeType, setChangeOrigin } from '../../core/serializableManager';\nimport { Prop } from '../../core/component';\nimport { setOption, getOption, editor } from '../editor';\nimport { scene } from '../../core/scene';\nimport * as sceneEdit from '../util/sceneEdit';\n\n/*\nReference: Unbounce\n https://cdn8.webmaster.net/pics/Unbounce2.jpg\n */\n\nexport default class PropertyEditor {\n\tconstructor() {\n\t\tthis.el = el('div.propertyEditor');\n\t\tthis.dirty = true;\n\t\tthis.editingProperty = false;\n\n\t\t// Change in serializable tree\n\t\tevents.listen('change', change => {\n\t\t\tif (change.type === 'editorSelection') {\n\t\t\t\tthis.dirty = true;\n\t\t\t} else if (change.type === changeType.setPropertyValue) {\n\t\t\t\tif (this.item && this.item.hasDescendant(change.reference)) {\n\t\t\t\t\tif (change.origin === this) {\n\t\t\t\t\t\tif (this.item.threeLetterType === 'ent') {\n\t\t\t\t\t\t\tthis.item.dispatch('changedInEditor');\n\t\t\t\t\t\t\tsceneEdit.entityModifiedInEditor(this.item, change);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.dirty = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (change.type === changeType.addSerializableToTree) {\n\t\t\t\tif (change.parent === this.item || this.item && this.item.hasDescendant(change.parent))\n\t\t\t\t\tthis.dirty = true;\n\t\t\t} else if (change.type === changeType.deleteSerializable) {\n\t\t\t\tif (this.item && this.item.hasDescendant(change.reference)) {\n\t\t\t\t\tthis.dirty = true;\n\t\t\t\t}\n\t\t\t} else if (change.type === changeType.deleteAllChildren) {\n\t\t\t\tif (this.item && this.item.hasDescendant(change.reference)) {\n\t\t\t\t\tthis.dirty = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tlisten(this, 'makingChanges', () => {\n\t\t\tsetChangeOrigin(this);\n\t\t});\n\t\t\n\t\t// Change in this editor\n\t\tlisten(this, 'markPropertyEditorDirty', () => {\n\t\t\tthis.dirty = true;\n\t\t});\n\t\t\n\t\tlisten(this, 'propertyEditorSelect', items => {\n\t\t\teditor.select(items, this);\n\t\t});\n\t}\n\tupdate(items, threeLetterType) {\n\t\tif (!this.dirty) return;\n\t\t$(this.el).empty();\n\t\tif (!items) return;\n\t\t\n\t\tif (['prt', 'ent', 'epr'].indexOf(threeLetterType) >= 0 && items.length === 1) {\n\t\t\tthis.item = items[0];\n\t\t\tlet prototypeEditor = new Container();\n\t\t\tprototypeEditor.update(this.item);\n\t\t\tmount(this.el, prototypeEditor);\n\t\t}\n\t\tthis.dirty = false;\n\t}\n}\n\nclass Container {\n\tconstructor() {\n\t\tthis.el = el('div.container',\n\t\t\tthis.title = el('div.containerTitle'),\n\t\t\tthis.content = el('div.containerContent',\n\t\t\t\tthis.properties = list('table', Property, null, this.propertyEditor),\n\t\t\t\tthis.containers = list('div', Container, null, this.propertyEditor),\n\t\t\t\tthis.controls = el('div'),\n\t\t\t\tel('i.button.logButton.fa.fa-eye', {\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tconsole.log(this.item);\n\t\t\t\t\t\twindow.item = this.item;\n\t\t\t\t\t\tconsole.log(`you can use variable 'item'`);\n\t\t\t\t\t\tlet element = el('span', ' logged to console');\n\t\t\t\t\t\tmount(this.title, element);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.title.removeChild(element);\n\t\t\t\t\t\t}, 500);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t)\n\t\t);\n\t\tthis.titleClickedCallback = null;\n\t\tthis.title.onclick = () => {\n\t\t\tthis.titleClickedCallback && this.titleClickedCallback();\n\t\t};\n\t\t\n\t\tlisten(this, 'propertyInherited', property => {\n\t\t\tif (this.item.threeLetterType !== 'icd') return;\n\t\t\t// this.item is inheritedComponentData\n\t\t\tlet proto = this.item.generatedForPrototype;\n\t\t\tproto.createAndAddPropertyForComponentData(this.item, property.name, property.value);\n\t\t\tdispatch(this, 'markPropertyEditorDirty');\n\t\t});\n\t}\n\tupdate(state) {\n\t\tthis.item = state;\n\t\tthis.el.setAttribute('type', this.item.threeLetterType);\n\t\tthis.controls.innerHTML = '';\n\t\tthis.titleClickedCallback = null;\n\n\t\tif (this.item.threeLetterType === 'icd') this.updateInheritedComponentData();\n\t\telse if (this.item.threeLetterType === 'ent') this.updateEntity();\n\t\telse if (this.item.threeLetterType === 'com') this.updateComponent();\n\t\telse if (this.item.threeLetterType === 'prt') this.updatePrototype();\n\t\telse if (this.item.threeLetterType === 'epr') this.updateEntityPrototype();\n\t}\n\tupdatePrototype() {\n\t\tlet inheritedComponentDatas = this.item.getInheritedComponentDatas();\n\t\tthis.containers.update(inheritedComponentDatas);\n\t\tthis.properties.update(this.item.getChildren('prp'));\n\t\tmount(this.controls, el('button.button', el('i.fa.fa-puzzle-piece'), 'Add component', {\n\t\t\tonclick: () => {\n\t\t\t\tnew ComponentAdder(this.item);\n\t\t\t}\n\t\t}));\n\t\tmount(this.controls, el('button.button', el('i.fa.fa-clone'), 'Clone type', { onclick: () => {\n\t\t\tdispatch(this, 'makingChanges');\n\t\t\t\n\t\t\tlet clone = this.item.clone();\n\n\t\t\tlet endingNumberMatch = clone.name.match(/\\d+$/); // ending number\n\t\t\tlet num = endingNumberMatch ? parseInt(endingNumberMatch[0]) + 1 : 2;\n\t\t\tlet nameWithoutNumber = endingNumberMatch ? clone.name.substring(0, clone.name.length - endingNumberMatch[0].length) : clone.name;\n\t\t\tlet nameSuggestion = nameWithoutNumber + num++;\n\t\t\twhile (this.item.getParent().findChild('prt', prt => prt.name === nameSuggestion)) {\n\t\t\t\tnameSuggestion = nameWithoutNumber + num++;\n\t\t\t}\n\t\t\tclone.name = nameSuggestion;\n\t\t\tthis.item.getParent().addChild(clone);\n\t\t\tdispatch(this, 'propertyEditorSelect', clone);\n\t\t} }));\n\t\tmount(this.controls, el('button.dangerButton.button', el('i.fa.fa-times'), 'Delete type', { onclick: () => {\n\t\t\tdispatch(this, 'makingChanges');\n\t\t\tthis.item.delete();\n\t\t} }));\n\t}\n\tupdateEntityPrototype() {\n\t\tlet inheritedComponentDatas = this.item.getInheritedComponentDatas();\n\t\tthis.containers.update(inheritedComponentDatas);\n\t\tthis.properties.update(this.item.getChildren('prp'));\n\t\tmount(this.controls, el('button.button', el('i.fa.fa-puzzle-piece'), 'Add component', {\n\t\t\tonclick: () => {\n\t\t\t\tnew ComponentAdder(this.item);\n\t\t\t}\n\t\t}));\n\t}\n\tupdateInheritedComponentData() {\n\t\tthis.updateComponentKindOfThing(this.item.componentClass);\n\t\t\n\t\tlet packId = 'pack' + this.item.generatedForPrototype.id + this.item.componentId;\n\t\tlet packedStatus = getOption(packId);\n\t\tif (packedStatus === 'true') {\n\t\t\tthis.el.classList.add('packed');\n\t\t} else if (packedStatus === 'false') {\n\t\t\tthis.el.classList.remove('packed');\n\t\t} else {\n\t\t\tthis.el.classList.toggle('packed', !this.item.ownComponentData);\n\t\t}\n\t\t\n\t\tthis.titleClickedCallback = () => {\n\t\t\tthis.el.classList.toggle('packed');\n\t\t\tsetOption(packId, this.el.classList.contains('packed') ? 'true' : 'false');\n\t\t};\n\t\t\n\t\tlet parentComponentData = this.item.ownComponentData && this.item.ownComponentData.getParentComponentData();\n\t\tlet hasOwnProperties = false;\n\t\tthis.item.properties.forEach(prop => {\n\t\t\tif (prop.id)\n\t\t\t\thasOwnProperties = true;\n\t\t});\n\t\tthis.properties.update(this.item.properties);\n\t\t\n\t\tif (!this.item.ownComponentData || parentComponentData) {\n\t\t\tmount(this.controls, el('button.button', 'Show parent', {\n\t\t\t\tonclick: () => {\n\t\t\t\t\tlet componentData = this.item.generatedForPrototype.getParentPrototype().findComponentDataByComponentId(this.item.componentId, true);\n\t\t\t\t\tdispatch(this, 'propertyEditorSelect', componentData.getParent());\n\t\t\t\t\tdispatch(this, 'markPropertyEditorDirty');\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tif (this.item.componentClass.componentName === 'Transform'\n\t\t\t&& this.item.generatedForPrototype.threeLetterType === 'epr')\n\t\t\treturn;\n\t\t\n\t\tif (this.item.componentClass.allowMultiple) {\n\t\t\tmount(this.controls, el('button.button', el('i.fa.fa-clone'), 'Clone', {\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdispatch(this, 'makingChanges');\n\t\t\t\t\tlet clone = this.item.ownComponentData.clone();\n\t\t\t\t\tthis.item.generatedForPrototype.addChild(clone);\n\t\t\t\t\tdispatch(this, 'markPropertyEditorDirty');\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\tif (hasOwnProperties) {\n\t\t\tmount(this.controls, el('button.dangerButton.button', el('i.fa.fa-refresh'), 'Reset', {\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdispatch(this, 'makingChanges');\n\t\t\t\t\tdispatch(this, 'markPropertyEditorDirty', 'fromReset');\n\t\t\t\t\tif (this.item.ownComponentData.getParentComponentData()) {\n\t\t\t\t\t\tthis.item.ownComponentData.delete();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.item.ownComponentData.deleteChildren();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\tif (this.item.ownComponentData && !parentComponentData) {\n\t\t\tmount(this.controls, el('button.dangerButton.button', el('i.fa.fa-times'), 'Delete', {\n\t\t\t\tonclick: () => {\n\t\t\t\t\tdispatch(this, 'makingChanges');\n\t\t\t\t\tdispatch(this, 'markPropertyEditorDirty');\n\t\t\t\t\tthis.item.ownComponentData.delete();\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\tupdateEntity() {\n\t\tthis.title.textContent = this.item.prototype.name;\n\t\tthis.containers.update(this.item.getListOfAllComponents());\n\t\t// this.properties.update(this.item.getChildren('prp'));\n\t}\n\tupdateComponent() {\n\t\tthis.updateComponentKindOfThing(this.item.constructor);\n\t\tthis.properties.update(this.item.getChildren('prp'));\n\t}\n\tupdateComponentKindOfThing(componentClass) {\n\t\tthis.title.textContent = componentClass.componentName;\n\n\t\tlet icon = el('i.icon.fa.' + componentClass.icon);\n\t\tmount(this.title, icon);\n\t\tthis.title.style.color = componentClass.color;\n\t\tthis.title.setAttribute('title', componentClass.description);\n\t\tthis.el.style['border-color'] = componentClass.color;\n\t}\n}\n\nclass Property {\n\tconstructor() {\n\t\tthis.el = el('tr.property', { name: '' },\n\t\t\tthis.name = el('td.nameCell'),\n\t\t\tthis.content = el('td.propertyContent')\n\t\t);\n\t}\n\treset() {\n\t\tlet componentData = this.property.getParent();\n\t\tthis.property.delete();\n\t\tif (componentData._children.size === 0) {\n\t\t\tif (componentData.getParentComponentData())\n\t\t\t\tcomponentData.delete();\n\t\t}\n\t\t\n\t\tdispatch(this, 'markPropertyEditorDirty');\n\t}\n\toninput(val) {\n\t\ttry {\n\t\t\tthis.property.propertyType.validator.validate(this.convertFromInputToPropertyValue(val));\n\t\t\tthis.el.removeAttribute('error');\n\t\t} catch(e) {\n\t\t\tthis.el.setAttribute('error', 'true');\n\t\t}\n\t}\n\tonchange(val) {\n\t\tlet originalValue = this.property.value;\n\t\ttry {\n\t\t\tdispatch(this, 'makingChanges');\n\t\t\tthis.property.value = this.property.propertyType.validator.validate(this.convertFromInputToPropertyValue(val));\n\t\t\tif (!this.property.id) {\n\t\t\t\tdispatch(this, 'propertyInherited', this.property);\n\t\t\t}\n\t\t} catch(e) {\n\t\t\t// console.log('Error while changing property value', this.property, this.input.value);\n\t\t\tthis.property.value = originalValue;\n\t\t}\n\t\tthis.setValueFromProperty();\n\t\tthis.el.removeAttribute('error');\n\t}\n\tsetValueFromProperty() {\n\t\tlet val = this.property.value;\n\t\tconsole.log('mo');\n\t\tif (this.property.propertyType.getFlag(Prop.flagDegreesInEditor))\n\t\t\tval = +(val * 180 / Math.PI).toFixed(1);\n\t\tthis.setValue(val);\n\t}\n\tconvertFromInputToPropertyValue(val) {\n\t\tif (this.property.propertyType.getFlag(Prop.flagDegreesInEditor))\n\t\t\treturn val * Math.PI / 180;\n\t\telse\n\t\t\treturn val;\n\t}\n\tupdate(property) {\n\t\tthis.property = property;\n\t\tthis.el.setAttribute('name', property.name);\n\t\tthis.el.setAttribute('type', property.propertyType.type.name);\n\t\tthis.name.textContent = property.propertyType.name;\n\t\tthis.name.setAttribute('title', `${property.propertyType.name} (${property.propertyType.type.name}) ${property.propertyType.description}`);\n\t\tthis.content.innerHTML = '';\n\t\tlet propertyEditorInstance = editors[this.property.propertyType.type.name] || editors.default;\n\t\tthis.setValue = propertyEditorInstance(this.content, val => this.oninput(val), val => this.onchange(val), property.propertyType);\n\t\tthis.setValueFromProperty();\n\t\tthis.el.classList.toggle('ownProperty', !!this.property.id);\n\t\tif (this.property.id) {\n\t\t\tlet parent = this.property.getParent();\n\t\t\tif (parent.threeLetterType === 'cda'\n\t\t\t\t&& (parent.name !== 'Transform' || parent.getParent().threeLetterType !== 'epr'))\n\t\t\t\t// Can not delete anything from entity prototype transform \n\t\t\t{\n\t\t\t\tthis.name.style.color = parent.componentClass.color;\n\n\t\t\t\tmount(this.content, el('i.fa.fa-window-close.button.resetButton.iconButton', {\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tdispatch(this, 'makingChanges');\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t} else if (parent.threeLetterType === 'com') {\n\t\t\t\tthis.name.style.color = parent.constructor.color;\n\t\t\t}\n\t\t} else\n\t\t\tthis.name.style.color = 'inherit';\n\t}\n}\n","import { el, list, mount } from 'redom';\nimport Module from './module';\nimport PropertyEditor from '../views/propertyEditor';\nimport { editor } from '../editor';\n\nclass Type extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.propertyEditor = new PropertyEditor()\n\t\t);\n\t\tthis.id = 'type';\n\t\tthis.name = 'Type';\n\t}\n\tupdate() {\n\t\tif (editor.selection.type === 'prt') {\n\t\t\tthis.propertyEditor.update(editor.selection.items, editor.selection.type);\n\t\t} else if (editor.selection.type === 'ent') {\n\t\t\tthis.propertyEditor.update(editor.selection.items.map(e => e.prototype.prototype), editor.selection.type);\n\t\t} else {\n\t\t\treturn false; // hide\n\t\t}\n\t}\n\tactivate(command, parameter) {\n\t\tif (command === 'focusOnProperty') {\n\t\t\t\n\t\t\tthis.propertyEditor.el.querySelector(`.property[name='${parameter}'] input`).select();\n\t\t\t// console.log(nameProp);\n\t\t}\n\t}\n}\n\nModule.register(Type, 'right');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\nimport PropertyEditor from '../views/propertyEditor';\nimport { editor } from '../editor';\nimport { scene } from '../../core/scene';\n\nclass Instance extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.propertyEditor = new PropertyEditor()\n\t\t);\n\t\tthis.id = 'instance';\n\t\tthis.name = 'Instance';\n\t}\n\tupdate() {\n\t\tif (editor.selection.type === 'ent') {\n\t\t\tif (scene.isInInitialState()) {\n\t\t\t\tthis.propertyEditor.update(editor.selection.items.map(entity => entity.prototype), 'epr');\n\t\t\t} else {\n\t\t\t\tthis.propertyEditor.update(editor.selection.items, editor.selection.type);\n\t\t\t}\n\t\t} else {\n\t\t\treturn false; // hide module\n\t\t}\n\t}\n\tactivate(command, parameter) {\n\t}\n}\n\nModule.register(Instance, 'right');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\nimport events, { dispatch, listen } from '../events';\nimport { listenMouseMove, listenMouseDown, listenMouseUp, listenKeyDown, key, keyPressed } from '../../util/input';\nimport Scene, { scene } from '../../core/scene';\nimport EntityPrototype from '../../core/entityPrototype';\nimport ComponentData from '../../core/componentData';\nimport assert from '../../assert';\nimport Entity from '../../core/entity';\nimport { Component } from '../../core/component';\nimport { TopButton } from './topBar';\nimport { editor, loadedPromise } from '../editor';\nimport { changeType, setChangeOrigin } from '../../core/serializableManager';\nimport * as sceneEdit from '../util/sceneEdit';\n\nclass SceneModule extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.canvas = el('canvas.anotherCanvas', {\n\t\t\t\t// width and height will be fixed after loading\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t}),\n\t\t\tel('div.pauseInfo', `Paused. Editing instances will not affect the level.`),\n\t\t\tel('i.fa.fa-pause.pauseInfo.topLeft'),\n\t\t\tel('i.fa.fa-pause.pauseInfo.topRight'),\n\t\t\tel('i.fa.fa-pause.pauseInfo.bottomLeft'),\n\t\t\tel('i.fa.fa-pause.pauseInfo.bottomRight')\n\t\t);\n\t\tthis.el.classList.add('hidePauseButtons');\n\n\t\tsetInterval(() => {\n\t\t\tthis.fixAspectRatio();\n\t\t}, 500);\n\t\tsetTimeout(() => {\n\t\t\tthis.fixAspectRatio();\n\t\t});\n\t\t\n\t\tthis.id = 'scene';\n\t\tthis.name = 'Scene';\n\n\t\t/*\n\t\tloadedPromise.then(() => {\n\t\t\tif (editor.selectedLevel)\n\t\t\t\teditor.selectedLevel.createScene();\n\t\t\telse\n\t\t\t\tthis.drawInvalidScene();\n\t\t});\n\t\t*/\n\t\t\n\t\tthis.newEntities = [];\n\t\tthis.entityUnderMouse = null;\n\t\tthis.previousMousePos = null;\n\t\t\n\t\tthis.entitiesToMove = [];\n\t\tthis.selectedEntities = [];\n\t\t\n\t\tthis.selectionStart = null;\n\t\tthis.selectionEnd = null;\n\t\tthis.entitiesInSelection = [];\n\t\t\n\t\tthis.entityListeners = [];\n\t\t\n\t\tthis.playButton = new TopButton({\n\t\t\ttext: 'Play',\n\t\t\ticonClass: 'fa-play',\n\t\t\tcallback: btn => {\n\t\t\t\tif (!scene)\n\t\t\t\t\treturn;\n\t\t\t\t\n\t\t\t\tsetChangeOrigin(this);\n\n\t\t\t\tthis.clearState();\n\t\t\t\t\n\t\t\t\tif (scene.playing) {\n\t\t\t\t\tscene.pause();\n\t\t\t\t\tthis.draw();\n\t\t\t\t} else\n\t\t\t\t\tscene.play();\n\t\t\t\tthis.updatePlayPauseButtonStates();\n\t\t\t}\n\t\t});\n\t\tthis.stopButton = new TopButton({\n\t\t\ttext: 'Reset',\n\t\t\ticonClass: 'fa-stop',\n\t\t\tcallback: btn => {\n\t\t\t\tsetChangeOrigin(this);\n\t\t\t\tthis.stopAndReset();\n\t\t\t}\n\t\t});\n\t\t\n\t\tevents.listen('setLevel', lvl => {\n\t\t\tif (lvl)\n\t\t\t\tlvl.createScene(false, this);\n\t\t\telse if (scene) {\n\t\t\t\tscene.delete(this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.clearState();\n\t\t\tthis.draw();\n\t\t});\n\n\t\t// Change in serializable tree\n\t\tevents.listen('prototypeClicked', prototype => {\n\t\t\tif (!scene)\n\t\t\t\treturn;\n\t\t\t\n\t\t\tthis.clearState();\n\t\t\t\n\t\t\tlet entityPrototype = EntityPrototype.createFromPrototype(prototype, []);\n\t\t\tentityPrototype.position = new Victor(this.canvas.width/2, this.canvas.height/2);\n\t\t\tlet newEntity = entityPrototype.createEntity(this);\n\t\t\tthis.newEntities.push(newEntity);\n\t\t\tthis.draw();\n\t\t});\n\t\t\n\t\tevents.listen('change', change => {\n\t\t\t// console.log('sceneModule change', change);\n\t\t\tif (change.origin !== this) {\n\t\t\t\tsetChangeOrigin(this);\n\t\t\t\tsceneEdit.syncAChangeBetweenSceneAndLevel(change);\n\t\t\t\t\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\t\t\n\t\tlistenKeyDown(k => {\n\t\t\tsetChangeOrigin(this);\n\t\t\tif (k === key.esc) {\n\t\t\t\tthis.clearState();\n\t\t\t\tthis.draw();\n\t\t\t} else if (k === key.backspace) {\n\t\t\t\tsceneEdit.deleteEntities(this.selectedEntities);\n\t\t\t\tthis.clearState();\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t});\n\n\t\tlistenMouseMove(this.el, mousePos => {\n\t\t\tsetChangeOrigin(this);\n\t\t\tlet change = this.previousMousePos ? mousePos.clone().subtract(this.previousMousePos) : mousePos;\n\t\t\tthis.entityUnderMouse = null;\n\t\t\t\n\t\t\tsceneEdit.setEntityPositions(this.newEntities, mousePos); // these are not in scene\n\t\t\tsceneEdit.moveEntities(this.entitiesToMove, change); // these are in scene\n\t\t\tsceneEdit.copyPositionFromEntitiesToEntityPrototypes(this.entitiesToMove);\n\t\t\t\n\t\t\tif (scene) {\n\t\t\t\tif (!scene.playing && this.newEntities.length === 0 && !this.selectionEnd)\n\t\t\t\t\tthis.entityUnderMouse = sceneEdit.getEntityUnderMouse(mousePos);\n\t\t\t}\n\t\t\t\n\t\t\tif (this.selectionEnd) {\n\t\t\t\tthis.selectionEnd.add(change);\n\t\t\t\tthis.entitiesInSelection = sceneEdit.getEntitiesInSelection(this.selectionStart, this.selectionEnd);\n\t\t\t}\n\n\t\t\tthis.previousMousePos = mousePos;\n\t\t\tthis.draw();\n\t\t});\n\t\tlistenMouseDown(this.el, mousePos => {\n\t\t\tsetChangeOrigin(this);\n\t\t\tif (this.newEntities.length > 0)\n\t\t\t\tsceneEdit.copyEntitiesToScene(this.newEntities);\n\t\t\telse if (this.entityUnderMouse) {\n\t\t\t\tif (this.selectedEntities.indexOf(this.entityUnderMouse) >= 0) {\n\t\t\t\t} else {\n\t\t\t\t\tif (!keyPressed(key.shift))\n\t\t\t\t\t\tthis.selectedEntities.length = 0;\n\t\t\t\t\tthis.selectedEntities.push(this.entityUnderMouse);\n\t\t\t\t}\n\t\t\t\tthis.entitiesToMove.push(...this.selectedEntities);\n\t\t\t\tthis.selectSelectedEntitiesInEditor();\n\t\t\t} else {\n\t\t\t\tthis.selectedEntities.length = 0;\n\t\t\t\tthis.selectionStart = mousePos;\n\t\t\t\tthis.selectionEnd = mousePos.clone();\n\t\t\t}\n\t\t\t\n\t\t\tthis.draw();\n\t\t});\n\t\tlistenMouseUp(this.el, mousePos => {\n\t\t\tthis.selectionStart = null;\n\t\t\tthis.selectionEnd = null;\n\t\t\tthis.entitiesToMove.length = 0;\n\t\t\t\n\t\t\tif (this.entitiesInSelection.length > 0) {\n\t\t\t\tthis.selectedEntities.push(...this.entitiesInSelection);\n\t\t\t\tthis.entitiesInSelection.length = 0;\n\t\t\t}\n\t\t\t\n\t\t\tthis.draw();\n\t\t});\n\t}\n\tupdatePlayPauseButtonStates() {\n\t\tif (scene.playing) {\n\t\t\tthis.el.classList.add('hidePauseButtons');\n\t\t\tthis.playButton.icon.className = 'fa fa-pause';\n\t\t} else {\n\t\t\tthis.el.classList.toggle('hidePauseButtons', scene.isInInitialState());\n\t\t\tthis.playButton.icon.className = 'fa fa-play';\n\t\t}\n\t}\n\t\n\tfixAspectRatio() {\n\t\tif (this.canvas) {\n\t\t\tlet change = false;\n\t\t\tif (this.canvas.width !== this.canvas.offsetWidth && this.canvas.offsetWidth) {\n\t\t\t\tthis.canvas.width = this.canvas.offsetWidth;\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t\tif (this.canvas.height !== this.canvas.offsetHeight && this.canvas.offsetHeight) {\n\t\t\t\tthis.canvas.height = this.canvas.offsetHeight;\n\t\t\t\tchange = true;\n\t\t\t}\n\t\t\tif (change) {\n\t\t\t\tthis.draw();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tdraw() {\n\t\tif (scene) {\n\t\t\tif (!scene.playing) {\n\t\t\t\tscene.draw();\n\t\t\t\tscene.dispatch('onDrawHelper', scene.context);\n\t\t\t\tsceneEdit.drawPositionHelpers(scene.getChildren('ent'));\n\t\t\t\tsceneEdit.drawEntityUnderMouse(this.entityUnderMouse);\n\t\t\t\tsceneEdit.drawSelection(this.selectionStart, this.selectionEnd, this.entitiesInSelection);\n\t\t\t\tsceneEdit.drawSelectedEntities(this.selectedEntities);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.drawInvalidScene();\n\t\t}\n\t}\n\t\n\tdrawInvalidScene() {\n\t\tlet context = this.canvas.getContext('2d');\n\t\tcontext.font = '30px arial';\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillText('No level loaded.', 10, 35);\n\t}\n\t\n\tclearState() {\n\t\tthis.deleteNewEntities();\n\t\t\n\t\tthis.entityUnderMouse = null;\n\t\tthis.selectedEntities.length = 0;\n\t\tthis.entitiesToMove.length = 0;\n\n\t\tthis.selectionStart = null;\n\t\tthis.selectionEnd = null;\n\t}\n\t\n\tdeleteNewEntities() {\n\t\tthis.newEntities.forEach(e => {\n\t\t\te.prototype.delete();\n\t\t\te.delete();\n\t\t});\n\t\tthis.newEntities.length = 0;\n\t}\n\t\n\tclearEntityListeners() {\n\t\tthis.entityListeners.forEach(listener => listener());\n\t\tthis.entityListeners.length = 0;\n\t}\n\t\n\tselectSelectedEntitiesInEditor() {\n\t\tthis.clearEntityListeners();\n\t\tlet draw = () => this.draw();\n\t\teditor.select(this.selectedEntities, this);\n\t\tthis.selectedEntities.forEach(ent => {\n\t\t\tthis.entityListeners.push(ent.listen('changedInEditor', draw));\n\t\t});\n\t}\n\t\n\tstopAndReset() {\n\t\tthis.clearState();\n\t\tif (editor.selection.type === 'ent') {\n\t\t\teditor.select(editor.selection.items.map(ent => ent.prototype.prototype), this);\n\t\t}\n\t\tif (scene)\n\t\t\tscene.reset(this);\n\t\tthis.playButton.icon.className = 'fa fa-play';\n\t\tthis.updatePlayPauseButtonStates();\n\t\tthis.draw();\n\t}\n}\n\nModule.register(SceneModule, 'center');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\nimport events from '../events';\nimport Prototype from '../../core/prototype';\nimport { getSerializable, changeType, setChangeOrigin } from '../../core/serializableManager';\nimport assert from '../../assert';\nimport { editor } from '../editor';\n\nclass Types extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.addButton = el('span.addTypeButton.button.fa.fa-plus'),\n\t\t\tthis.search = el('input'),\n\t\t\tthis.searchIcon = el('i.fa.fa-search.searchIcon'),\n\t\t\tthis.jstree = el('div')\n\t\t);\n\t\tthis.id = 'types';\n\t\tthis.name = 'Types';\n\n\t\tthis.addButton.onclick = () => {\n\t\t\tsetChangeOrigin(this);\n\t\t\tlet prototype = Prototype.create(' New type');\n\t\t\teditor.game.addChild(prototype);\n\t\t\teditor.select(prototype);\n\t\t\tsetTimeout(() => {\n\t\t\t\tModule.activateModule('type', true, 'focusOnProperty', 'name');\n\t\t\t}, 100);\n\t\t};\n\t\t\n\t\tlet searchTimeout = false;\n\t\tthis.search.addEventListener('keyup', () => {\n\t\t\tif (searchTimeout)\n\t\t\t\tclearTimeout(searchTimeout);\n\n\t\t\tsearchTimeout = setTimeout(() => {\n\t\t\t\t$(this.jstree).jstree().search(this.search.value.trim());\n\t\t\t}, 200);\n\t\t});\n\n\t\tevents.listen('change', change => {\n\t\t\tif (change.reference.threeLetterType === 'prt') {\n\t\t\t\tif (change.type === changeType.addSerializableToTree) {\n\t\t\t\t\tlet jstree = $(this.jstree).jstree(true);\n\t\t\t\t\tlet parent = change.parent;\n\t\t\t\t\tlet parentNode;\n\t\t\t\t\tif (parent.threeLetterType === 'gam')\n\t\t\t\t\t\tparentNode = '#';\n\t\t\t\t\telse\n\t\t\t\t\t\tparentNode = jstree.get_node(parent.id);\n\n\t\t\t\t\tjstree.create_node(parentNode, {\n\t\t\t\t\t\ttext: change.reference.getChildren('prp')[0].value,\n\t\t\t\t\t\tid: change.reference.id\n\t\t\t\t\t});\n\t\t\t\t} else\n\t\t\t\t\tthis.dirty = true; // prototypes added, removed, moved or something\n\t\t\t} else if (change.type === changeType.setPropertyValue) {\n\t\t\t\tlet propParent = change.reference._parent;\n\t\t\t\tif (propParent && propParent.threeLetterType === 'prt') {\n\t\t\t\t\tlet jstree = $(this.jstree).jstree(true);\n\t\t\t\t\tlet node = jstree.get_node(propParent.id);\n\t\t\t\t\tjstree.rename_node(node, change.value);\n\t\t\t\t}\n\t\t\t} else if (change.type === 'editorSelection') {\n\t\t\t\tif (change.origin != this && change.reference.type === 'prt') {\n\t\t\t\t\tlet jstree = $(this.jstree).jstree(true);\n\t\t\t\t\tlet node = jstree.get_node(change.reference.items[0].id);\n\t\t\t\t\tjstree.deselect_all();\n\t\t\t\t\tjstree.select_node(node);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tupdate() {\n\t\tif (this.skipUpdate) return;\n\t\tif (!this.jstreeInited)\n\t\t\tthis.dirty = true;\n\n\t\tif (!this.dirty) return;\n\t\t\n\t\tlet data = [];\n\t\teditor.game.forEachChild('prt', prototype => {\n\t\t\tlet parent = prototype.getParent();\n\t\t\tdata.push({\n\t\t\t\ttext: prototype.name,\n\t\t\t\tid: prototype.id,\n\t\t\t\tparent: parent.threeLetterType === 'prt' ? parent.id : '#'\n\t\t\t});\n\t\t}, true);\n\n\t\tif (!this.jstreeInited) {\n\t\t\t$(this.jstree).attr('id', 'types-jstree').on('changed.jstree', (e, data) => {\n\t\t\t\t// selection changed\n\t\t\t\tthis.skipUpdate = true;\n\t\t\t\tlet prototypes = data.selected.map(getSerializable);\n\t\t\t\teditor.select(prototypes, this);\n\t\t\t\tthis.skipUpdate = false;\n\t\t\t\tif (prototypes.length === 1)\n\t\t\t\t\tevents.dispatch('prototypeClicked', prototypes[0]);\n\t\t\t}).on('loaded.jstree refresh.jstree', () => {\n\t\t\t\tlet jstree = $(this.jstree).jstree(true);\n\t\t\t\t// let selNode = jstree.get_node('prtF21ZLL0vsLdQI5z');\n\t\t\t\t// console.log(jstree, selNode);\n\t\t\t\tif (editor.selection.type === 'none') {\n\t\t\t\t\t//jstree.select_node();\n\t\t\t\t}\n\t\t\t\tif (editor.selection.type === 'prt') {\n\t\t\t\t\t// jstree.select_node(editor.selection.items.map(i => i.id));\n\t\t\t\t}\n\t\t\t}).jstree({\n\t\t\t\tcore: {\n\t\t\t\t\tcheck_callback: true,\n\t\t\t\t\tdata,\n\t\t\t\t\tforce_text: true\n\t\t\t\t},\n\t\t\t\tplugins: ['types', 'dnd', 'sort', 'search'/*, 'state'*/],\n\t\t\t\ttypes: {\n\t\t\t\t\tdefault: {\n\t\t\t\t\t\ticon: 'fa fa-book'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsort: function (a, b) {\n\t\t\t\t\treturn this.get_text(a).toLowerCase() > this.get_text(b).toLowerCase() ? 1 : -1;\n\t\t\t\t},\n\t\t\t\tdnd: {\n\t\t\t\t\tcopy: false // jstree makes it way too hard to copy multiple prototypes\n\t\t\t\t},\n\t\t\t\tsearch: {\n\t\t\t\t\tfuzzy: true,\n\t\t\t\t\tshow_only_matches: true,\n\t\t\t\t\tshow_only_matches_children: true,\n\t\t\t\t\tclose_opened_onclear: false\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.jstreeInited = true;\n\t\t} else {\n\t\t\t$(this.jstree).jstree(true).settings.core.data = data;\n\t\t\t$(this.jstree).jstree('refresh');\n\t\t}\n\t\t$(this.jstree).data('typesModule', this);\n\n\t\tthis.dirty = false;\n\t}\n}\n\n$(document).on('dnd_stop.vakata', function (e, data) {\n\tlet jstree = $('#types-jstree').jstree(true);\n\tlet typesModule = $('#types-jstree').data('typesModule');\n\t\n\tsetTimeout(function () {\n\t\t// Now the nodes have moved in the DOM.\n\n\t\tlet node = jstree.get_node(data.data.obj);\n\t\tlet nodes = data.data.nodes; // these prototypes will move\n\t\tlet newParent;\n\t\tif (node.parent === '#')\n\t\t\tnewParent = editor.game;\n\t\telse\n\t\t\tnewParent = getSerializable(node.parent);\n\t\t\n\t\tlet nodeObjects = nodes.map(getSerializable);\n\t\tnodeObjects.forEach(assert);\n\t\tnodeObjects.forEach(prototype => {\n\t\t\tsetChangeOrigin(jstree);\n\t\t\tprototype.move(newParent);\n\t\t});\n\t\t\n\t\t// console.log('dnd stopped from', nodes, 'to', newParent);\n\t});\n});\n\nModule.register(Types, 'left');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\n\nclass TestModule extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.content = el('span', 'List of instances on the scene')\n\t\t);\n\t\tthis.name = 'Instances';\n\t\tthis.id = 'instances';\n\t}\n\tupdate() {\n\t}\n}\n\nModule.register(TestModule, 'left');\n","import { el, list, mount } from 'redom';\nimport Module from './module';\n\nclass TestModule extends Module {\n\tconstructor() {\n\t\tsuper(\n\t\t\tthis.content = el('span', 'This is test 3')\n\t\t);\n\t\tthis.id = 'test';\n\t\tthis.name = 'Test3';\n\t}\n\tupdate() {\n\t\treturn false;\n\t}\n}\n\nModule.register(TestModule, 'bottom');\n","import events from './events';\nimport Layout from './layout/layout';\nimport './module/topBar';\nimport './module/type';\nimport './module/instance';\nimport './module/scene';\nimport './module/types';\nimport './module/instances';\nimport './module/test3';\nimport { el, list, mount } from 'redom';\nimport Game from '../core/game';\nimport Serializable from '../core/serializable';\nimport { addChangeListener, serializables, executeExternal, setChangeOrigin } from '../core/serializableManager';\nimport assert from '../assert';\nimport { setNetworkEnabled } from '../util/net';\n\nlet loaded = false;\n\n// let gameJSON = {\"id\":\"gamX3PlJ95bNpPKDgD\",\"c\":[{\"id\":\"prt5TRc7kWUc4MqW76\",\"c\":[{\"id\":\"cdaFcPiee9ZC3aYiYf\",\"c\":[{\"id\":\"prp9SPJcczIfgDhNGw\",\"v\":{\"x\":100,\"y\":100},\"n\":\"position\"}],\"cid\":\"_Transform\",\"n\":\"Transform\"},{\"id\":\"cdaepjxpza0YFHIEiA\",\"c\":[{\"id\":\"prp5vwerDeG6SL2i5A\",\"v\":1,\"n\":\"userControlled\"},{\"id\":\"prpuGPnQvgmaTvN6MI\",\"v\":400,\"n\":\"speed\"}],\"cid\":\"cidcEyuD7qDX\",\"n\":\"Mover\"},{\"id\":\"cday0v75SoMQXxAFOt\",\"c\":[{\"id\":\"prp6RjrKUmssxP60ZD\",\"v\":{\"x\":29,\"y\":30},\"n\":\"size\"},{\"id\":\"prp1PomSBAMwvbgbsW\",\"v\":\"green\",\"n\":\"style\"}],\"cid\":\"_Rect\",\"n\":\"Rect\"},{\"id\":\"prpEajDLAUPnDJ14xL\",\"v\":\"Player\",\"n\":\"name\"}]},{\"id\":\"prtS4rWsWzGekFUeM4\",\"c\":[{\"id\":\"prpSDVDvkIuXFnRlxp\",\"v\":\"Object\",\"n\":\"name\"},{\"id\":\"cdaCWRIexho11JGDmG\",\"c\":[{\"id\":\"prp022Xuf0XPeAZWSp\",\"v\":{\"x\":300,\"y\":200},\"n\":\"position\"}],\"cid\":\"_Transform\",\"n\":\"Transform\"},{\"id\":\"cdaMfmfhIWKXd9wDwr\",\"c\":[{\"id\":\"prpEqUd69FxjArJKVL\",\"v\":3,\"n\":\"speed\"}],\"cid\":\"cidBDsPAcjlJ\",\"n\":\"Mover\"},{\"id\":\"cdarRyJAVxP6V1sVDS\",\"c\":[{\"id\":\"prpeBoK1W9EzKhypNy\",\"v\":{\"x\":100,\"y\":10},\"n\":\"size\"},{\"id\":\"prpEd9zAV77OTlU5g1\",\"v\":\"brown\",\"n\":\"style\"}],\"cid\":\"cidjJubEoscl\",\"n\":\"Rect\"}]},{\"id\":\"prpZAysxUUZI41t8f2\",\"v\":\"My Game\",\"n\":\"name\"}]};\nlet gameJSON = {\"id\":\"gamX3PlJ95bNpPKDgD\",\"c\":[{\"id\":\"prt5TRc7kWUc4MqW76\",\"c\":[{\"id\":\"prpEajDLAUPnDJ14xL\",\"v\":\"Player\",\"n\":\"name\"},{\"id\":\"cdaepjxpza0YFHIEiA\",\"c\":[{\"id\":\"prp5vwerDeG6SL2i5A\",\"v\":1,\"n\":\"userControlled\"},{\"id\":\"prpuGPnQvgmaTvN6MI\",\"v\":200,\"n\":\"speed\"}],\"cid\":\"cidcEyuD7qDX\",\"n\":\"Mover\"},{\"id\":\"cday0v75SoMQXxAFOt\",\"c\":[{\"id\":\"prp6RjrKUmssxP60ZD\",\"v\":{\"x\":27,\"y\":30},\"n\":\"size\"},{\"id\":\"prp1PomSBAMwvbgbsW\",\"v\":\"green\",\"n\":\"style\"}],\"cid\":\"_Rect\",\"n\":\"Rect\"}]},{\"id\":\"prtS4rWsWzGekFUeM4\",\"c\":[{\"id\":\"prpSDVDvkIuXFnRlxp\",\"v\":\"Object\",\"n\":\"name\"},{\"id\":\"cdaCWRIexho11JGDmG\",\"c\":[{\"id\":\"prp022Xuf0XPeAZWSp\",\"v\":{\"x\":320,\"y\":200},\"n\":\"position\"}],\"cid\":\"_Transform\",\"n\":\"Transform\"},{\"id\":\"cdaMfmfhIWKXd9wDwr\",\"c\":[{\"id\":\"prpEqUd69FxjArJKVL\",\"v\":3,\"n\":\"speed\"},{\"id\":\"prp21B9MfFP157IuDe\",\"v\":{\"x\":200,\"y\":10},\"n\":\"change\"}],\"cid\":\"cidBDsPAcjlJ\",\"n\":\"Mover\"},{\"id\":\"cdarRyJAVxP6V1sVDS\",\"c\":[{\"id\":\"prpEd9zAV77OTlU5g1\",\"v\":\"pink\",\"n\":\"style\"},{\"id\":\"prpsUjpCfC8EAEfQFi\",\"v\":{\"x\":201,\"y\":20},\"n\":\"size\"},{\"id\":\"prpBy12pct8db7TMnp\",\"v\":0,\"n\":\"randomStyle\"}],\"cid\":\"cidjJubEoscl\",\"n\":\"Rect\"}]},{\"id\":\"prpZAysxUUZI41t8f2\",\"v\":\"My Game\",\"n\":\"name\"},{\"id\":\"lvlSHQxuStFIeIxRXv\",\"c\":[{\"id\":\"eprVdD3ZJc2pVJipVB\",\"p\":\"prtS4rWsWzGekFUeM4\",\"c\":[{\"id\":\"cdafDxuhz72Ndbkugh\",\"c\":[{\"id\":\"prp55l9n2mHIFsxMyN\",\"v\":\"gray\",\"n\":\"style\"},{\"id\":\"prpbmcTKg6ADOFc0Wj\",\"v\":{\"x\":100,\"y\":10},\"n\":\"size\"},{\"id\":\"prpohtPa75nKevc5hQ\",\"v\":1,\"n\":\"randomStyle\"}],\"cid\":\"cidjJubEoscl\",\"n\":\"Rect\"}],\"x\":449,\"y\":129},{\"id\":\"epr7OAmiXsv4fwa788\",\"p\":\"prtS4rWsWzGekFUeM4\",\"c\":[{\"id\":\"cdar4cz8bpRbA9ugrX\",\"c\":[{\"id\":\"prpVtH5R9efpaqLHOj\",\"v\":{\"x\":300,\"y\":40},\"n\":\"size\"},{\"id\":\"prpE4TgmrKB1cYHrwH\",\"v\":\"white\",\"n\":\"style\"}],\"cid\":\"cidjJubEoscl\",\"n\":\"Rect\"}],\"n\":\"Objecti\",\"x\":255,\"y\":256},{\"id\":\"eprQ6RevaMgpSH48Ge\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":576,\"y\":313},{\"id\":\"eprYbXpvrVagTW1WDu\",\"p\":\"prt5TRc7kWUc4MqW76\",\"x\":405,\"y\":281},{\"id\":\"eprkTfTfI2qD1njj5b\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":169,\"y\":61},{\"id\":\"epra9FKWwaTdn0ESt7\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":127,\"y\":116},{\"id\":\"eprD7nE1RFLxKL1qIK\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":141,\"y\":158},{\"id\":\"eprn74UxMemnAiDlc6\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":126,\"y\":205},{\"id\":\"eprOpWzKUJyUYgoEEk\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":306,\"y\":137},{\"id\":\"epr1vZ5JFHy0PL2elM\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":523,\"y\":45}]},{\"id\":\"lvlZ4ROEjqZfMUwjiI\"},{\"id\":\"lvlxP0GdNC37hoKy4N\"},{\"id\":\"lvlIZlQQPH2tLG6B46\"},{\"id\":\"lvlJVs96mjimfsLLqq\",\"c\":[{\"id\":\"epreoHypBlS46HcXH6\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":226,\"y\":27},{\"id\":\"eprLjXWzx0ZVNF4Vmt\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":243,\"y\":42},{\"id\":\"eprnjuzVDFkORdr1Zh\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":268,\"y\":55},{\"id\":\"eprVRrbJncfySK7gal\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":286,\"y\":67},{\"id\":\"eprMQyVCGBU7wffA8p\",\"p\":\"prtS4rWsWzGekFUeM4\",\"x\":310,\"y\":81}]},{\"id\":\"lvlztAqS2kgqClv7s8\"},{\"id\":\"lvlutj7lrdcFquLh3L\"}]};\n\nwindow.addEventListener('load', () => {\n\tsetChangeOrigin('editor');\n\tlet anotherGame;\n\ttry {\n\t\texecuteExternal(() => {\n\t\t\t// anotherGame = Serializable.fromJSON(gameJSON, 'editorInit');\n\t\t\tanotherGame = Serializable.fromJSON(JSON.parse(localStorage.anotherGameJSON));\n\t\t});\n\t} catch(e) {\n\t\tif (confirm('Game parsing failed. Do you want to clear the game? Press cancel to see the error.')) {\n\t\t\tconsole.warn('game parsing failed', e);\n\t\t} else {\n\t\t\tObject.keys(serializables).forEach(key => delete serializables[key]);\n\t\t\tanotherGame = Serializable.fromJSON(JSON.parse(localStorage.anotherGameJSON), 'editorInit');\n\t\t}\n\t}\n\teditor = new Editor(anotherGame);\n\tevents.dispatch('registerModules', editor);\n});\nevents.listen('modulesRegistered', () => {\n\tloaded = true;\n\tevents.dispatch('loaded');\n\n\tsetNetworkEnabled(true);\n});\n\nsetInterval(() => {\n\teditor && editor.dirty && editor.update();\n}, 200);\n\naddChangeListener(change => {\n\tevents.dispatch('change', change);\n\tif (editor) {\n\t\teditor.dirty = true;\n\t\tif (change.type !== 'editorSelection' && loaded)\n\t\t\teditor.saveNeeded = true;\n\t}\n});\n\nexport let editor = null;\nclass Editor {\n\tconstructor(game = Game.create('My Game')) {\n\t\tthis.layout = new Layout();\n\t\t\n\t\tthis.dirty = true;\n\t\t\n\t\tthis.game = game;\n\t\tthis.selectedLevel = null;\n\t\tloadedPromise.then(() => {\n\t\t\tthis.setLevel(game.getChildren('lvl')[0]);\n\t\t});\n\t\t\n\t\tthis.selection = {\n\t\t\ttype: 'none',\n\t\t\titems: [],\n\t\t\tdirty: true\n\t\t};\n\n\t\tmount(document.body, this.layout);\n\t}\n\tsetLevel(level) {\n\t\tif (level && level.threeLetterType === 'lvl')\n\t\t\tthis.selectedLevel = level;\n\t\telse\n\t\t\tthis.selectedLevel = null;\n\t\t\n\t\tthis.select([], this);\n\t\tevents.dispatch('setLevel', this.selectedLevel);\n\t}\n\tselect(items, origin) {\n\t\tif (!Array.isArray(items))\n\t\t\titems = [items];\n\t\tthis.selection.items = [].concat(items);\n\t\t\n\t\tlet types = Array.from(new Set(items.map(i => i.threeLetterType)));\n\t\tif (types.length === 0)\n\t\t\tthis.selection.type = 'none';\n\t\telse if (types.length === 1)\n\t\t\tthis.selection.type = types[0];\n\t\telse\n\t\t\tthis.selection.type = 'mixed';\n\t\t\n\t\tthis.dirty = true;\n\t\t\n\t\tevents.dispatch('change', {\n\t\t\ttype: 'editorSelection',\n\t\t\treference: this.selection,\n\t\t\torigin\n\t\t});\n\t\t\n\t\tthis.update();\n\t}\n\tupdate() {\n\t\tif (!this.dirty) return;\n\t\tthis.layout.update();\n\t\t\n\t\tlet logStr = 'update';\n\t\t\n\t\tif (this.saveNeeded) {\n\t\t\tlogStr += ' & save';\n\t\t\tthis.save();\n\t\t}\n\t\t\n\t\tthis.dirty = false;\n\t\tthis.saveNeeded = false;\n\t\t\n\t\tconsole.log(logStr);\n\t}\n\tsave() {\n\t\tlocalStorage.anotherGameJSON = JSON.stringify(this.game.toJSON());\n\t}\n}\n\n\nlet options = null;\nfunction loadOptions() {\n\tif (!options) {\n\t\ttry {\n\t\t\toptions = JSON.parse(localStorage.anotherOptions);\n\t\t} catch(e) {\n\t\t\toptions = {};\n\t\t}\n\t}\n}\nexport function setOption(id, stringValue) {\n\tloadOptions();\n\toptions[id] = stringValue;\n\ttry {\n\t\tlocalStorage.anotherOptions = JSON.stringify(options);\n\t} catch(e) {\n\t}\n}\nexport function getOption(id) {\n\tloadOptions();\n\treturn options[id];\n}\n\nexport let modulesRegisteredPromise = events.getLoadEventPromise('modulesRegistered');\nexport let loadedPromise = events.getLoadEventPromise('loaded');\n","import './main';\n\nimport './core/test';\nimport './core/componentExample'; // temp\n\nimport './editor/editor';\n\nimport Property from './core/property';\nwindow.Property = Property;\n\nimport PropertyType from './core/propertyType';\nwindow.PropertyType = PropertyType;\n\nimport { Component, Prop } from './core/component';\nwindow.Component = Component;\nwindow.Prop = Prop;\n\nimport Serializable from './core/serializable';\nwindow.Serializable = Serializable;\n\nimport { getSerializable } from './core/serializableManager';\nwindow.getSerializable = getSerializable;\n\n\nif (false && 'perf test') {\n\tfunction measure(func, n) {\n\t\tvar start = performance.now();\n\n\t\tfor (var i = 0; i < n; i++)\n\t\t\tfunc(i)\n\n\t\tconsole.log(performance.now() - start);\n\t}\n\n\tvar N = 100000;\n\n\tfunction createThing() {\n\t\treturn {id: '' + Math.random()};\n\t}\n\n\tvar things = [];\n\tmeasure(idx => {\n\t\tthings.push(createThing());\n\t}, N)\n\n\n\tvar arr = [];\n\tmeasure(idx => {\n\t\tarr.push(things[idx]);\n\t}, N)\n\tconsole.log(arr.length);\n\tmeasure(idx => {\n\t\tarr.indexOf(things[idx]);\n\t}, N)\n\tmeasure(idx => {\n\t\tarr.splice(arr.indexOf(things[idx]), 1);\n\t}, N)\n\tconsole.log(arr);\n\n\tvar obj = {};\n\tmeasure(idx => {\n\t\tobj[things[idx].id] = things[idx];\n\t}, N)\n\tconsole.log(Object.keys(obj).length);\n\tmeasure(idx => {\n\t\tobj[things[idx].id];\n\t}, N)\n\tmeasure(idx => {\n\t\tdelete obj[things[idx].id];\n\t}, N)\n\tconsole.log(obj);\n\n\tvar set = new Set();\n\tmeasure(idx => {\n\t\tset.add(things[idx]);\n\t}, N)\n\tconsole.log(set.size);\n\tmeasure(idx => {\n\t\tset.has(things[idx]);\n\t}, N)\n\tmeasure(idx => {\n\t\tset.delete(things[idx]);\n\t}, N)\n\tconsole.log(set);\n\n\tvar map = new Map();\n\tmeasure(idx => {\n\t\tmap.set(things[idx].id, things[idx]);\n\t}, N)\n\tconsole.log(map.size);\n\tmeasure(idx => {\n\t\tmap.get(things[idx].id);\n\t}, N)\n\tmeasure(idx => {\n\t\tmap.delete(things[idx].id);\n\t}, N)\n\tconsole.log(map);\n}\n"],"names":["let","getSerializable","obj","const","serializableManager.addSerializable","serializableManager.removeSerializable","serializableManager.addChange","serializableManager.changeType","this","super","dataType","Serializable","i","Prop","propertyTypes","PropertyType","listeners","events","editor","text","epr","sceneEdit.entityModifiedInEditor","Property","editors","sceneEdit.syncAChangeBetweenSceneAndLevel","sceneEdit.deleteEntities","sceneEdit.setEntityPositions","sceneEdit.moveEntities","sceneEdit.copyPositionFromEntitiesToEntityPrototypes","sceneEdit.getEntityUnderMouse","sceneEdit.getEntitiesInSelection","sceneEdit.copyEntitiesToScene","sceneEdit.drawPositionHelpers","sceneEdit.drawEntityUnderMouse","sceneEdit.drawSelection","sceneEdit.drawSelectedEntities","Module","jstree","node","TestModule","game"],"mappings":"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"}